var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function t(e,n,i){function s(r,a){if(!n[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[r]={exports:{}};e[r][0].call(c.exports,function(t){var n=e[r][1][t];return s(n||t)},c,c.exports,t,e,n,i)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(t,e,n){var i=t("./module/dom.js"),s=t("./module/uploader.js"),o=t("./module/canvas.js"),r=t("./module/group-list.js"),a=t("./module/group-item.js");!function(){var t=new s("#upload-file"),e=new r("#group"),n=new o("#canvas"),l=i("#index"),u=i("#upload-img");l.on("animationend",function(){return l.remove()}),u.on("click",function(){t.open({name:"图片",accept:"image/*"}).on("success",function(t){n.setImage(t),l.addClass("hide")})});var c=i("#zoom-in"),h=i("#zoom-out"),f=i("#replace-img");c.on("click",function(){return n.zoomIn()}),h.on("click",function(){return n.zoomOut()}),f.on("click",function(){t.open({name:"图片",accept:"image/*"}).on("success",function(t){n.setImage(t)})});var d=i("#add-group"),v=i("#search"),m=i("#current");e.setCanvas(n),e.on("activeChange",function(t){m.text(t.getName())}),d.on("click",function(){e.append(new a)}).click(),v.on("input",function(){e.children.forEach(function(t){-1===t.getName().indexOf(v.value())?t.getElement().show():t.getElement().hide()})})}()},{"./module/canvas.js":2,"./module/dom.js":3,"./module/group-item.js":4,"./module/group-list.js":5,"./module/uploader.js":8}],2:[function(t,e,n){var i=t("./dom.js"),s=t("./util.js"),o=new s,r=new s,a=function(){function t(e){_classCallCheck(this,t),this.$el=i(e),this.$img=this.$el.find(".pic"),this.$areas=this.$el.find(".areas")}return _createClass(t,[{key:"bind",value:function(t){this.$group=t}},{key:"init",value:function(){this.scale=1,this.$img.clearStyle(),this.width=o.toFloat(this.$img.width()),this.height=r.toFloat(this.$img.height()),this.update()}},{key:"update",value:function(){this.$img.width(o.toString(this.width*this.scale)),this.$img.height(r.toString(this.height*this.scale))}},{key:"setImage",value:function(t){var e=this;this.$img.attr("src",t),this.$img.on("load",function(){return e.init()},!0)}},{key:"zoomIn",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:.1;this.scale+=t,this.update()}},{key:"zoomOut",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:.1;this.scale>2*t&&(this.scale-=t,this.update())}}]),t}();e.exports=a},{"./dom.js":3,"./util.js":9}],3:[function(t,e,n){var i=function(){function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:document;_classCallCheck(this,t),/^<\w+[\s\w\=\-\"\;]*>[\w\W]*<\/\w+>$/.test(e)?(this.el=document.createElement("div"),this.html(e),this.el=this.el.firstChild,this.els=[this.el]):"object"===(void 0===e?"undefined":_typeof(e))?e instanceof t?(this.el=e.getElement(),this.els=e.getElements()):(this.el=e,this.els=[e]):(this.els=n.querySelectorAll(e),this.el=this.els[0])}return _createClass(t,[{key:"each",value:function(t){this.els.forEach(function(e){t(e)})}},{key:"find",value:function(e){return new t(e,this.el)}},{key:"on",value:function(t,e,n){return n?this.el["on"+t]=e:this.el.addEventListener(t,e),this}},{key:"off",value:function(t,e){return this.el.removeEventListener(t,e),this}},{key:"attr",value:function(t,e){return e!==undefined?(this.el.setAttribute(t,e),this):this.el.getAttribute(t,e)}},{key:"removeAttr",value:function(t){return this.el.removeAttribute(t),this}},{key:"addClass",value:function(){var t;return(t=this.el.classList).add.apply(t,arguments),this}},{key:"removeClass",value:function(){var t;return(t=this.el.classList).remove.apply(t,arguments),this}},{key:"hasClass",value:function(t){return this.el.classList.contains(t)}},{key:"width",value:function(t){return this.css("width",t)}},{key:"height",value:function(t){return this.css("height",t)}},{key:"css",value:function(t,e){return e!==undefined?(this.el.style[t]=e,this):window.getComputedStyle(this.el)[t]}},{key:"clearStyle",value:function(){return this.el.style.cssText="",this}},{key:"getElement",value:function(){return this.el}},{key:"getElements",value:function(){return this.els}},{key:"append",value:function(e){return e instanceof t&&(e=e.getElement()),this.el.appendChild(e),this}},{key:"remove",value:function(){return this.el.remove(),this}},{key:"replace",value:function(e){return e instanceof t&&(e=e.getElement()),this.el.parentNode.replaceChild(e,this.el),this}},{key:"html",value:function(t){return t!==undefined?(this.el.innerHTML=t,this):this.el.innerHTML}},{key:"text",value:function(t){return t!==undefined?(this.el.innerText=t,this):this.el.innerText}},{key:"value",value:function(t){return t!==undefined?(this.el.value=t,this):this.el.value}},{key:"parent",value:function(){return new t(this.el.parentNode)}},{key:"child",value:function(){return[].concat(_toConsumableArray(this.el.children)).map(function(e){return new t(e)})}},{key:"show",value:function(){return this.removeClass("hidden"),this}},{key:"hide",value:function(){return this.addClass("hidden"),this}},{key:"click",value:function(){return this.el.click(),this}}]),t}();e.exports=function(t){return new i(t)}},{}],4:[function(t,e,n){var i=t("./dom.js"),s=t("./popup.js"),o=function(){function t(){var e=this;_classCallCheck(this,t),this.$el=i('<li class="item mark">\n\t\t\t<span class="js-status status">\n\t\t\t\t<i class="js-show icon icon-show" title="隐藏"></i>\n\t\t\t\t<i class="js-hide icon icon-hide hidden" title="显示"></i>\n\t\t\t</span>\n\t\t\t\n\t\t\t<p class="js-name single-line" title="分组名">分组名</p>\n\t\t\t<input class="js-input edit-text hidden" autocomplete="off"/>\n\n\t\t\t<span class="ctrl">\n\t\t\t\t<i class="js-edit icon icon-edit" title="重命名"></i>\n\t\t\t\t<i class="js-submit icon icon-submit hidden" title="确定"></i>\n\t\t\t\t<i class="js-delete icon icon-delete" title="删除"></i>\n\t\t\t</span>\n\t\t</li>'),this.areas=[];var n=this.$el.find(".js-status"),o=this.$el.find(".js-show"),r=this.$el.find(".js-hide"),a=this.$el.find(".js-name"),l=this.$el.find(".js-input"),u=this.$el.find(".js-edit"),c=this.$el.find(".js-submit"),h=this.$el.find(".js-delete");this.$el.on("click",function(){return e.emit("click")}),n.on("click",function(t){(t.stopPropagation(),o.hasClass("hidden"))?!1!==e.emit("status",!0)&&(o.show(),r.hide()):!1!==e.emit("status",!1)&&(o.hide(),r.show())}),u.on("click",function(t){t.stopPropagation(),u.hide(),c.show(),a.hide(),l.show().value(a.text())}),c.on("click",function(t){t.stopPropagation();var n=l.value();!1!==e.emit("rename",n)&&(u.show(),c.hide(),l.hide(),a.show().text(n).attr("title",n),e.name=n)}),l.on("blur",function(){return c.click()}),h.on("click",function(t){t.stopPropagation(),s({content:"是否确认删除分组，<br />删除后将不可恢复。",confirm:function(){e.emit("delete")}})})}return _createClass(t,[{key:"getElement",value:function(){return this.$el}},{key:"getName",value:function(){return this.name}},{key:"setName",value:function(t){return this.name=t,this.$el.find(".js-name").attr("title",t).text(t),this}},{key:"setActive",value:function(){return this.$el.addClass("active"),this}},{key:"removeActive",value:function(){return this.$el.removeClass("active"),this}},{key:"append",value:function(t){return this.areas.push(t.bind(this)),this}},{key:"remove",value:function(t){t.remove()}},{key:"emit",value:function(t){if("function"==typeof this[t+"Handler"]){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return this[t+"Handler"].apply(this,n)}}},{key:"on",value:function(t,e){return this[t+"Handler"]=e,this}}]),t}();e.exports=o},{"./dom.js":3,"./popup.js":6}],5:[function(t,e,n){var i=t("./dom.js"),s=t("./toast.js"),o=function(){function t(e){_classCallCheck(this,t),this.$el=i(e),this.children=[],this.index=0}return _createClass(t,[{key:"bind",value:function(t){return this.$canvas=t,this}},{key:"check",value:function(){if(-1===this.children.indexOf(this.$acitve)){var t=this.children[0];this.$acitve=t.setActive(),this.emit("activeChange",t)}return this}},{key:"choose",value:function(t){var e=this;return this.$acitve=t.setActive(),this.emit("activeChange",t),this.children.forEach(function(t){t!==e.$acitve&&t.removeActive()}),this}},{key:"append",value:function(t){return this.$el.append(t.getElement()),this.children.push(t),this.check(),this}},{key:"remove",value:function(t){return this.children.length>1?(t.getElement().remove(),this.children.splice(this.children.indexOf(t),1),this.check()):s("删除失败，至少保留一个分组","error"),this}},{key:"emit",value:function(t){if("function"==typeof this[t+"Handler"]){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return this[t+"Handler"].apply(this,n)}}},{key:"on",value:function(t,e){return this[t+"Handler"]=e,this}}]),t}();e.exports=o},{"./dom.js":3,"./toast.js":7}],6:[function(t,e,n){var i=t("./dom.js"),s=i("body"),o=i('<div class="popup">\n\t<div class="box">\n\t\t<div class="js-title title"></div>\n\t\t<div class="js-content content"></div>\n\t\t<div class="btns">\n\t\t\t<button class="js-cancel cancel">取消</button>\n\t\t\t<button class="js-confirm confirm ml">确定</button>\n\t\t</div>\n\t</div>\n</div>'),r=o.find(".js-title"),a=o.find(".js-content"),l=o.find(".js-cancel"),u=o.find(".js-confirm");o.on("animationend",function(){o.hasClass("fade-out")&&(o.removeClass("fade-out"),o.remove()),o.hasClass("fade-in")&&o.removeClass("fade-in")}),e.exports=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};"string"==typeof t&&(t={content:t}),r.text(t.title||"提示"),a.html(t.content||""),l.on("click",function(){if("function"==typeof t.cancel&&"false"===t.cancel())return;o.addClass("fade-out")},!0),u.on("click",function(){if("function"==typeof t.confirm&&"false"===t.confirm())return;o.addClass("fade-out")},!0),s.append(o.addClass("fade-in"))}},{"./dom.js":3}],7:[function(t,e,n){var i=t("./dom.js"),s=i("body"),o=i('<div class="toast">\n\t<i class="js-icon icon"></i>\n\t<span class="js-text"></span>\n</div>'),r=o.find(".js-icon"),a=o.find(".js-text");o.on("animationend",function(){o.remove()}),e.exports=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"prompt";o.removeClass("success").removeClass("error").removeClass("prompt").addClass(e),r.removeClass("icon-success").removeClass("icon-error").removeClass("icon-prompt").addClass("icon-"+e),a.text(t),s.append(o)}},{"./dom.js":3}],8:[function(t,e,n){var i=t("./dom.js"),s=function(){function t(e){var n=this;_classCallCheck(this,t),this.$el=i(e),this.init(),this.$el.on("change",function(){var t=n.$el.getElement().files[0];if(!t)return n.$el.value(""),!1;if(!1===n.emit("choose",t))return n.$el.value(""),!1;var e=new FileReader;e.onload=function(t){n.emit("success",t.target.result,t)},e.onerror=function(t){this.emit("error",t)},e.readAsDataURL(t),n.$el.value("")})}return _createClass(t,[{key:"init",value:function(){var t=this;this.successHandler=function(){},this.errorHandler=function(){return alert((t.options.name||"文件")+"读取错误")},this.$el.removeAttr("accept")}},{key:"open",value:function(t){return this.init(),this.options=t||{},this.options.accept&&this.$el.attr("accept",t.accept),this.$el.click(),this}},{key:"on",value:function(t,e){return this[t+"Handler"]=e,this}},{key:"emit",value:function(t){if("function"==typeof this[t+"Handler"]){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return this[t+"Handler"].apply(this,n)}}}]),t}();e.exports=s},{"./dom.js":3}],9:[function(t,e,n){var i=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"toFloat",value:function(t){return t.match(/^(\d+)([a-zA-Z]*)$/),this.unit=RegExp.$2,RegExp.$1}},{key:"toString",value:function(t){return t+this.unit}}]),t}();e.exports=i},{}]},{},[1]);
//# sourceMappingURL=customize.js.map
