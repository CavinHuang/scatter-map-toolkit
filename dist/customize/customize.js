var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function t(e,n,i){function s(l,r){if(!n[l]){if(!e[l]){var a="function"==typeof require&&require;if(!r&&a)return a(l,!0);if(o)return o(l,!0);var u=new Error("Cannot find module '"+l+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[l]={exports:{}};e[l][0].call(c.exports,function(t){var n=e[l][1][t];return s(n||t)},c,c.exports,t,e,n,i)}return n[l].exports}for(var o="function"==typeof require&&require,l=0;l<i.length;l++)s(i[l]);return s}({1:[function(t,e,n){var i,s,o,l,r,a,u,c,h,f=t("./module/dom.js"),d=t("./module/uploader.js"),m=t("./module/canvas.js"),v=t("./module/group.js"),p=t("./module/group-item.js");t("./module/area.js");window,document,i=new d("#upload-file"),s=new m("#canvas"),o=new v("#group"),f("#main"),l=f("#index"),r=f("#upload-img"),f("#upload-option"),a=f("#zoom-in"),u=f("#zoom-out"),c=f("#replace-img"),h=f("#add-group"),l.on("animationend",function(){return l.remove()}),r.on("click",function(){i.open({name:"图片",accept:"image/*"}).on("success",function(t){s.setImage(t),l.addClass("hide")})}),a.on("click",function(){return s.zoomIn()}),u.on("click",function(){return s.zoomOut()}),c.on("click",function(){i.open({name:"图片",accept:"image/*"}).on("success",function(t){s.setImage(t)})}),h.on("click",function(){o.append(new p)}).click()},{"./module/area.js":2,"./module/canvas.js":3,"./module/dom.js":4,"./module/group-item.js":5,"./module/group.js":6,"./module/uploader.js":8}],2:[function(t,e,n){e.exports=function i(){_classCallCheck(this,i)}},{}],3:[function(t,e,n){var i=t("./dom.js"),s=function(){function t(e){_classCallCheck(this,t),this.$el=i(e),this.$img=this.$el.find("img")}return _createClass(t,[{key:"init",value:function(){this.width=this.$img.width(),this.height=this.$img.height(),this.scale=1,this.updateImage()}},{key:"updateImage",value:function(){this.$img.width(this.width*this.scale),this.$img.height(this.height*this.scale)}},{key:"setImage",value:function(t){var e=this;this.$img.clearStyle(),this.$img.attr("src",t),this.$img.on("load",function(){return e.init()},!0)}},{key:"zoomIn",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:.1;this.scale+=t,this.updateImage()}},{key:"zoomOut",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:.1;this.scale>2*t&&(this.scale-=t,this.updateImage())}}]),t}();e.exports=s},{"./dom.js":4}],4:[function(t,e,n){var i=function(){function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:document;_classCallCheck(this,t),/^<(\w+)\s*[\w\=\-\"]*>([\w\W]*)<\/\w+>$/.test(e)?(this.el=document.createElement("div"),this.html(e),this.el=this.el.firstChild,this.els=[this.el]):"object"===(void 0===e?"undefined":_typeof(e))?e instanceof t?(this.el=e.getElement(),this.els=e.getElements()):(this.el=e,this.els=[e]):(this.els=n.querySelectorAll(e),this.el=this.els[0])}return _createClass(t,[{key:"each",value:function(t){this.els.forEach(function(e){t(e)})}},{key:"find",value:function(e){return new t(e,this.el)}},{key:"on",value:function(t,e,n){return n?this.el["on"+t]=e:this.el.addEventListener(t,e),this}},{key:"off",value:function(t,e){return this.el.removeEventListener(t,e),this}},{key:"attr",value:function(t,e){return e||0===e?(this.el.setAttribute(t,e),this):this.el.getAttribute(t,e)}},{key:"removeAttr",value:function(t,e){return this.el.removeAttribute(t,e),this}},{key:"addClass",value:function(){var t;return(t=this.el.classList).add.apply(t,arguments),this}},{key:"removeClass",value:function(){var t;return(t=this.el.classList).remove.apply(t,arguments),this}},{key:"hasClass",value:function(t){return this.el.classList.contains(t)}},{key:"width",value:function(t){if(!t)return this.el.width;this.el.style.width=t+"px"}},{key:"height",value:function(t){if(!t)return this.el.height;this.el.style.height=t+"px"}},{key:"clearStyle",value:function(){return this.el.style.cssText="",this}},{key:"getElement",value:function(){return this.el}},{key:"getElements",value:function(){return this.els}},{key:"append",value:function(e){return e instanceof t&&(e=e.getElement()),this.el.appendChild(e),this}},{key:"remove",value:function(){return this.el.remove(),this}},{key:"replace",value:function(e){return e instanceof t&&(e=e.getElement()),this.parent().getElement().replaceChild(e,this.el),this}},{key:"html",value:function(t){return t?(this.el.innerHTML=t,this):this.el.innerHTML}},{key:"text",value:function(t){return t?(this.el.innerText=t,this):this.el.innerText}},{key:"value",value:function(t){return t?(this.el.value=t,this):this.el.value}},{key:"parent",value:function(){return new t(this.el.parentNode)}},{key:"child",value:function(){return[].concat(_toConsumableArray(this.el.children)).map(function(e){return new t(e)})}},{key:"show",value:function(){return this.removeClass("hidden"),this}},{key:"hide",value:function(){return this.addClass("hidden"),this}},{key:"click",value:function(){return this.el.click(),this}}]),t}();e.exports=function(t){return new i(t)}},{}],5:[function(t,e,n){var i=t("./dom.js"),s=t("./popup.js"),o=function(){function t(){var e=this;_classCallCheck(this,t),this.$el=i('<li class="item">\n\t\t\t<span class="js-status status">\n\t\t\t\t<i class="js-show icon icon-show" title="隐藏"></i>\n\t\t\t\t<i class="js-hide icon icon-hide hidden" title="显示"></i>\n\t\t\t</span>\n\n\t\t\t<p class="js-name single-line" title="分组名">分组名</p>\n\t\t\t<input class="js-input edit-text hidden" autocomplete="off"/>\n\n\t\t\t<span class="ctrl">\n\t\t\t\t<i class="js-edit icon icon-edit" title="重命名"></i>\n\t\t\t\t<i class="js-submit icon icon-submit hidden" title="确定"></i>\n\t\t\t\t<i class="js-delete icon icon-delete" title="删除"></i>\n\t\t\t</span>\n\t\t</li>');var n=this.$el.find(".js-status"),o=this.$el.find(".js-show"),l=this.$el.find(".js-hide"),r=this.$el.find(".js-name"),a=this.$el.find(".js-input"),u=this.$el.find(".js-edit"),c=this.$el.find(".js-submit"),h=this.$el.find(".js-delete");this.$el.on("click",function(){return e.emit("click")}),n.on("click",function(t){(t.stopPropagation(),o.hasClass("hidden"))?!1!==e.emit("status",!0,e)&&(o.show(),l.hide()):!1!==e.emit("status",!0,e)&&(o.hide(),l.show())}),u.on("click",function(){u.hide(),c.show(),r.hide(),a.show().value(r.text())}),c.on("click",function(){!1!==e.emit("rename",a.value(),e)&&(u.show(),c.hide(),r.show().text(a.value()).attr("title",a.value()),a.hide())}),a.on("blur",function(){return c.click()}),h.on("click",function(){s({content:"是否确认删除分组，<br />删除后将不可恢复。",success:function(){e.emit("delete",e)}})})}return _createClass(t,[{key:"getElement",value:function(){return this.$el}},{key:"getName",value:function(){return this.name}},{key:"setName",value:function(t){return this.name=t,this.$el.find(".js-name").attr("title",t).text(t),this}},{key:"setActive",value:function(){return this.$el.addClass("active"),this}},{key:"isActive",value:function(){return this.$el.hasClass("active")}},{key:"removeActive",value:function(){return this.$el.removeClass("active"),this}},{key:"emit",value:function(t){if("function"==typeof this[t+"Handler"]){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return this[t+"Handler"].apply(this,n)}}},{key:"on",value:function(t,e){return this[t+"Handler"]=e,this}}]),t}();e.exports=o},{"./dom.js":4,"./popup.js":7}],6:[function(t,e,n){var i=t("./dom.js"),s=function(){function t(e){_classCallCheck(this,t),this.$el=i(e),this.children=[]}return _createClass(t,[{key:"initItem",value:function(t,e){var n=this;!1!==e&&t.setName("分组"+(this.length()+1)),t.on("click",function(){n.chooseActive(t)})}},{key:"checkActive",value:function(){this.children.some(function(t){return t.isActive()})||this.children[0].setActive()}},{key:"chooseActive",value:function(t){t.setActive(),this.children.forEach(function(e){e!==t&&e.removeActive()})}},{key:"append",value:function(t){this.initItem(t),this.$el.append(t.getElement()),this.children.push(t),this.checkActive()}},{key:"remove",value:function(t){this.children.length>1&&(t.getElement().remove(),this.children.splice(this.children.indexOf(this.$el),1))}},{key:"length",value:function(){return this.children.length}}]),t}();e.exports=s},{"./dom.js":4}],7:[function(t,e,n){var i=t("./dom.js"),s=i("body"),o=i('<div class="popup">\n\t<div class="box">\n\n\t\t<div class="js-title title"></div>\n\n\t\t<div class="js-content content"></div>\n\n\t\t<div class="btns">\n\t\t\t<button class="js-cancel cancel">取消</button>\n\t\t\t<button class="js-confirm confirm ml">确定</button>\n\t\t</div>\n\n\t</div>\n</div>'),l=o.find(".js-title"),r=o.find(".js-content"),a=o.find(".js-cancel"),u=o.find(".js-confirm");o.on("animationend",function(){o.hasClass("fade-out")&&(o.removeClass("fade-out"),o.remove()),o.hasClass("fade-in")&&o.removeClass("fade-in")}),e.exports=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};"string"==typeof t&&(t={content:t}),l.text(t.title||"提示"),r.html(t.content||""),a.on("click",function(){if("function"==typeof t.cancel&&"false"===t.cancel())return;o.addClass("fade-out")},!0),u.on("click",function(){if("function"==typeof t.confirm&&"false"===t.confirm())return;o.addClass("fade-out")},!0),s.append(o.addClass("fade-in"))}},{"./dom.js":4}],8:[function(t,e,n){var i=t("./dom.js"),s=function(){function t(e){_classCallCheck(this,t);var n=this;this.$el=i(e),this.init(),this.$el.on("change",function(){var t=this.files[0];if(!t)return this.value="",!1;if(!1===n.emit("choose",t))return this.value="",!1;var e=new FileReader;e.onload=function(t){n.emit("success",t.target.result,t)},e.onerror=function(t){n.emit("error",t)},e.readAsDataURL(t),this.value=""})}return _createClass(t,[{key:"init",value:function(){var t=this;this.successHandler=function(){},this.errorHandler=function(){return alert((t.options.name||"文件")+"读取错误")},this.$el.removeAttr("accept")}},{key:"open",value:function(t){return this.init(),this.options=t||{},this.options.accept&&this.$el.attr("accept",t.accept),this.$el.click(),this}},{key:"on",value:function(t,e){return this[t+"Handler"]=e,this}},{key:"emit",value:function(t){if("function"==typeof this[t+"Handler"]){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return this[t+"Handler"].apply(this,n)}}}]),t}();e.exports=s},{"./dom.js":4}]},{},[1]);
//# sourceMappingURL=customize.js.map
