{"version":3,"sources":["../node_modules/._browser-pack@6.0.4@browser-pack/_prelude.js","../src/customize/index.js","../src/customize/module/ajax.js","../src/customize/module/area.js","../src/customize/module/canvas.js","../src/customize/module/dom.js","index.js","../src/customize/module/group-item.js","../src/customize/module/group-list.js","../src/customize/module/popup.js","../src/customize/module/toast.js","../src/customize/module/uploader.js","../src/customize/module/util.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","$","toast","popup","ajax","Uploader","Canvas","GroupList","GroupItem","Area","$uploader","$groupList","$canvas","$size","$sizeWidth","$sizeHeight","$sizeInput","concat","$index","$uploadImg","$uploadOption","loadData","data","_loop","name","item","$group","areas","forEach","area","$area","addClass","css","top","y1","left","x1","width","parseFloat","x2","height","y2","append","isShow","$groups","size","loadSetting","setting","resize","flag","ready","value","removeAttr","imgHeight","imgWidth","update","loadOption","isRequire","arguments","undefined","cb","open","accept","isText","success","options","JSON","parse","image","content","confirmText","cancelText","confirm","cancel","getOptions","type","params","result","$areas","map","getImage","test","on","remove","setImage","img","$zoomIn","$zoomOut","$replaceImg","$preview","bind","zoomIn","zoomOut","method","res","resData","responseText","window","errmsg","$addGroup","$search","$current","text","removeClass","indexOf","show","hide","find","this","attr","siblings","init","$options","$optionsUpload","title","./module/ajax.js","./module/area.js","./module/canvas.js","./module/dom.js","./module/group-item.js","./module/group-list.js","./module/popup.js","./module/toast.js","./module/uploader.js","2","url","xhr","XMLHttpRequest","onreadystatechange","readyState","status","error","setRequestHeader","send","stringify","3","_$$class","_classCallCheck","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","emit","_inherits","class","util","_$$class2","selector","container","_this2","$container","$img","self","toPersent","val","w","toFloat","h","toString","$target","target","button","hasClass","$currentArea","startX","getAbs","x","startY","y","$currentGroup","document","endX","endY","abs","isError","count","_createClass","key","isGroupList","imgScale","event","pageX","scrollLeft","offset","pageY","scrollTop","isArea","src","_this3","handler","onready","./area.js","./util.js","5","DOM","_this4","contexts","Array","isArray","$temp","createElement","innerHTML","nodes","firstChild","context","_nodes","push","apply","_toConsumableArray","querySelectorAll","filter","node","callback","index","_nodes2","_nodes3","_len","_key","splice","eventName","isOnly","isOrigin","events","split","each","prototype","slice","addEventListener","removeEventListener","_this5","_len2","_key2","_typeof","setAttribute","getAttribute","join","removeAttribute","get","_len3","names","_key3","classNames","className","_len4","_key4","some","style","getComputedStyle","appendChild","parentNode","replaceChild","html","str","innerText","children","_this6","parent","offsetLeft","offsetTop","click","6","_$$class3","seletor","_this7","$nameText","$status","$nameInput","$edit","$submit","_get","_this8","set","$result","./dom.js","./popup.js","7","_$$class4","_this9","eq","_this10","isGroupItem","findByName","check","equals","./group-item.js","./toast.js","8","$body","$popup","$title","$content","$cancel","$confirm","$toast","$icon","$text","10","_$$class5","_this11","file","reader","FileReader","onload","onerror","readAsText","readAsDataURL","onsuccess","11","match","num","unit","isCanvas","object","isUploader","isDOM","./canvas.js","./group-list.js","./uploader.js"],"mappings":"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","file":"index.js","sourcesContent":["(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()","const $ = require('./module/dom.js');\nconst toast = require('./module/toast.js');\nconst popup = require('./module/popup.js');\nconst ajax = require('./module/ajax.js');\nconst Uploader = require('./module/uploader.js');\nconst Canvas = require('./module/canvas.js');\nconst GroupList = require('./module/group-list.js');\nconst GroupItem = require('./module/group-item.js');\nconst Area = require('./module/area.js');\n\n(function() {\n\n\tconst $uploader = new Uploader('#upload-file');\n\tconst $groupList = new GroupList('#group');\n\tconst $canvas = new Canvas('#canvas', '#container');\n\n\n\t/* 尺寸 */\n\tconst $size = $('#size');\n\tconst $sizeWidth = $('#sizeWidth');\n\tconst $sizeHeight = $('#sizeHeight');\n\tconst $sizeInput = $sizeWidth.concat($sizeHeight);\n\n\n\t/* 索引页 */\n\tconst $index = $('#index');\n\tconst $uploadImg = $('#upload-img');\n\tconst $uploadOption = $('#upload-option');\n\n\t// 加载数据\n\tfunction loadData(data) {\n\t\tfor (let name in data) {\n\t\t\tlet item = data[name];\n\t\t\tlet $group = new GroupItem();\n\n\t\t\t// 创建矩形区域\n\t\t\titem.areas.forEach((area) => {\n\t\t\t\tlet $area = new Area();\n\t\t\t\t$area\n\t\t\t\t\t.data(area)\n\t\t\t\t\t.addClass('hover')\n\t\t\t\t\t.css({\n\t\t\t\t\t\ttop: area.y1,\n\t\t\t\t\t\tleft: area.x1,\n\t\t\t\t\t\twidth: parseFloat(area.x2) - parseFloat(area.x1) + '%',\n\t\t\t\t\t\theight: parseFloat(area.y2) - parseFloat(area.y1) + '%'\n\t\t\t\t\t});\n\t\t\t\t$group.append($area);\n\t\t\t\t$canvas.append($area);\n\t\t\t});\n\n\t\t\t$group.name = name;\n\t\t\t$group.isShow = item.isShow;\n\n\t\t\t$groupList.append($group);\n\t\t}\n\n\t\tif ($groupList.$groups.size() === 0) {\n\t\t\t$groupList.append(new GroupItem());\n\t\t}\n\n\t}\n\n\t// 加载设置项\n\tfunction loadSetting(setting) {\n\t\tif (setting.resize) {\n\t\t\t$size.data('checked', true, true);\n\t\t\tlet flag = true;\n\t\t\t$canvas.ready(() => {\n\t\t\t\tif (flag) {\n\t\t\t\t\t$sizeWidth.value(setting.width).data('value', setting.width);\n\t\t\t\t\t$sizeHeight.value(setting.height).data('value', setting.height);\n\t\t\t\t\t$sizeInput.removeAttr('disabled');\n\t\t\t\t\t$canvas.imgHeight = setting.height;\n\t\t\t\t\t$canvas.imgWidth = setting.width;\n\t\t\t\t\tflag = false;\n\t\t\t\t} else {\n\t\t\t\t\t$sizeWidth.value($canvas.imgWidth).data('value', $canvas.imgWidth);\n\t\t\t\t\t$sizeHeight.value($canvas.imgHeight).data('value', $canvas.imgHeight);\n\t\t\t\t}\n\t\t\t\t$canvas.update();\n\t\t\t});\n\t\t}\n\t}\n\n\t// 加载配置项\n\tfunction loadOption(isRequire = false, cb) {\n\t\t$uploader.open({\n\t\t\tname: '配置文件',\n\t\t\taccept: 'text/json',\n\t\t\tisText: true\n\t\t}).success((data) => {\n\t\t\tlet options = data;\n\t\t\ttry {\n\t\t\t\toptions = JSON.parse(options);\n\t\t\t} catch (e) {\n\t\t\t\ttoast('配置文件解析出错', 'error');\n\t\t\t\tthrow new Error('配置文件解析出错');\n\t\t\t}\n\n\t\t\tif (isRequire === true && !options.image) {\n\t\t\t\tpopup({\n\t\t\t\t\tcontent: '当前配置文件缺少图片<br />是否上传图片',\n\t\t\t\t\tconfirmText: '是',\n\t\t\t\t\tcancelText: '否',\n\t\t\t\t\tconfirm() {\n\t\t\t\t\t\t$uploader.open({\n\t\t\t\t\t\t\tname: '图片',\n\t\t\t\t\t\t\taccept: 'image/*'\n\t\t\t\t\t\t}).success((data) => {\n\n\t\t\t\t\t\t\tif (typeof cb === 'function') {\n\t\t\t\t\t\t\t\tcb(data);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tloadData(options.data);\n\t\t\t\t\t\t\tloadSetting(options.setting);\n\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tcancel() {\n\t\t\t\t\t\ttoast('加载数据失败，请先上传图片', 'error');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tif (typeof cb === 'function') {\n\t\t\t\t\tcb(options.image);\n\t\t\t\t}\n\n\t\t\t\tloadData(options.data);\n\t\t\t\tloadSetting(options.setting);\n\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction getOptions($groupList, type) {\n\n\t\tlet params = {};\n\n\t\tif ($size.data('checked', undefined, true)) {\n\t\t\tparams.resize = true;\n\t\t\tparams.width = $canvas.imgWidth;\n\t\t\tparams.height = $canvas.imgHeight;\n\t\t}\n\n\t\tlet result = {};\n\t\t$groupList.$groups.forEach(($group) => {\n\t\t\tresult[$group.name] = {\n\t\t\t\tisShow: $group.isShow,\n\t\t\t\tareas: $group.$areas.map((area) => {\n\t\t\t\t\tlet $area = $(area);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tx1: $area.data('x1'),\n\t\t\t\t\t\tx2: $area.data('x2'),\n\t\t\t\t\t\ty1: $area.data('y1'),\n\t\t\t\t\t\ty2: $area.data('y2')\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t};\n\t\t});\n\n\t\tlet image = $canvas.getImage();\n\n\t\tif (!/^http(s)?:\\/\\//.test(image) && type === 'download') {\n\t\t\timage = '';\n\t\t}\n\n\t\treturn {\n\t\t\timage,\n\t\t\tdata: result,\n\t\t\tsetting: params\n\t\t};\n\t}\n\n\t$index.on('animationend', () => $index.remove());\n\n\t$uploadImg.on('click', () => {\n\t\t$uploader.open({\n\t\t\tname: '图片',\n\t\t\taccept: 'image/*'\n\t\t}).success((data) => {\n\t\t\t$canvas.setImage(data, () => {\n\t\t\t\t$index.addClass('hide');\n\t\t\t\t$groupList.append(new GroupItem());\n\t\t\t\ttoast('加载成功', 'success');\n\t\t\t});\n\t\t});\n\t});\n\n\t$uploadOption.on('click', () => loadOption(true, (img) => {\n\t\t$canvas.setImage(img, () => {\n\t\t\t$index.addClass('hide');\n\t\t\ttoast('加载成功', 'success');\n\t\t});\n\t}));\n\n\t/* 画布操作 */\n\tconst $zoomIn = $('#zoom-in');\n\tconst $zoomOut = $('#zoom-out');\n\tconst $replaceImg = $('#replace-img');\n\tconst $preview = $('#preview');\n\n\t$canvas.bind($groupList);\n\n\t$zoomIn.on('click', () => $canvas.zoomIn());\n\n\t$zoomOut.on('click', () => $canvas.zoomOut());\n\n\t$replaceImg.on('click', () => {\n\t\t$uploader.open({\n\t\t\tname: '图片',\n\t\t\taccept: 'image/*'\n\t\t}).success((data) => {\n\t\t\t$canvas.setImage(data);\n\t\t});\n\t});\n\n\t$preview.on('click', () => {\n\t\tajax('/save?type=example', {\n\t\t\tmethod: 'POST',\n\t\t\tdata: getOptions($groupList),\n\t\t\tsuccess(res) {\n\t\t\t\ttry {\n\t\t\t\t\tlet resData = JSON.parse(res.responseText);\n\t\t\t\t\tif (resData.code === 200) {\n\t\t\t\t\t\twindow.open('/example#online');\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoast(resData.errmsg, 'error');\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\ttoast('数据格式非JSON', 'error');\n\t\t\t\t\tthrow new Error('数据格式非JSON');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\n\t/* 分组操作 */\n\tconst $addGroup = $('#add-group');\n\tconst $search = $('#search');\n\tconst $current = $('#current');\n\n\t$groupList.on('current', ($group) => {\n\t\t$current.text($group.name);\n\t\t$groupList.$groups.$areas.removeClass('active');\n\t\t$group.$areas.addClass('active');\n\t}, true, false);\n\n\t$addGroup.on('click', () => {\n\t\t$groupList.append(new GroupItem());\n\t});\n\n\t$search.on('input', () => {\n\t\t$groupList.$groups.forEach(($group) => {\n\t\t\tif ($group.name.indexOf($search.value()) !== -1) {\n\t\t\t\t$group.show();\n\t\t\t} else {\n\t\t\t\t$group.hide();\n\t\t\t}\n\t\t});\n\t});\n\n\n\t/* 标签页切换 */\n\tconst $tabs = $('#tabs');\n\n\t$tabs.find('.tab-item').on('click', function() {\n\t\t$('#' + this.attr('data-type'))\n\t\t\t.show()\n\t\t\t.siblings()\n\t\t\t.hide();\n\n\t\tthis\n\t\t\t.addClass('active')\n\t\t\t.siblings()\n\t\t\t.removeClass('active');\n\t});\n\n\n\t/* 尺寸 */\n\t$size.on('change', () => {\n\t\tif ($size.data('checked', undefined, true)) {\n\t\t\t$sizeInput.removeAttr('disabled');\n\t\t} else {\n\t\t\t$canvas.init();\n\t\t\t$sizeInput.attr('disabled', 'disabled');\n\t\t}\n\t});\n\n\t$sizeWidth.on('blur', () => {\n\t\tlet value = $sizeWidth.value();\n\t\tif (/^\\d+$/.test(value)) {\n\t\t\t$sizeWidth.data('value', value);\n\t\t\t$canvas.imgWidth = parseFloat(value);\n\t\t\t$canvas.update();\n\t\t} else {\n\t\t\t$sizeWidth.value($sizeWidth.data('value'));\n\t\t}\n\t});\n\n\t$sizeHeight.on('blur', () => {\n\t\tlet value = $sizeHeight.value();\n\t\tif (/^\\d+$/.test(value)) {\n\t\t\t$sizeHeight.data('value', value);\n\t\t\t$canvas.imgHeight = parseFloat(value);\n\t\t\t$canvas.update();\n\t\t} else {\n\t\t\t$sizeHeight.value($sizeHeight.data('value'));\n\t\t}\n\t});\n\n\t$canvas.ready(() => {\n\t\t$sizeWidth.value($canvas.imgWidth).data('value', $canvas.imgWidth);\n\t\t$sizeHeight.value($canvas.imgHeight).data('value', $canvas.imgHeight);\n\t});\n\n\n\t\t/* 配置文件 */\n\tlet $options = $('#options');\n\tlet $optionsUpload = $options.find('.js-upload');\n\tlet $optionsDownload = $options.find('.js-download');\n\n\t$optionsDownload.on('click', () => {\n\n\t\tajax('/save?type=customize', {\n\t\t\tmethod: 'POST',\n\t\t\tdata: getOptions($groupList, 'download'),\n\t\t\tsuccess(res) {\n\t\t\t\ttry {\n\t\t\t\t\tlet resData = JSON.parse(res.responseText);\n\t\t\t\t\tif (resData.code === 200) {\n\t\t\t\t\t\twindow.open(resData.data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoast(resData.errmsg, 'error');\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\ttoast('数据格式非JSON', 'error');\n\t\t\t\t\tthrow new Error('数据格式非JSON');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t});\n\n\t$optionsUpload.on('click', () => {\n\t\tpopup({\n\t\t\ttitle: '警告',\n\t\t\tcontent: '加载成功后将清空当前数据<br />是否继续',\n\t\t\tconfirmText: '是',\n\t\t\tcancelText: '否',\n\t\t\tconfirm() {\n\t\t\t\tloadOption(false, () => {\n\t\t\t\t\t$groupList.$groups.remove();\n\t\t\t\t\t$groupList.$groups = new GroupItem([]);\n\t\t\t\t});\n\t\t\t},\n\t\t\tcancel() {\n\t\t\t\ttoast('取消当前操作');\n\t\t\t}\n\t\t});\n\t});\n\n})();","module.exports = (url, options) => {\n\tlet xhr = new XMLHttpRequest();\n\txhr.onreadystatechange = function() {\n\t\tif (xhr.readyState == 4) {\n\t\t\tif (xhr.status == 200) {\n\t\t\t\tif (typeof options.success === 'function') {\n\t\t\t\t\toptions.success(xhr);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (typeof options.error === 'function') {\n\t\t\t\t\toptions.error(xhr);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\txhr.open(options.method, url, true);\n\txhr.setRequestHeader('Content-type', 'application/json');\n\txhr.send(JSON.stringify(options.data || {}));\n};","const $ = require('./dom.js');\n\nclass Area extends $.class {\n\tconstructor() {\n\t\tsuper(`<div class=\"area\">\n\t\t\t<i class=\"icon icon-error\"></i>\n\t\t</div>`);\n\n\t\tthis\n\t\t\t.find('.icon')\n\t\t\t.on('click', () => {\n\t\t\t\tthis.remove();\n\t\t\t\tthis.emit('delete');\n\t\t\t});\n\t}\n}\n\nmodule.exports = Area;","const $ = require('./dom.js');\nconst util = require('./util.js');\nconst Area = require('./area.js');\n\nclass Canvas extends $.class {\n\n\tconstructor(selector, container) {\n\n\t\tsuper(selector);\n\n\t\tthis.$container = $(container);\n\t\tthis.$img = this.find('.js-pic');\n\t\tthis.$areas = this.find('.js-areas');\n\n\t\tlet self = this;\n\n\t\tfunction toPersent(val, type) {\n\t\t\tlet w = util.toFloat(self.width()); // 地图范围的宽高\n\t\t\tlet h = util.toFloat(self.height()); // 地图范围的宽高\n\t\t\tif (type === 'width') {\n\t\t\t\treturn util.toString(val / w * 100, '%');\n\t\t\t} else if (type === 'height') {\n\t\t\t\treturn util.toString(val / h * 100, '%');\n\t\t\t}\n\t\t}\n\n\t\tfunction update($area) {\n\n\t\t\tlet startX = $area.data('startX');\n\t\t\tlet endX = $area.data('endX');\n\t\t\tlet startY = $area.data('startY');\n\t\t\tlet endY = $area.data('endY');\n\n\t\t\tif (endX >= startX) {\n\t\t\t\t$area.css({\n\t\t\t\t\tleft: toPersent(startX, 'width'),\n\t\t\t\t\twidth: toPersent(endX - startX, 'width')\n\t\t\t\t});\n\n\t\t\t\t$area.data('x1', toPersent(startX, 'width'));\n\t\t\t\t$area.data('x2', toPersent(endX, 'width'));\n\t\t\t} else {\n\t\t\t\t$area.css({\n\t\t\t\t\tleft: toPersent(endX, 'width'),\n\t\t\t\t\twidth: toPersent(startX - endX, 'width')\n\t\t\t\t});\n\n\t\t\t\t$area.data('x1', toPersent(endX, 'width'));\n\t\t\t\t$area.data('x2', toPersent(startX, 'width'));\n\t\t\t}\n\n\t\t\tif (endY >= startY) {\n\t\t\t\t$area.css({\n\t\t\t\t\ttop: toPersent(startY, 'height'),\n\t\t\t\t\theight: toPersent(endY - startY, 'height')\n\t\t\t\t});\n\n\t\t\t\t$area.data('y1', toPersent(startY, 'height'));\n\t\t\t\t$area.data('y2', toPersent(endY, 'height'));\n\t\t\t} else {\n\t\t\t\t$area.css({\n\t\t\t\t\ttop: toPersent(endY, 'height'),\n\t\t\t\t\theight: toPersent(startY - endY, 'height')\n\t\t\t\t});\n\n\t\t\t\t$area.data('y1', toPersent(endY, 'height'));\n\t\t\t\t$area.data('y2', toPersent(startY, 'height'));\n\t\t\t}\n\n\t\t}\n\n\t\tthis.on('mousedown', (e) => {\n\t\t\tlet $target = $(e.target);\n\t\t\tif (e.button === 0 && !$target.hasClass('icon')) {\n\t\t\t\tlet $area = new Area();\n\n\t\t\t\tthis.$currentArea = $area;\n\n\t\t\t\tthis.$currentArea.data({\n\t\t\t\t\tstartX: this.getAbs().x,\n\t\t\t\t\tstartY: this.getAbs().y\n\t\t\t\t});\n\n\t\t\t\tthis.$areas.append($area);\n\n\t\t\t\tthis.$groupList.$groups.$areas.removeClass('hover');\n\n\t\t\t\tthis.$groupList.$currentGroup.append($area);\n\t\t\t}\n\n\t\t});\n\n\t\t$(document).on('mousemove', () => {\n\n\t\t\tif (!this.$currentArea) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet abs = this.getAbs();\n\n\t\t\tif (abs.x < 0) {\n\t\t\t\tabs.x = 0;\n\t\t\t} else if (abs.x > util.toFloat(this.width())) {\n\t\t\t\tabs.x = util.toFloat(this.width());\n\t\t\t}\n\n\t\t\tif (abs.y < 0) {\n\t\t\t\tabs.y = 0;\n\t\t\t} else if (abs.y > util.toFloat(this.height())) {\n\t\t\t\tabs.y = util.toFloat(this.height());\n\t\t\t}\n\n\t\t\tthis.$currentArea.data({\n\t\t\t\tendX: abs.x,\n\t\t\t\tendY: abs.y\n\t\t\t});\n\n\t\t\tupdate(this.$currentArea);\n\t\t});\n\n\t\t$(document).on('mouseup', () => {\n\n\t\t\tif (!this.$currentArea) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$groupList.$groups.$areas.addClass('hover');\n\n\t\t\tlet x1 = util.toFloat(this.$currentArea.data('x1'));\n\t\t\tlet x2 = util.toFloat(this.$currentArea.data('x2'));\n\t\t\tlet y1 = util.toFloat(this.$currentArea.data('y1'));\n\t\t\tlet y2 = util.toFloat(this.$currentArea.data('y2'));\n\n\t\t\tfunction isError(count) {\n\t\t\t\treturn count === undefined || count > 100 || count < 0;\n\t\t\t}\n\n\t\t\tif (isError(x1) || isError(x2) || isError(y1) || isError(y2)) {\n\t\t\t\tthis.$currentArea.remove().emit('delete'); // 移除非法数据\n\t\t\t}\n\n\t\t\tthis.$currentArea.addClass('active');\n\n\t\t\tthis.$currentArea = null;\n\t\t});\n\t}\n\n\tbind($groupList) {\n\t\tif (util.isGroupList($groupList)) {\n\t\t\tthis.$groupList = $groupList;\n\t\t}\n\t\treturn this;\n\t}\n\n\tinit() {\n\t\tthis.$img.css('width', '');\n\t\tthis.$img.css('height', '');\n\t\tthis.imgScale = 1;\n\t\tthis.imgWidth = util.toFloat(this.$img.width());\n\t\tthis.imgHeight = util.toFloat(this.$img.height());\n\t\tthis.update();\n\t\tthis.emit('ready');\n\t\treturn this;\n\t}\n\n\tgetAbs(e = window.event) {\n\t\treturn {\n\t\t\tx: e.pageX + this.$container.scrollLeft() - this.offset().left,\n\t\t\ty: e.pageY + this.$container.scrollTop() - this.offset().top\n\t\t};\n\t}\n\n\tupdate() {\n\t\tthis.$img.width(util.toString(this.imgWidth * this.imgScale, 'px'));\n\t\tthis.$img.height(util.toString(this.imgHeight * this.imgScale, 'px'));\n\t\treturn this;\n\t}\n\n\tappend($area) {\n\t\tif (!util.isArea($area)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tthis\n\t\t\t.find('.js-areas')\n\t\t\t.append($area);\n\t}\n\n\tsetImage(src, cb) {\n\t\tthis.$img.attr('src', src);\n\t\tthis.$img.on('load', () => {\n\t\t\tthis.init();\n\t\t\tif (typeof cb === 'function') {\n\t\t\t\tcb();\n\t\t\t}\n\t\t}, true);\n\t\treturn this;\n\t}\n\n\tgetImage() {\n\t\treturn this.$img.attr('src');\n\t}\n\n\tzoomIn(count = 0.1) {\n\t\tthis.imgScale += count;\n\t\tthis.update();\n\t\treturn this;\n\t}\n\n\tzoomOut(count = 0.1) {\n\t\tif (this.imgScale > count * 2) {\n\t\t\tthis.imgScale -= count;\n\t\t\tthis.update();\n\t\t}\n\t\treturn this;\n\t}\n\n\tready(handler) {\n\t\tthis.onready = handler;\n\t\treturn this;\n\t}\n\n}\n\nmodule.exports = Canvas;","let $;\n\nclass DOM {\n\n\tconstructor(selector, contexts = document) {\n\n\t\tif (!Array.isArray(contexts)) {\n\t\t\tthis.contexts = [contexts];\n\t\t} else {\n\t\t\tthis.contexts = contexts;\n\t\t}\n\n\t\tif (typeof selector === 'string') {\n\t\t\tif (/^<[\\s\\S]+>$/.test(selector)) {\n\t\t\t\tlet $temp = document.createElement('div');\n\t\t\t\t$temp.innerHTML = selector;\n\t\t\t\tthis.nodes = [$temp.firstChild];\n\t\t\t} else {\n\t\t\t\tthis.nodes = [];\n\n\t\t\t\tthis.contexts.forEach((context) => {\n\t\t\t\t\tthis.nodes.push(...context.querySelectorAll(selector));\n\t\t\t\t});\n\n\t\t\t}\n\t\t} else if (selector instanceof DOM) {\n\t\t\tthis.contexts = selector.contexts;\n\t\t\tthis.nodes = selector.nodes;\n\t\t} else if (Array.isArray(selector)) {\n\t\t\tthis.nodes = selector.filter((node) => {\n\t\t\t\treturn !!node;\n\t\t\t});\n\t\t} else if (selector) {\n\t\t\tthis.nodes = [selector];\n\t\t} else {\n\t\t\tthis.nodes = [];\n\t\t}\n\n\t}\n\n\teach(callback) {\n\t\tthis.nodes.forEach(callback);\n\t\treturn this;\n\t}\n\n\tmap(callback) {\n\t\treturn this.nodes.map(callback);\n\t}\n\n\tfilter(callback) {\n\t\treturn $(this.nodes.filter(callback));\n\t}\n\n\tget(index) {\n\t\treturn this.nodes[index];\n\t}\n\n\teq(index) {\n\t\treturn $(this.nodes[index]);\n\t}\n\n\tfind(selector) {\n\t\treturn $(selector, this.nodes);\n\t}\n\n\tsize() {\n\t\treturn this.nodes.length;\n\t}\n\n\tequals(selector) {\n\t\treturn this.nodes[0] === $(selector).nodes[0];\n\t}\n\n\tconcat(selector) {\n\t\treturn $([...$(selector).nodes, ...this.nodes]);\n\t}\n\n\tpush(selector) {\n\t\treturn this.nodes.push(...$(selector).nodes);\n\t}\n\n\tsplice(index, count = 1, ...selector) {\n\t\tthis.nodes.splice(index, count, ...$(selector).nodes);\n\t\treturn this;\n\t}\n\n\tindex(selector) {\n\t\treturn this.nodes.indexOf($(selector).nodes[0]);\n\t}\n\n\ton(eventName, handler, isOnly = false, isOrigin = true) {\n\t\tlet events = eventName.split(' ');\n\t\tif (isOnly) {\n\t\t\tthis.each((node) => {\n\t\t\t\tevents.forEach((event) => {\n\t\t\t\t\tif (isOrigin) {\n\t\t\t\t\t\tnode['on' + event] = function() {\n\t\t\t\t\t\t\treturn handler.call($(node), ...arguments);\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode['_on' + event] = function() {\n\t\t\t\t\t\t\treturn handler.call($(node), ...arguments);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tthis.each((node) => {\n\t\t\t\tevents.forEach((event) => {\n\t\t\t\t\tnode.addEventListener(event, function() {\n\t\t\t\t\t\thandler.call($(node), ...arguments);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn this;\n\t}\n\n\toff(eventName, handler) {\n\t\tthis.each((node) => {\n\t\t\tnode.removeEventListener(eventName, handler);\n\t\t\tnode['on' + eventName] = null;\n\t\t\tnode['_on' + eventName] = null;\n\t\t});\n\t\treturn this;\n\t}\n\n\temit(event, ...params) {\n\t\tlet result = [];\n\t\tthis.each((node) => {\n\t\t\tif (typeof this['on' + event] === 'function') {\n\t\t\t\tresult.push(this['on' + event](...params));\n\t\t\t} else if (typeof node['on' + event] === 'function') {\n\t\t\t\tresult.push(node['on' + event](...params));\n\t\t\t} else if (typeof node['_on' + event] === 'function') {\n\t\t\t\tresult.push(node['_on' + event](...params));\n\t\t\t}\n\t\t});\n\t\treturn result.length > 1 ? result : result[0];\n\t}\n\n\tattr(key, value) {\n\t\tif (typeof key === 'object') {\n\t\t\tthis.each((node) => {\n\t\t\t\tfor (let name in key) {\n\t\t\t\t\tnode.setAttribute(name, key[name]);\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (value !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.setAttribute(key, value);\n\t\t\t});\n\t\t} else {\n\t\t\treturn this.nodes.map((node) => {\n\t\t\t\treturn node.getAttribute(key);\n\t\t\t}).join('');\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tremoveAttr(key) {\n\t\tthis.each((node) => {\n\t\t\tnode.removeAttribute(key);\n\t\t});\n\t\treturn this;\n\t}\n\n\tdata(key, value, isOrigin = false) {\n\t\tif (typeof key === 'object') {\n\t\t\tthis.each((node) => {\n\t\t\t\tfor (let name in key) {\n\t\t\t\t\tif (isOrigin) {\n\t\t\t\t\t\tnode[name] = key[name];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode['_' + name] = key[name];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (value !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tif (isOrigin) {\n\t\t\t\t\tnode[key] = value;\n\t\t\t\t} else {\n\t\t\t\t\tnode['_' + key] = value;\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tif (isOrigin) {\n\t\t\t\treturn this.get(0)[key];\n\t\t\t} else {\n\t\t\t\treturn this.get(0)['_' + key];\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\taddClass(...names) {\n\t\tthis.each((node) => {\n\t\t\tlet classNames = node.className.split(' ');\n\n\t\t\tnames.forEach((name) => {\n\t\t\t\tif (classNames.indexOf(name) === -1) {\n\t\t\t\t\tclassNames.push(name);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tnode.className = classNames.join(' ');\n\t\t});\n\t\treturn this;\n\t}\n\n\tremoveClass(...names) {\n\t\tthis.each((node) => {\n\t\t\tlet classNames = node.className.split(' ');\n\n\t\t\tnames.forEach((name) => {\n\t\t\t\tlet index = classNames.indexOf(name);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tclassNames.splice(index, 1);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tnode.className = classNames.join(' ');\n\t\t});\n\t\treturn this;\n\t}\n\n\thasClass(name) {\n\t\treturn this.nodes.some((node) => {\n\t\t\treturn node.className.indexOf(name) !== -1;\n\t\t});\n\t}\n\n\tcss(key, val) {\n\t\tif (typeof key === 'object') {\n\t\t\tthis.each((node) => {\n\t\t\t\tfor (let name in key) {\n\t\t\t\t\tnode.style[name] = key[name];\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (val !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.style[key] = val;\n\t\t\t});\n\t\t} else if ('getComputedStyle' in window) {\n\t\t\treturn window.getComputedStyle(this.get(0))[key];\n\t\t} else {\n\t\t\treturn this.get(0).style[key];\n\t\t}\n\t}\n\n\twidth(val) {\n\t\treturn this.css('width', val);\n\t}\n\n\theight(val) {\n\t\treturn this.css('height', val);\n\t}\n\n\tappend(selector) {\n\t\tthis.each((node) => {\n\t\t\t$(selector).each((n) => {\n\t\t\t\tnode.appendChild(n);\n\t\t\t});\n\t\t});\n\t\treturn this;\n\t}\n\n\tremove() {\n\t\tthis.each((node) => {\n\t\t\tnode.remove();\n\t\t});\n\t\treturn this;\n\t}\n\n\treplace(selector) {\n\t\tthis.each((node) => {\n\t\t\tnode.parentNode.replaceChild($(selector).get(0), node);\n\t\t});\n\t\treturn this;\n\t}\n\n\thtml(html) {\n\t\tif (html !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.innerHTML = html;\n\t\t\t});\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.get(0).innerHTML;\n\t\t}\n\t}\n\n\ttext(str) {\n\t\tif (str !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.innerText = str;\n\t\t\t});\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.get(0).innerText;\n\t\t}\n\t}\n\n\tvalue(val) {\n\t\tif (val !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.value = val;\n\t\t\t});\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.get(0).value;\n\t\t}\n\t}\n\n\tparent() {\n\t\treturn $(this.nodes.map((node) => {\n\t\t\treturn node.parentNode;\n\t\t}));\n\t}\n\n\tchildren() {\n\t\tlet result = [];\n\t\tthis.each((node) => {\n\t\t\tresult.push(...node.children);\n\t\t});\n\t\treturn $(result);\n\t}\n\n\tsiblings() {\n\t\treturn this.parent().children().filter((node) => {\n\t\t\treturn this.nodes.indexOf(node) === -1;\n\t\t});\n\t}\n\n\tshow() {\n\t\tthis.css('display', '');\n\t\treturn this;\n\t}\n\n\thide() {\n\t\tthis.css('display', 'none');\n\t\treturn this;\n\t}\n\n\toffset() {\n\t\treturn {\n\t\t\tleft: this.get(0).offsetLeft,\n\t\t\ttop: this.get(0).offsetTop\n\t\t};\n\t}\n\n\tscrollLeft() {\n\t\treturn this.get(0).scrollLeft;\n\t}\n\n\tscrollTop() {\n\t\treturn this.get(0).scrollTop;\n\t}\n\n\tclick() {\n\t\tthis.each((node) => {\n\t\t\tnode.click();\n\t\t});\n\t\treturn this;\n\t}\n\n}\n\n$ = (selector, contexts) => {\n\tif (selector instanceof DOM) {\n\t\treturn selector;\n\t} else {\n\t\treturn new DOM(selector, contexts);\n\t}\n};\n\n$.class = DOM;\n\nmodule.exports = $;","(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()({1:[function(require,module,exports){\nconst $ = require('./module/dom.js');\nconst toast = require('./module/toast.js');\nconst popup = require('./module/popup.js');\nconst ajax = require('./module/ajax.js');\nconst Uploader = require('./module/uploader.js');\nconst Canvas = require('./module/canvas.js');\nconst GroupList = require('./module/group-list.js');\nconst GroupItem = require('./module/group-item.js');\nconst Area = require('./module/area.js');\n\n(function() {\n\n\tconst $uploader = new Uploader('#upload-file');\n\tconst $groupList = new GroupList('#group');\n\tconst $canvas = new Canvas('#canvas', '#container');\n\n\n\t/* 尺寸 */\n\tconst $size = $('#size');\n\tconst $sizeWidth = $('#sizeWidth');\n\tconst $sizeHeight = $('#sizeHeight');\n\tconst $sizeInput = $sizeWidth.concat($sizeHeight);\n\n\n\t/* 索引页 */\n\tconst $index = $('#index');\n\tconst $uploadImg = $('#upload-img');\n\tconst $uploadOption = $('#upload-option');\n\n\t// 加载数据\n\tfunction loadData(data) {\n\t\tfor (let name in data) {\n\t\t\tlet item = data[name];\n\t\t\tlet $group = new GroupItem();\n\n\t\t\t// 创建矩形区域\n\t\t\titem.areas.forEach((area) => {\n\t\t\t\tlet $area = new Area();\n\t\t\t\t$area\n\t\t\t\t\t.data(area)\n\t\t\t\t\t.addClass('hover')\n\t\t\t\t\t.css({\n\t\t\t\t\t\ttop: area.y1,\n\t\t\t\t\t\tleft: area.x1,\n\t\t\t\t\t\twidth: parseFloat(area.x2) - parseFloat(area.x1) + '%',\n\t\t\t\t\t\theight: parseFloat(area.y2) - parseFloat(area.y1) + '%'\n\t\t\t\t\t});\n\t\t\t\t$group.append($area);\n\t\t\t\t$canvas.append($area);\n\t\t\t});\n\n\t\t\t$group.name = name;\n\t\t\t$group.isShow = item.isShow;\n\n\t\t\t$groupList.append($group);\n\t\t}\n\n\t\tif ($groupList.$groups.size() === 0) {\n\t\t\t$groupList.append(new GroupItem());\n\t\t}\n\n\t}\n\n\t// 加载设置项\n\tfunction loadSetting(setting) {\n\t\tif (setting.resize) {\n\t\t\t$size.data('checked', true, true);\n\t\t\tlet flag = true;\n\t\t\t$canvas.ready(() => {\n\t\t\t\tif (flag) {\n\t\t\t\t\t$sizeWidth.value(setting.width).data('value', setting.width);\n\t\t\t\t\t$sizeHeight.value(setting.height).data('value', setting.height);\n\t\t\t\t\t$sizeInput.removeAttr('disabled');\n\t\t\t\t\t$canvas.imgHeight = setting.height;\n\t\t\t\t\t$canvas.imgWidth = setting.width;\n\t\t\t\t\tflag = false;\n\t\t\t\t} else {\n\t\t\t\t\t$sizeWidth.value($canvas.imgWidth).data('value', $canvas.imgWidth);\n\t\t\t\t\t$sizeHeight.value($canvas.imgHeight).data('value', $canvas.imgHeight);\n\t\t\t\t}\n\t\t\t\t$canvas.update();\n\t\t\t});\n\t\t}\n\t}\n\n\t// 加载配置项\n\tfunction loadOption(isRequire = false, cb) {\n\t\t$uploader.open({\n\t\t\tname: '配置文件',\n\t\t\taccept: 'text/json',\n\t\t\tisText: true\n\t\t}).success((data) => {\n\t\t\tlet options = data;\n\t\t\ttry {\n\t\t\t\toptions = JSON.parse(options);\n\t\t\t} catch (e) {\n\t\t\t\ttoast('配置文件解析出错', 'error');\n\t\t\t\tthrow new Error('配置文件解析出错');\n\t\t\t}\n\n\t\t\tif (isRequire === true && !options.image) {\n\t\t\t\tpopup({\n\t\t\t\t\tcontent: '当前配置文件缺少图片<br />是否上传图片',\n\t\t\t\t\tconfirmText: '是',\n\t\t\t\t\tcancelText: '否',\n\t\t\t\t\tconfirm() {\n\t\t\t\t\t\t$uploader.open({\n\t\t\t\t\t\t\tname: '图片',\n\t\t\t\t\t\t\taccept: 'image/*'\n\t\t\t\t\t\t}).success((data) => {\n\n\t\t\t\t\t\t\tif (typeof cb === 'function') {\n\t\t\t\t\t\t\t\tcb(data);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tloadData(options.data);\n\t\t\t\t\t\t\tloadSetting(options.setting);\n\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tcancel() {\n\t\t\t\t\t\ttoast('加载数据失败，请先上传图片', 'error');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tif (typeof cb === 'function') {\n\t\t\t\t\tcb(options.image);\n\t\t\t\t}\n\n\t\t\t\tloadData(options.data);\n\t\t\t\tloadSetting(options.setting);\n\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction getOptions($groupList, type) {\n\n\t\tlet params = {};\n\n\t\tif ($size.data('checked', undefined, true)) {\n\t\t\tparams.resize = true;\n\t\t\tparams.width = $canvas.imgWidth;\n\t\t\tparams.height = $canvas.imgHeight;\n\t\t}\n\n\t\tlet result = {};\n\t\t$groupList.$groups.forEach(($group) => {\n\t\t\tresult[$group.name] = {\n\t\t\t\tisShow: $group.isShow,\n\t\t\t\tareas: $group.$areas.map((area) => {\n\t\t\t\t\tlet $area = $(area);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tx1: $area.data('x1'),\n\t\t\t\t\t\tx2: $area.data('x2'),\n\t\t\t\t\t\ty1: $area.data('y1'),\n\t\t\t\t\t\ty2: $area.data('y2')\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t};\n\t\t});\n\n\t\tlet image = $canvas.getImage();\n\n\t\tif (!/^http(s)?:\\/\\//.test(image) && type === 'download') {\n\t\t\timage = '';\n\t\t}\n\n\t\treturn {\n\t\t\timage,\n\t\t\tdata: result,\n\t\t\tsetting: params\n\t\t};\n\t}\n\n\t$index.on('animationend', () => $index.remove());\n\n\t$uploadImg.on('click', () => {\n\t\t$uploader.open({\n\t\t\tname: '图片',\n\t\t\taccept: 'image/*'\n\t\t}).success((data) => {\n\t\t\t$canvas.setImage(data, () => {\n\t\t\t\t$index.addClass('hide');\n\t\t\t\t$groupList.append(new GroupItem());\n\t\t\t\ttoast('加载成功', 'success');\n\t\t\t});\n\t\t});\n\t});\n\n\t$uploadOption.on('click', () => loadOption(true, (img) => {\n\t\t$canvas.setImage(img, () => {\n\t\t\t$index.addClass('hide');\n\t\t\ttoast('加载成功', 'success');\n\t\t});\n\t}));\n\n\t/* 画布操作 */\n\tconst $zoomIn = $('#zoom-in');\n\tconst $zoomOut = $('#zoom-out');\n\tconst $replaceImg = $('#replace-img');\n\tconst $preview = $('#preview');\n\n\t$canvas.bind($groupList);\n\n\t$zoomIn.on('click', () => $canvas.zoomIn());\n\n\t$zoomOut.on('click', () => $canvas.zoomOut());\n\n\t$replaceImg.on('click', () => {\n\t\t$uploader.open({\n\t\t\tname: '图片',\n\t\t\taccept: 'image/*'\n\t\t}).success((data) => {\n\t\t\t$canvas.setImage(data);\n\t\t});\n\t});\n\n\t$preview.on('click', () => {\n\t\tajax('/save?type=example', {\n\t\t\tmethod: 'POST',\n\t\t\tdata: getOptions($groupList),\n\t\t\tsuccess(res) {\n\t\t\t\ttry {\n\t\t\t\t\tlet resData = JSON.parse(res.responseText);\n\t\t\t\t\tif (resData.code === 200) {\n\t\t\t\t\t\twindow.open('/example#online');\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoast(resData.errmsg, 'error');\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\ttoast('数据格式非JSON', 'error');\n\t\t\t\t\tthrow new Error('数据格式非JSON');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\n\t/* 分组操作 */\n\tconst $addGroup = $('#add-group');\n\tconst $search = $('#search');\n\tconst $current = $('#current');\n\n\t$groupList.on('current', ($group) => {\n\t\t$current.text($group.name);\n\t\t$groupList.$groups.$areas.removeClass('active');\n\t\t$group.$areas.addClass('active');\n\t}, true, false);\n\n\t$addGroup.on('click', () => {\n\t\t$groupList.append(new GroupItem());\n\t});\n\n\t$search.on('input', () => {\n\t\t$groupList.$groups.forEach(($group) => {\n\t\t\tif ($group.name.indexOf($search.value()) !== -1) {\n\t\t\t\t$group.show();\n\t\t\t} else {\n\t\t\t\t$group.hide();\n\t\t\t}\n\t\t});\n\t});\n\n\n\t/* 标签页切换 */\n\tconst $tabs = $('#tabs');\n\n\t$tabs.find('.tab-item').on('click', function() {\n\t\t$('#' + this.attr('data-type'))\n\t\t\t.show()\n\t\t\t.siblings()\n\t\t\t.hide();\n\n\t\tthis\n\t\t\t.addClass('active')\n\t\t\t.siblings()\n\t\t\t.removeClass('active');\n\t});\n\n\n\t/* 尺寸 */\n\t$size.on('change', () => {\n\t\tif ($size.data('checked', undefined, true)) {\n\t\t\t$sizeInput.removeAttr('disabled');\n\t\t} else {\n\t\t\t$canvas.init();\n\t\t\t$sizeInput.attr('disabled', 'disabled');\n\t\t}\n\t});\n\n\t$sizeWidth.on('blur', () => {\n\t\tlet value = $sizeWidth.value();\n\t\tif (/^\\d+$/.test(value)) {\n\t\t\t$sizeWidth.data('value', value);\n\t\t\t$canvas.imgWidth = parseFloat(value);\n\t\t\t$canvas.update();\n\t\t} else {\n\t\t\t$sizeWidth.value($sizeWidth.data('value'));\n\t\t}\n\t});\n\n\t$sizeHeight.on('blur', () => {\n\t\tlet value = $sizeHeight.value();\n\t\tif (/^\\d+$/.test(value)) {\n\t\t\t$sizeHeight.data('value', value);\n\t\t\t$canvas.imgHeight = parseFloat(value);\n\t\t\t$canvas.update();\n\t\t} else {\n\t\t\t$sizeHeight.value($sizeHeight.data('value'));\n\t\t}\n\t});\n\n\t$canvas.ready(() => {\n\t\t$sizeWidth.value($canvas.imgWidth).data('value', $canvas.imgWidth);\n\t\t$sizeHeight.value($canvas.imgHeight).data('value', $canvas.imgHeight);\n\t});\n\n\n\t\t/* 配置文件 */\n\tlet $options = $('#options');\n\tlet $optionsUpload = $options.find('.js-upload');\n\tlet $optionsDownload = $options.find('.js-download');\n\n\t$optionsDownload.on('click', () => {\n\n\t\tajax('/save?type=customize', {\n\t\t\tmethod: 'POST',\n\t\t\tdata: getOptions($groupList, 'download'),\n\t\t\tsuccess(res) {\n\t\t\t\ttry {\n\t\t\t\t\tlet resData = JSON.parse(res.responseText);\n\t\t\t\t\tif (resData.code === 200) {\n\t\t\t\t\t\twindow.open(resData.data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoast(resData.errmsg, 'error');\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\ttoast('数据格式非JSON', 'error');\n\t\t\t\t\tthrow new Error('数据格式非JSON');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t});\n\n\t$optionsUpload.on('click', () => {\n\t\tpopup({\n\t\t\ttitle: '警告',\n\t\t\tcontent: '加载成功后将清空当前数据<br />是否继续',\n\t\t\tconfirmText: '是',\n\t\t\tcancelText: '否',\n\t\t\tconfirm() {\n\t\t\t\tloadOption(false, () => {\n\t\t\t\t\t$groupList.$groups.remove();\n\t\t\t\t\t$groupList.$groups = new GroupItem([]);\n\t\t\t\t});\n\t\t\t},\n\t\t\tcancel() {\n\t\t\t\ttoast('取消当前操作');\n\t\t\t}\n\t\t});\n\t});\n\n})();\n},{\"./module/ajax.js\":2,\"./module/area.js\":3,\"./module/canvas.js\":4,\"./module/dom.js\":5,\"./module/group-item.js\":6,\"./module/group-list.js\":7,\"./module/popup.js\":8,\"./module/toast.js\":9,\"./module/uploader.js\":10}],2:[function(require,module,exports){\nmodule.exports = (url, options) => {\n\tlet xhr = new XMLHttpRequest();\n\txhr.onreadystatechange = function() {\n\t\tif (xhr.readyState == 4) {\n\t\t\tif (xhr.status == 200) {\n\t\t\t\tif (typeof options.success === 'function') {\n\t\t\t\t\toptions.success(xhr);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (typeof options.error === 'function') {\n\t\t\t\t\toptions.error(xhr);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\txhr.open(options.method, url, true);\n\txhr.setRequestHeader('Content-type', 'application/json');\n\txhr.send(JSON.stringify(options.data || {}));\n};\n},{}],3:[function(require,module,exports){\nconst $ = require('./dom.js');\n\nclass Area extends $.class {\n\tconstructor() {\n\t\tsuper(`<div class=\"area\">\n\t\t\t<i class=\"icon icon-error\"></i>\n\t\t</div>`);\n\n\t\tthis\n\t\t\t.find('.icon')\n\t\t\t.on('click', () => {\n\t\t\t\tthis.remove();\n\t\t\t\tthis.emit('delete');\n\t\t\t});\n\t}\n}\n\nmodule.exports = Area;\n},{\"./dom.js\":5}],4:[function(require,module,exports){\nconst $ = require('./dom.js');\nconst util = require('./util.js');\nconst Area = require('./area.js');\n\nclass Canvas extends $.class {\n\n\tconstructor(selector, container) {\n\n\t\tsuper(selector);\n\n\t\tthis.$container = $(container);\n\t\tthis.$img = this.find('.js-pic');\n\t\tthis.$areas = this.find('.js-areas');\n\n\t\tlet self = this;\n\n\t\tfunction toPersent(val, type) {\n\t\t\tlet w = util.toFloat(self.width()); // 地图范围的宽高\n\t\t\tlet h = util.toFloat(self.height()); // 地图范围的宽高\n\t\t\tif (type === 'width') {\n\t\t\t\treturn util.toString(val / w * 100, '%');\n\t\t\t} else if (type === 'height') {\n\t\t\t\treturn util.toString(val / h * 100, '%');\n\t\t\t}\n\t\t}\n\n\t\tfunction update($area) {\n\n\t\t\tlet startX = $area.data('startX');\n\t\t\tlet endX = $area.data('endX');\n\t\t\tlet startY = $area.data('startY');\n\t\t\tlet endY = $area.data('endY');\n\n\t\t\tif (endX >= startX) {\n\t\t\t\t$area.css({\n\t\t\t\t\tleft: toPersent(startX, 'width'),\n\t\t\t\t\twidth: toPersent(endX - startX, 'width')\n\t\t\t\t});\n\n\t\t\t\t$area.data('x1', toPersent(startX, 'width'));\n\t\t\t\t$area.data('x2', toPersent(endX, 'width'));\n\t\t\t} else {\n\t\t\t\t$area.css({\n\t\t\t\t\tleft: toPersent(endX, 'width'),\n\t\t\t\t\twidth: toPersent(startX - endX, 'width')\n\t\t\t\t});\n\n\t\t\t\t$area.data('x1', toPersent(endX, 'width'));\n\t\t\t\t$area.data('x2', toPersent(startX, 'width'));\n\t\t\t}\n\n\t\t\tif (endY >= startY) {\n\t\t\t\t$area.css({\n\t\t\t\t\ttop: toPersent(startY, 'height'),\n\t\t\t\t\theight: toPersent(endY - startY, 'height')\n\t\t\t\t});\n\n\t\t\t\t$area.data('y1', toPersent(startY, 'height'));\n\t\t\t\t$area.data('y2', toPersent(endY, 'height'));\n\t\t\t} else {\n\t\t\t\t$area.css({\n\t\t\t\t\ttop: toPersent(endY, 'height'),\n\t\t\t\t\theight: toPersent(startY - endY, 'height')\n\t\t\t\t});\n\n\t\t\t\t$area.data('y1', toPersent(endY, 'height'));\n\t\t\t\t$area.data('y2', toPersent(startY, 'height'));\n\t\t\t}\n\n\t\t}\n\n\t\tthis.on('mousedown', (e) => {\n\t\t\tlet $target = $(e.target);\n\t\t\tif (e.button === 0 && !$target.hasClass('icon')) {\n\t\t\t\tlet $area = new Area();\n\n\t\t\t\tthis.$currentArea = $area;\n\n\t\t\t\tthis.$currentArea.data({\n\t\t\t\t\tstartX: this.getAbs().x,\n\t\t\t\t\tstartY: this.getAbs().y\n\t\t\t\t});\n\n\t\t\t\tthis.$areas.append($area);\n\n\t\t\t\tthis.$groupList.$groups.$areas.removeClass('hover');\n\n\t\t\t\tthis.$groupList.$currentGroup.append($area);\n\t\t\t}\n\n\t\t});\n\n\t\t$(document).on('mousemove', () => {\n\n\t\t\tif (!this.$currentArea) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet abs = this.getAbs();\n\n\t\t\tif (abs.x < 0) {\n\t\t\t\tabs.x = 0;\n\t\t\t} else if (abs.x > util.toFloat(this.width())) {\n\t\t\t\tabs.x = util.toFloat(this.width());\n\t\t\t}\n\n\t\t\tif (abs.y < 0) {\n\t\t\t\tabs.y = 0;\n\t\t\t} else if (abs.y > util.toFloat(this.height())) {\n\t\t\t\tabs.y = util.toFloat(this.height());\n\t\t\t}\n\n\t\t\tthis.$currentArea.data({\n\t\t\t\tendX: abs.x,\n\t\t\t\tendY: abs.y\n\t\t\t});\n\n\t\t\tupdate(this.$currentArea);\n\t\t});\n\n\t\t$(document).on('mouseup', () => {\n\n\t\t\tif (!this.$currentArea) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$groupList.$groups.$areas.addClass('hover');\n\n\t\t\tlet x1 = util.toFloat(this.$currentArea.data('x1'));\n\t\t\tlet x2 = util.toFloat(this.$currentArea.data('x2'));\n\t\t\tlet y1 = util.toFloat(this.$currentArea.data('y1'));\n\t\t\tlet y2 = util.toFloat(this.$currentArea.data('y2'));\n\n\t\t\tfunction isError(count) {\n\t\t\t\treturn count === undefined || count > 100 || count < 0;\n\t\t\t}\n\n\t\t\tif (isError(x1) || isError(x2) || isError(y1) || isError(y2)) {\n\t\t\t\tthis.$currentArea.remove().emit('delete'); // 移除非法数据\n\t\t\t}\n\n\t\t\tthis.$currentArea.addClass('active');\n\n\t\t\tthis.$currentArea = null;\n\t\t});\n\t}\n\n\tbind($groupList) {\n\t\tif (util.isGroupList($groupList)) {\n\t\t\tthis.$groupList = $groupList;\n\t\t}\n\t\treturn this;\n\t}\n\n\tinit() {\n\t\tthis.$img.css('width', '');\n\t\tthis.$img.css('height', '');\n\t\tthis.imgScale = 1;\n\t\tthis.imgWidth = util.toFloat(this.$img.width());\n\t\tthis.imgHeight = util.toFloat(this.$img.height());\n\t\tthis.update();\n\t\tthis.emit('ready');\n\t\treturn this;\n\t}\n\n\tgetAbs(e = window.event) {\n\t\treturn {\n\t\t\tx: e.pageX + this.$container.scrollLeft() - this.offset().left,\n\t\t\ty: e.pageY + this.$container.scrollTop() - this.offset().top\n\t\t};\n\t}\n\n\tupdate() {\n\t\tthis.$img.width(util.toString(this.imgWidth * this.imgScale, 'px'));\n\t\tthis.$img.height(util.toString(this.imgHeight * this.imgScale, 'px'));\n\t\treturn this;\n\t}\n\n\tappend($area) {\n\t\tif (!util.isArea($area)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tthis\n\t\t\t.find('.js-areas')\n\t\t\t.append($area);\n\t}\n\n\tsetImage(src, cb) {\n\t\tthis.$img.attr('src', src);\n\t\tthis.$img.on('load', () => {\n\t\t\tthis.init();\n\t\t\tif (typeof cb === 'function') {\n\t\t\t\tcb();\n\t\t\t}\n\t\t}, true);\n\t\treturn this;\n\t}\n\n\tgetImage() {\n\t\treturn this.$img.attr('src');\n\t}\n\n\tzoomIn(count = 0.1) {\n\t\tthis.imgScale += count;\n\t\tthis.update();\n\t\treturn this;\n\t}\n\n\tzoomOut(count = 0.1) {\n\t\tif (this.imgScale > count * 2) {\n\t\t\tthis.imgScale -= count;\n\t\t\tthis.update();\n\t\t}\n\t\treturn this;\n\t}\n\n\tready(handler) {\n\t\tthis.onready = handler;\n\t\treturn this;\n\t}\n\n}\n\nmodule.exports = Canvas;\n},{\"./area.js\":3,\"./dom.js\":5,\"./util.js\":11}],5:[function(require,module,exports){\nlet $;\n\nclass DOM {\n\n\tconstructor(selector, contexts = document) {\n\n\t\tif (!Array.isArray(contexts)) {\n\t\t\tthis.contexts = [contexts];\n\t\t} else {\n\t\t\tthis.contexts = contexts;\n\t\t}\n\n\t\tif (typeof selector === 'string') {\n\t\t\tif (/^<[\\s\\S]+>$/.test(selector)) {\n\t\t\t\tlet $temp = document.createElement('div');\n\t\t\t\t$temp.innerHTML = selector;\n\t\t\t\tthis.nodes = [$temp.firstChild];\n\t\t\t} else {\n\t\t\t\tthis.nodes = [];\n\n\t\t\t\tthis.contexts.forEach((context) => {\n\t\t\t\t\tthis.nodes.push(...context.querySelectorAll(selector));\n\t\t\t\t});\n\n\t\t\t}\n\t\t} else if (selector instanceof DOM) {\n\t\t\tthis.contexts = selector.contexts;\n\t\t\tthis.nodes = selector.nodes;\n\t\t} else if (Array.isArray(selector)) {\n\t\t\tthis.nodes = selector.filter((node) => {\n\t\t\t\treturn !!node;\n\t\t\t});\n\t\t} else if (selector) {\n\t\t\tthis.nodes = [selector];\n\t\t} else {\n\t\t\tthis.nodes = [];\n\t\t}\n\n\t}\n\n\teach(callback) {\n\t\tthis.nodes.forEach(callback);\n\t\treturn this;\n\t}\n\n\tmap(callback) {\n\t\treturn this.nodes.map(callback);\n\t}\n\n\tfilter(callback) {\n\t\treturn $(this.nodes.filter(callback));\n\t}\n\n\tget(index) {\n\t\treturn this.nodes[index];\n\t}\n\n\teq(index) {\n\t\treturn $(this.nodes[index]);\n\t}\n\n\tfind(selector) {\n\t\treturn $(selector, this.nodes);\n\t}\n\n\tsize() {\n\t\treturn this.nodes.length;\n\t}\n\n\tequals(selector) {\n\t\treturn this.nodes[0] === $(selector).nodes[0];\n\t}\n\n\tconcat(selector) {\n\t\treturn $([...$(selector).nodes, ...this.nodes]);\n\t}\n\n\tpush(selector) {\n\t\treturn this.nodes.push(...$(selector).nodes);\n\t}\n\n\tsplice(index, count = 1, ...selector) {\n\t\tthis.nodes.splice(index, count, ...$(selector).nodes);\n\t\treturn this;\n\t}\n\n\tindex(selector) {\n\t\treturn this.nodes.indexOf($(selector).nodes[0]);\n\t}\n\n\ton(eventName, handler, isOnly = false, isOrigin = true) {\n\t\tlet events = eventName.split(' ');\n\t\tif (isOnly) {\n\t\t\tthis.each((node) => {\n\t\t\t\tevents.forEach((event) => {\n\t\t\t\t\tif (isOrigin) {\n\t\t\t\t\t\tnode['on' + event] = function() {\n\t\t\t\t\t\t\treturn handler.call($(node), ...arguments);\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode['_on' + event] = function() {\n\t\t\t\t\t\t\treturn handler.call($(node), ...arguments);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tthis.each((node) => {\n\t\t\t\tevents.forEach((event) => {\n\t\t\t\t\tnode.addEventListener(event, function() {\n\t\t\t\t\t\thandler.call($(node), ...arguments);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn this;\n\t}\n\n\toff(eventName, handler) {\n\t\tthis.each((node) => {\n\t\t\tnode.removeEventListener(eventName, handler);\n\t\t\tnode['on' + eventName] = null;\n\t\t\tnode['_on' + eventName] = null;\n\t\t});\n\t\treturn this;\n\t}\n\n\temit(event, ...params) {\n\t\tlet result = [];\n\t\tthis.each((node) => {\n\t\t\tif (typeof this['on' + event] === 'function') {\n\t\t\t\tresult.push(this['on' + event](...params));\n\t\t\t} else if (typeof node['on' + event] === 'function') {\n\t\t\t\tresult.push(node['on' + event](...params));\n\t\t\t} else if (typeof node['_on' + event] === 'function') {\n\t\t\t\tresult.push(node['_on' + event](...params));\n\t\t\t}\n\t\t});\n\t\treturn result.length > 1 ? result : result[0];\n\t}\n\n\tattr(key, value) {\n\t\tif (typeof key === 'object') {\n\t\t\tthis.each((node) => {\n\t\t\t\tfor (let name in key) {\n\t\t\t\t\tnode.setAttribute(name, key[name]);\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (value !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.setAttribute(key, value);\n\t\t\t});\n\t\t} else {\n\t\t\treturn this.nodes.map((node) => {\n\t\t\t\treturn node.getAttribute(key);\n\t\t\t}).join('');\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tremoveAttr(key) {\n\t\tthis.each((node) => {\n\t\t\tnode.removeAttribute(key);\n\t\t});\n\t\treturn this;\n\t}\n\n\tdata(key, value, isOrigin = false) {\n\t\tif (typeof key === 'object') {\n\t\t\tthis.each((node) => {\n\t\t\t\tfor (let name in key) {\n\t\t\t\t\tif (isOrigin) {\n\t\t\t\t\t\tnode[name] = key[name];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode['_' + name] = key[name];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (value !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tif (isOrigin) {\n\t\t\t\t\tnode[key] = value;\n\t\t\t\t} else {\n\t\t\t\t\tnode['_' + key] = value;\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tif (isOrigin) {\n\t\t\t\treturn this.get(0)[key];\n\t\t\t} else {\n\t\t\t\treturn this.get(0)['_' + key];\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\taddClass(...names) {\n\t\tthis.each((node) => {\n\t\t\tlet classNames = node.className.split(' ');\n\n\t\t\tnames.forEach((name) => {\n\t\t\t\tif (classNames.indexOf(name) === -1) {\n\t\t\t\t\tclassNames.push(name);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tnode.className = classNames.join(' ');\n\t\t});\n\t\treturn this;\n\t}\n\n\tremoveClass(...names) {\n\t\tthis.each((node) => {\n\t\t\tlet classNames = node.className.split(' ');\n\n\t\t\tnames.forEach((name) => {\n\t\t\t\tlet index = classNames.indexOf(name);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tclassNames.splice(index, 1);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tnode.className = classNames.join(' ');\n\t\t});\n\t\treturn this;\n\t}\n\n\thasClass(name) {\n\t\treturn this.nodes.some((node) => {\n\t\t\treturn node.className.indexOf(name) !== -1;\n\t\t});\n\t}\n\n\tcss(key, val) {\n\t\tif (typeof key === 'object') {\n\t\t\tthis.each((node) => {\n\t\t\t\tfor (let name in key) {\n\t\t\t\t\tnode.style[name] = key[name];\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (val !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.style[key] = val;\n\t\t\t});\n\t\t} else if ('getComputedStyle' in window) {\n\t\t\treturn window.getComputedStyle(this.get(0))[key];\n\t\t} else {\n\t\t\treturn this.get(0).style[key];\n\t\t}\n\t}\n\n\twidth(val) {\n\t\treturn this.css('width', val);\n\t}\n\n\theight(val) {\n\t\treturn this.css('height', val);\n\t}\n\n\tappend(selector) {\n\t\tthis.each((node) => {\n\t\t\t$(selector).each((n) => {\n\t\t\t\tnode.appendChild(n);\n\t\t\t});\n\t\t});\n\t\treturn this;\n\t}\n\n\tremove() {\n\t\tthis.each((node) => {\n\t\t\tnode.remove();\n\t\t});\n\t\treturn this;\n\t}\n\n\treplace(selector) {\n\t\tthis.each((node) => {\n\t\t\tnode.parentNode.replaceChild($(selector).get(0), node);\n\t\t});\n\t\treturn this;\n\t}\n\n\thtml(html) {\n\t\tif (html !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.innerHTML = html;\n\t\t\t});\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.get(0).innerHTML;\n\t\t}\n\t}\n\n\ttext(str) {\n\t\tif (str !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.innerText = str;\n\t\t\t});\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.get(0).innerText;\n\t\t}\n\t}\n\n\tvalue(val) {\n\t\tif (val !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.value = val;\n\t\t\t});\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.get(0).value;\n\t\t}\n\t}\n\n\tparent() {\n\t\treturn $(this.nodes.map((node) => {\n\t\t\treturn node.parentNode;\n\t\t}));\n\t}\n\n\tchildren() {\n\t\tlet result = [];\n\t\tthis.each((node) => {\n\t\t\tresult.push(...node.children);\n\t\t});\n\t\treturn $(result);\n\t}\n\n\tsiblings() {\n\t\treturn this.parent().children().filter((node) => {\n\t\t\treturn this.nodes.indexOf(node) === -1;\n\t\t});\n\t}\n\n\tshow() {\n\t\tthis.css('display', '');\n\t\treturn this;\n\t}\n\n\thide() {\n\t\tthis.css('display', 'none');\n\t\treturn this;\n\t}\n\n\toffset() {\n\t\treturn {\n\t\t\tleft: this.get(0).offsetLeft,\n\t\t\ttop: this.get(0).offsetTop\n\t\t};\n\t}\n\n\tscrollLeft() {\n\t\treturn this.get(0).scrollLeft;\n\t}\n\n\tscrollTop() {\n\t\treturn this.get(0).scrollTop;\n\t}\n\n\tclick() {\n\t\tthis.each((node) => {\n\t\t\tnode.click();\n\t\t});\n\t\treturn this;\n\t}\n\n}\n\n$ = (selector, contexts) => {\n\tif (selector instanceof DOM) {\n\t\treturn selector;\n\t} else {\n\t\treturn new DOM(selector, contexts);\n\t}\n};\n\n$.class = DOM;\n\nmodule.exports = $;\n},{}],6:[function(require,module,exports){\nconst $ = require('./dom.js');\nconst util = require('./util.js');\nconst popup = require('./popup.js');\n\nclass GroupItem extends $.class {\n\tconstructor(seletor) {\n\n\t\tif (seletor) {\n\t\t\tsuper(seletor);\n\t\t\treturn;\n\t\t}\n\n\t\tsuper(`<li class=\"item mark\">\n\t\t\t<span class=\"status\">\n\t\t\t\t<i class=\"js-status icon icon-show\" title=\"隐藏\"></i>\n\t\t\t</span>\n\t\t\t\n\t\t\t<p class=\"js-name single-line\" title=\"分组名\">分组名</p>\n\t\t\t<input class=\"js-input edit-text\" autocomplete=\"off\" style=\"display: none;\"/>\n\n\t\t\t<span class=\"ctrl\">\n\t\t\t\t<i class=\"js-edit icon icon-edit\" title=\"重命名\"></i>\n\t\t\t\t<i class=\"js-submit icon icon-submit\" title=\"确定\" style=\"display: none;\"></i>\n\t\t\t\t<i class=\"js-delete icon icon-delete\" title=\"删除\"></i>\n\t\t\t</span>\n\t\t</li>`);\n\n\t\tthis.$areas = $();\n\n\t\t// 选中\n\t\tlet $nameText = this.find('.js-name');\n\n\t\t$nameText.on('click', () => {\n\t\t\tthis\n\t\t\t\t.addClass('active')\n\t\t\t\t.siblings()\n\t\t\t\t.removeClass('active');\n\n\t\t\tthis.emit('choose');\n\t\t});\n\n\t\t// 显示和隐藏\n\t\tlet $status = this.find('.js-status');\n\n\t\t$status.on('click', () => {\n\n\t\t\tthis.isShow = !$status.hasClass('icon-show');\n\n\t\t});\n\n\t\t// 标题编辑和保存\n\t\tlet $nameInput = this.find('.js-input');\n\t\tlet $edit = this.find('.js-edit');\n\t\tlet $submit = this.find('.js-submit');\n\n\t\t$edit.on('click', () => {\n\n\t\t\t$edit.hide();\n\t\t\t$submit.show();\n\t\t\t$nameText.hide();\n\t\t\t$nameInput\n\t\t\t\t.show()\n\t\t\t\t.value($nameText.text());\n\t\t});\n\n\t\t$submit.on('click', () => {\n\n\t\t\tlet name = $nameInput.value();\n\n\t\t\tlet flag = this.emit('rename', name);\n\n\t\t\tif (flag === false) {\n\t\t\t\tname = $nameText.text();\n\t\t\t}\n\n\t\t\t$edit.show();\n\t\t\t$submit.hide();\n\t\t\t$nameInput.hide();\n\t\t\t$nameText.show();\n\n\t\t});\n\n\t\t$nameInput.on('blur', () => $submit.click());\n\n\t\t// 删除\n\t\tlet $delete = this.find('.js-delete');\n\n\t\t$delete.on('click', () => {\n\t\t\tpopup({\n\t\t\t\tcontent: '是否确认删除分组，<br />删除后将不可恢复。',\n\t\t\t\tconfirm: () => {\n\t\t\t\t\tlet flag = this.emit('delete');\n\t\t\t\t\tif (flag !== false) {\n\t\t\t\t\t\tsuper.remove();\n\t\t\t\t\t\tthis.$areas.remove();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t}\n\n\tset name(val) {\n\t\tthis\n\t\t\t.data('name', val)\n\t\t\t.find('.js-name')\n\t\t\t.attr('title', val)\n\t\t\t.text(val);\n\t}\n\n\tget name() {\n\t\tif (this.size() > 1) {\n\t\t\treturn '分组集';\n\t\t}\n\t\treturn this.data('name');\n\t}\n\n\tset isShow(val) {\n\t\tlet $status = this.find('.js-status');\n\n\t\tif (val) {\n\t\t\tthis.$areas.show();\n\t\t\t$status\n\t\t\t\t\t.addClass('icon-show')\n\t\t\t\t\t.removeClass('icon-hide')\n\t\t\t\t\t.attr('title', '显示');\n\t\t} else {\n\t\t\tthis.$areas.hide();\n\t\t\t$status\n\t\t\t\t\t.addClass('icon-hide')\n\t\t\t\t\t.removeClass('icon-show')\n\t\t\t\t\t.attr('title', '显示');\n\t\t}\n\t\tthis.data('isShow', val);\n\t}\n\n\tget isShow() {\n\t\tlet result = this.data('isShow');\n\t\treturn result === undefined ? true : result;\n\t}\n\n\tset $areas(val) {\n\t\tthis.data('$areas', val);\n\t}\n\n\tget $areas() {\n\t\tif (this.size() > 1) {\n\t\t\tlet $result = $();\n\t\t\tthis.forEach(($group) => {\n\t\t\t\t$result.push($group.$areas);\n\t\t\t});\n\t\t\treturn $result;\n\t\t}\n\t\treturn this.data('$areas');\n\t}\n\n\n\tforEach(callback) {\n\t\tsuper.each((node) => {\n\t\t\tcallback(new GroupItem(node));\n\t\t});\n\t}\n\n\teq(index) {\n\t\treturn new GroupItem(super.eq(index));\n\t}\n\n\tremove() {\n\t\tthis.$areas.remove();\n\t\tsuper.remove();\n\t}\n\n\tappend($area) {\n\t\tif (!util.isArea($area)) {\n\t\t\treturn this;\n\t\t}\n\n\t\t$area.on('delete', () => {\n\t\t\tthis.$areas.splice(this.$areas.index($area));\n\t\t}, true, false);\n\n\t\tthis.$areas.push($area);\n\t\treturn this;\n\t}\n\n}\n\nmodule.exports = GroupItem;\n},{\"./dom.js\":5,\"./popup.js\":8,\"./util.js\":11}],7:[function(require,module,exports){\nconst $ = require('./dom.js');\nconst util = require('./util.js');\nconst toast = require('./toast.js');\nconst GroupItem = require('./group-item.js');\n\nclass GroupList extends $.class {\n\tconstructor(selector) {\n\t\tsuper(selector);\n\n\t\tthis.$groups = new GroupItem([]);\n\n\t}\n\n\tcheck() {\n\t\tif (!this.$groups.hasClass('active') && this.$groups.size() > 0) {\n\t\t\tlet $group = this.$groups.eq(0);\n\t\t\tthis.$currentGroup = $group;\n\t\t\tthis.emit('current', $group.addClass('active'));\n\t\t}\n\t\treturn this;\n\t}\n\n\tfindByName(name) {\n\t\tlet $result = null;\n\n\t\tthis.$groups.forEach(($group) => {\n\t\t\tif ($group.name === name) {\n\t\t\t\t$result = $group;\n\t\t\t}\n\t\t});\n\t\treturn $result;\n\t}\n\n\tappend($group) {\n\t\tif (!util.isGroupItem($group)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tfor (let i = 1; !$group.name; i++) {\n\t\t\tlet name = '分组' + i;\n\n\t\t\tif (!this.findByName(name)) {\n\t\t\t\t$group.name = name;\n\t\t\t}\n\t\t}\n\n\t\t$group.on('choose', () => {\n\t\t\tthis.$currentGroup = $group;\n\t\t\tthis.emit('current', $group);\n\t\t}, true, false);\n\n\t\t$group.on('delete', () => {\n\t\t\tif (this.$groups.size() > 1) {\n\t\t\t\tlet index = this.$groups.index($group);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tthis.$groups.splice(index);\n\t\t\t\t}\n\t\t\t\tthis.check();\n\t\t\t} else {\n\t\t\t\ttoast('删除失败，至少保留一个分组', 'error');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t}, true, false);\n\n\t\t$group.on('rename', (name) => {\n\t\t\tlet $result = this.findByName(name);\n\t\t\tif ($result && !$result.equals($group)) {\n\t\t\t\ttoast('名称已存在', 'error');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t$group.name = name;\n\n\t\t\tthis.emit('current', this.$currentGroup);\n\t\t}, true, false);\n\n\t\tsuper.append($group);\n\t\tthis.$groups.push($group);\n\t\tthis.check();\n\t\treturn this;\n\t}\n\n}\n\nmodule.exports = GroupList;\n},{\"./dom.js\":5,\"./group-item.js\":6,\"./toast.js\":9,\"./util.js\":11}],8:[function(require,module,exports){\nconst $ = require('./dom.js');\n\nlet $body = $('body');\n\nlet $popup = $(`<div class=\"popup\">\n\t<div class=\"box\">\n\t\t<div class=\"js-title title\"></div>\n\t\t<div class=\"js-content content\"></div>\n\t\t<div class=\"btns\">\n\t\t\t<button class=\"js-cancel cancel\">取消</button>\n\t\t\t<button class=\"js-confirm confirm ml\">确定</button>\n\t\t</div>\n\t</div>\n</div>`);\n\nlet $title = $popup.find('.js-title');\nlet $content = $popup.find('.js-content');\nlet $cancel = $popup.find('.js-cancel');\nlet $confirm = $popup.find('.js-confirm');\n\n$popup.on('animationend', () => {\n\tif ($popup.hasClass('fade-out')) {\n\t\t$popup.removeClass('fade-out');\n\t\t$popup.remove();\n\t}\n\n\tif ($popup.hasClass('fade-in')) {\n\t\t$popup.removeClass('fade-in');\n\t}\n});\n\nmodule.exports = (options = {}) => {\n\n\tif (typeof options === 'string') {\n\t\toptions = {\n\t\t\tcontent: options\n\t\t};\n\t}\n\n\t$title.text(options.title || '提示');\n\n\t$content.html(options.content || '');\n\n\tif (options.cancelText) {\n\t\t$cancel.text(options.cancelText);\n\t}\n\n\t$cancel.on('click', () => {\n\t\tif (typeof options.cancel === 'function') {\n\t\t\tlet flag = options.cancel();\n\t\t\tif (flag === 'false') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t$popup.addClass('fade-out');\n\t}, true);\n\n\tif (options.confirmText) {\n\t\t$confirm.text(options.confirmText);\n\t}\n\n\t$confirm.on('click', () => {\n\t\tif (typeof options.confirm === 'function') {\n\t\t\tlet flag = options.confirm();\n\t\t\tif (flag === 'false') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t$popup.addClass('fade-out');\n\t}, true);\n\n\t$body.append($popup.addClass('fade-in'));\n};\n},{\"./dom.js\":5}],9:[function(require,module,exports){\nconst $ = require('./dom.js');\n\nlet $body = $('body');\n\nlet $toast = $(`<div class=\"toast\">\n\t<i class=\"js-icon icon\"></i>\n\t<span class=\"js-text\"></span>\n</div>`);\n\nlet $icon = $toast.find('.js-icon');\nlet $text = $toast.find('.js-text');\n\n$toast.on('animationend', () => {\n\t$toast.remove();\n});\n\nmodule.exports = (str, type = 'prompt') => {\n\t$toast\n\t\t.removeClass('success')\n\t\t.removeClass('error')\n\t\t.removeClass('prompt')\n\t\t.addClass(type);\n\n\t$icon\n\t\t.removeClass('icon-success')\n\t\t.removeClass('icon-error')\n\t\t.removeClass('icon-prompt')\n\t\t.addClass(`icon-${ type }`);\n\n\t$text.text(str);\n\n\t$body.append($toast);\n};\n},{\"./dom.js\":5}],10:[function(require,module,exports){\nconst $ = require('./dom.js');\nconst toast = require('./toast.js');\n\nclass Uploader extends $.class {\n\n\tconstructor(selector) {\n\n\t\tsuper(selector);\n\n\t\tthis.on('change', () => {\n\t\t\tlet file = this.data('files', undefined, true)[0];\n\n\t\t\tif (!file) {\n\t\t\t\tthis.value('');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet reader = new FileReader();\n\n\t\t\treader.onload = (e) => {\n\t\t\t\tthis.emit('success', e.target.result, e);\n\t\t\t};\n\n\t\t\treader.onerror = (e) => {\n\t\t\t\tthis.emit('error', e);\n\t\t\t};\n\n\t\t\tif (this.isText) {\n\t\t\t\treader.readAsText(file);\n\t\t\t} else {\n\t\t\t\treader.readAsDataURL(file);\n\t\t\t}\n\n\t\t\tthis.value('');\n\t\t});\n\n\t\tthis.onerror = () => toast((this.options.name || '文件') + '读取错误', 'error');\n\n\t}\n\n\topen(options) {\n\n\t\tthis.options = options || {};\n\n\t\tif (this.options.accept) {\n\t\t\tthis.attr('accept', options.accept);\n\t\t} else {\n\t\t\tthis.removeAttr('accept');\n\t\t}\n\n\t\tthis.isText = !!this.options.isText;\n\n\t\tthis.click();\n\n\t\treturn this;\n\t}\n\n\tsuccess(handler) {\n\t\tthis.onsuccess = handler;\n\t\treturn this;\n\t}\n\n\terror(handler) {\n\t\tthis.onerror = handler;\n\t\treturn this;\n\t}\n}\n\nmodule.exports = Uploader;\n},{\"./dom.js\":5,\"./toast.js\":9}],11:[function(require,module,exports){\nconst Uploader = require('./uploader.js');\nconst Canvas = require('./canvas.js');\nconst GroupList = require('./group-list.js');\nconst GroupItem = require('./group-item.js');\nconst Area = require('./area.js');\nconst DOM = require('./dom.js').class;\n\nmodule.exports.toFloat = (str) => {\n\tif (typeof str !== 'string') {\n\t\treturn;\n\t}\n\tlet result = str.match(/\\d+/g);\n\treturn parseFloat(result && (result.length > 1 ? result : result[0]));\n};\n\nmodule.exports.toString = (num, unit) => {\n\treturn num + unit;\n};\n\nmodule.exports.isCanvas = (object) => {\n\treturn object instanceof Canvas;\n};\n\nmodule.exports.isGroupList = (object) => {\n\treturn object instanceof GroupList;\n};\n\nmodule.exports.isGroupItem = (object) => {\n\treturn object instanceof GroupItem;\n};\n\nmodule.exports.isUploader = (object) => {\n\treturn object instanceof Uploader;\n};\n\nmodule.exports.isArea = (object) => {\n\treturn object instanceof Area;\n};\n\nmodule.exports.isDOM = (object) => {\n\treturn object instanceof DOM;\n};\n},{\"./area.js\":3,\"./canvas.js\":4,\"./dom.js\":5,\"./group-item.js\":6,\"./group-list.js\":7,\"./uploader.js\":10}]},{},[1])\n\n","const $ = require('./dom.js');\nconst util = require('./util.js');\nconst popup = require('./popup.js');\n\nclass GroupItem extends $.class {\n\tconstructor(seletor) {\n\n\t\tif (seletor) {\n\t\t\tsuper(seletor);\n\t\t\treturn;\n\t\t}\n\n\t\tsuper(`<li class=\"item mark\">\n\t\t\t<span class=\"status\">\n\t\t\t\t<i class=\"js-status icon icon-show\" title=\"隐藏\"></i>\n\t\t\t</span>\n\t\t\t\n\t\t\t<p class=\"js-name single-line\" title=\"分组名\">分组名</p>\n\t\t\t<input class=\"js-input edit-text\" autocomplete=\"off\" style=\"display: none;\"/>\n\n\t\t\t<span class=\"ctrl\">\n\t\t\t\t<i class=\"js-edit icon icon-edit\" title=\"重命名\"></i>\n\t\t\t\t<i class=\"js-submit icon icon-submit\" title=\"确定\" style=\"display: none;\"></i>\n\t\t\t\t<i class=\"js-delete icon icon-delete\" title=\"删除\"></i>\n\t\t\t</span>\n\t\t</li>`);\n\n\t\tthis.$areas = $();\n\n\t\t// 选中\n\t\tlet $nameText = this.find('.js-name');\n\n\t\t$nameText.on('click', () => {\n\t\t\tthis\n\t\t\t\t.addClass('active')\n\t\t\t\t.siblings()\n\t\t\t\t.removeClass('active');\n\n\t\t\tthis.emit('choose');\n\t\t});\n\n\t\t// 显示和隐藏\n\t\tlet $status = this.find('.js-status');\n\n\t\t$status.on('click', () => {\n\n\t\t\tthis.isShow = !$status.hasClass('icon-show');\n\n\t\t});\n\n\t\t// 标题编辑和保存\n\t\tlet $nameInput = this.find('.js-input');\n\t\tlet $edit = this.find('.js-edit');\n\t\tlet $submit = this.find('.js-submit');\n\n\t\t$edit.on('click', () => {\n\n\t\t\t$edit.hide();\n\t\t\t$submit.show();\n\t\t\t$nameText.hide();\n\t\t\t$nameInput\n\t\t\t\t.show()\n\t\t\t\t.value($nameText.text());\n\t\t});\n\n\t\t$submit.on('click', () => {\n\n\t\t\tlet name = $nameInput.value();\n\n\t\t\tlet flag = this.emit('rename', name);\n\n\t\t\tif (flag === false) {\n\t\t\t\tname = $nameText.text();\n\t\t\t}\n\n\t\t\t$edit.show();\n\t\t\t$submit.hide();\n\t\t\t$nameInput.hide();\n\t\t\t$nameText.show();\n\n\t\t});\n\n\t\t$nameInput.on('blur', () => $submit.click());\n\n\t\t// 删除\n\t\tlet $delete = this.find('.js-delete');\n\n\t\t$delete.on('click', () => {\n\t\t\tpopup({\n\t\t\t\tcontent: '是否确认删除分组，<br />删除后将不可恢复。',\n\t\t\t\tconfirm: () => {\n\t\t\t\t\tlet flag = this.emit('delete');\n\t\t\t\t\tif (flag !== false) {\n\t\t\t\t\t\tsuper.remove();\n\t\t\t\t\t\tthis.$areas.remove();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t}\n\n\tset name(val) {\n\t\tthis\n\t\t\t.data('name', val)\n\t\t\t.find('.js-name')\n\t\t\t.attr('title', val)\n\t\t\t.text(val);\n\t}\n\n\tget name() {\n\t\tif (this.size() > 1) {\n\t\t\treturn '分组集';\n\t\t}\n\t\treturn this.data('name');\n\t}\n\n\tset isShow(val) {\n\t\tlet $status = this.find('.js-status');\n\n\t\tif (val) {\n\t\t\tthis.$areas.show();\n\t\t\t$status\n\t\t\t\t\t.addClass('icon-show')\n\t\t\t\t\t.removeClass('icon-hide')\n\t\t\t\t\t.attr('title', '显示');\n\t\t} else {\n\t\t\tthis.$areas.hide();\n\t\t\t$status\n\t\t\t\t\t.addClass('icon-hide')\n\t\t\t\t\t.removeClass('icon-show')\n\t\t\t\t\t.attr('title', '显示');\n\t\t}\n\t\tthis.data('isShow', val);\n\t}\n\n\tget isShow() {\n\t\tlet result = this.data('isShow');\n\t\treturn result === undefined ? true : result;\n\t}\n\n\tset $areas(val) {\n\t\tthis.data('$areas', val);\n\t}\n\n\tget $areas() {\n\t\tif (this.size() > 1) {\n\t\t\tlet $result = $();\n\t\t\tthis.forEach(($group) => {\n\t\t\t\t$result.push($group.$areas);\n\t\t\t});\n\t\t\treturn $result;\n\t\t}\n\t\treturn this.data('$areas');\n\t}\n\n\n\tforEach(callback) {\n\t\tsuper.each((node) => {\n\t\t\tcallback(new GroupItem(node));\n\t\t});\n\t}\n\n\teq(index) {\n\t\treturn new GroupItem(super.eq(index));\n\t}\n\n\tremove() {\n\t\tthis.$areas.remove();\n\t\tsuper.remove();\n\t}\n\n\tappend($area) {\n\t\tif (!util.isArea($area)) {\n\t\t\treturn this;\n\t\t}\n\n\t\t$area.on('delete', () => {\n\t\t\tthis.$areas.splice(this.$areas.index($area));\n\t\t}, true, false);\n\n\t\tthis.$areas.push($area);\n\t\treturn this;\n\t}\n\n}\n\nmodule.exports = GroupItem;","const $ = require('./dom.js');\nconst util = require('./util.js');\nconst toast = require('./toast.js');\nconst GroupItem = require('./group-item.js');\n\nclass GroupList extends $.class {\n\tconstructor(selector) {\n\t\tsuper(selector);\n\n\t\tthis.$groups = new GroupItem([]);\n\n\t}\n\n\tcheck() {\n\t\tif (!this.$groups.hasClass('active') && this.$groups.size() > 0) {\n\t\t\tlet $group = this.$groups.eq(0);\n\t\t\tthis.$currentGroup = $group;\n\t\t\tthis.emit('current', $group.addClass('active'));\n\t\t}\n\t\treturn this;\n\t}\n\n\tfindByName(name) {\n\t\tlet $result = null;\n\n\t\tthis.$groups.forEach(($group) => {\n\t\t\tif ($group.name === name) {\n\t\t\t\t$result = $group;\n\t\t\t}\n\t\t});\n\t\treturn $result;\n\t}\n\n\tappend($group) {\n\t\tif (!util.isGroupItem($group)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tfor (let i = 1; !$group.name; i++) {\n\t\t\tlet name = '分组' + i;\n\n\t\t\tif (!this.findByName(name)) {\n\t\t\t\t$group.name = name;\n\t\t\t}\n\t\t}\n\n\t\t$group.on('choose', () => {\n\t\t\tthis.$currentGroup = $group;\n\t\t\tthis.emit('current', $group);\n\t\t}, true, false);\n\n\t\t$group.on('delete', () => {\n\t\t\tif (this.$groups.size() > 1) {\n\t\t\t\tlet index = this.$groups.index($group);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tthis.$groups.splice(index);\n\t\t\t\t}\n\t\t\t\tthis.check();\n\t\t\t} else {\n\t\t\t\ttoast('删除失败，至少保留一个分组', 'error');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t}, true, false);\n\n\t\t$group.on('rename', (name) => {\n\t\t\tlet $result = this.findByName(name);\n\t\t\tif ($result && !$result.equals($group)) {\n\t\t\t\ttoast('名称已存在', 'error');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t$group.name = name;\n\n\t\t\tthis.emit('current', this.$currentGroup);\n\t\t}, true, false);\n\n\t\tsuper.append($group);\n\t\tthis.$groups.push($group);\n\t\tthis.check();\n\t\treturn this;\n\t}\n\n}\n\nmodule.exports = GroupList;","const $ = require('./dom.js');\n\nlet $body = $('body');\n\nlet $popup = $(`<div class=\"popup\">\n\t<div class=\"box\">\n\t\t<div class=\"js-title title\"></div>\n\t\t<div class=\"js-content content\"></div>\n\t\t<div class=\"btns\">\n\t\t\t<button class=\"js-cancel cancel\">取消</button>\n\t\t\t<button class=\"js-confirm confirm ml\">确定</button>\n\t\t</div>\n\t</div>\n</div>`);\n\nlet $title = $popup.find('.js-title');\nlet $content = $popup.find('.js-content');\nlet $cancel = $popup.find('.js-cancel');\nlet $confirm = $popup.find('.js-confirm');\n\n$popup.on('animationend', () => {\n\tif ($popup.hasClass('fade-out')) {\n\t\t$popup.removeClass('fade-out');\n\t\t$popup.remove();\n\t}\n\n\tif ($popup.hasClass('fade-in')) {\n\t\t$popup.removeClass('fade-in');\n\t}\n});\n\nmodule.exports = (options = {}) => {\n\n\tif (typeof options === 'string') {\n\t\toptions = {\n\t\t\tcontent: options\n\t\t};\n\t}\n\n\t$title.text(options.title || '提示');\n\n\t$content.html(options.content || '');\n\n\tif (options.cancelText) {\n\t\t$cancel.text(options.cancelText);\n\t}\n\n\t$cancel.on('click', () => {\n\t\tif (typeof options.cancel === 'function') {\n\t\t\tlet flag = options.cancel();\n\t\t\tif (flag === 'false') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t$popup.addClass('fade-out');\n\t}, true);\n\n\tif (options.confirmText) {\n\t\t$confirm.text(options.confirmText);\n\t}\n\n\t$confirm.on('click', () => {\n\t\tif (typeof options.confirm === 'function') {\n\t\t\tlet flag = options.confirm();\n\t\t\tif (flag === 'false') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t$popup.addClass('fade-out');\n\t}, true);\n\n\t$body.append($popup.addClass('fade-in'));\n};","const $ = require('./dom.js');\n\nlet $body = $('body');\n\nlet $toast = $(`<div class=\"toast\">\n\t<i class=\"js-icon icon\"></i>\n\t<span class=\"js-text\"></span>\n</div>`);\n\nlet $icon = $toast.find('.js-icon');\nlet $text = $toast.find('.js-text');\n\n$toast.on('animationend', () => {\n\t$toast.remove();\n});\n\nmodule.exports = (str, type = 'prompt') => {\n\t$toast\n\t\t.removeClass('success')\n\t\t.removeClass('error')\n\t\t.removeClass('prompt')\n\t\t.addClass(type);\n\n\t$icon\n\t\t.removeClass('icon-success')\n\t\t.removeClass('icon-error')\n\t\t.removeClass('icon-prompt')\n\t\t.addClass(`icon-${ type }`);\n\n\t$text.text(str);\n\n\t$body.append($toast);\n};","const $ = require('./dom.js');\nconst toast = require('./toast.js');\n\nclass Uploader extends $.class {\n\n\tconstructor(selector) {\n\n\t\tsuper(selector);\n\n\t\tthis.on('change', () => {\n\t\t\tlet file = this.data('files', undefined, true)[0];\n\n\t\t\tif (!file) {\n\t\t\t\tthis.value('');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet reader = new FileReader();\n\n\t\t\treader.onload = (e) => {\n\t\t\t\tthis.emit('success', e.target.result, e);\n\t\t\t};\n\n\t\t\treader.onerror = (e) => {\n\t\t\t\tthis.emit('error', e);\n\t\t\t};\n\n\t\t\tif (this.isText) {\n\t\t\t\treader.readAsText(file);\n\t\t\t} else {\n\t\t\t\treader.readAsDataURL(file);\n\t\t\t}\n\n\t\t\tthis.value('');\n\t\t});\n\n\t\tthis.onerror = () => toast((this.options.name || '文件') + '读取错误', 'error');\n\n\t}\n\n\topen(options) {\n\n\t\tthis.options = options || {};\n\n\t\tif (this.options.accept) {\n\t\t\tthis.attr('accept', options.accept);\n\t\t} else {\n\t\t\tthis.removeAttr('accept');\n\t\t}\n\n\t\tthis.isText = !!this.options.isText;\n\n\t\tthis.click();\n\n\t\treturn this;\n\t}\n\n\tsuccess(handler) {\n\t\tthis.onsuccess = handler;\n\t\treturn this;\n\t}\n\n\terror(handler) {\n\t\tthis.onerror = handler;\n\t\treturn this;\n\t}\n}\n\nmodule.exports = Uploader;","const Uploader = require('./uploader.js');\nconst Canvas = require('./canvas.js');\nconst GroupList = require('./group-list.js');\nconst GroupItem = require('./group-item.js');\nconst Area = require('./area.js');\nconst DOM = require('./dom.js').class;\n\nmodule.exports.toFloat = (str) => {\n\tif (typeof str !== 'string') {\n\t\treturn;\n\t}\n\tlet result = str.match(/\\d+/g);\n\treturn parseFloat(result && (result.length > 1 ? result : result[0]));\n};\n\nmodule.exports.toString = (num, unit) => {\n\treturn num + unit;\n};\n\nmodule.exports.isCanvas = (object) => {\n\treturn object instanceof Canvas;\n};\n\nmodule.exports.isGroupList = (object) => {\n\treturn object instanceof GroupList;\n};\n\nmodule.exports.isGroupItem = (object) => {\n\treturn object instanceof GroupItem;\n};\n\nmodule.exports.isUploader = (object) => {\n\treturn object instanceof Uploader;\n};\n\nmodule.exports.isArea = (object) => {\n\treturn object instanceof Area;\n};\n\nmodule.exports.isDOM = (object) => {\n\treturn object instanceof DOM;\n};"]}