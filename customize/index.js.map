{"version":3,"sources":["../node_modules/._browser-pack@6.0.4@browser-pack/_prelude.js","../src/customize/index.js","../src/customize/lib/base64.js","../src/customize/module/ajax.js","../src/customize/module/area.js","../src/customize/module/canvas.js","index.js","../src/customize/module/dom.js","../src/customize/module/group-item.js","../src/customize/module/group-list.js","../src/customize/module/popup.js","../src/customize/module/toast.js","../src/customize/module/uploader.js","../src/customize/module/util.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","$","base64","toast","popup","ajax","Uploader","Canvas","GroupList","GroupItem","Area","$uploader","$groupList","$canvas","$size","$sizeWidth","$sizeHeight","$sizeInput","concat","$index","$uploadImg","$uploadOption","loadData","data","_loop","name","item","$group","areas","forEach","area","$area","addClass","css","top","y1","left","x1","width","parseFloat","x2","height","y2","append","isShow","loadSetting","setting","resize","flag","ready","value","removeAttr","imgHeight","imgWidth","update","loadOption","isRequire","arguments","undefined","cb","open","accept","success","options","decode","replace","JSON","parse","image","content","confirmText","cancelText","confirm","cancel","getOptions","params","result","$groups","$areas","map","getImage","test","on","remove","setImage","img","$zoomIn","$zoomOut","$replaceImg","$preview","bind","zoomIn","zoomOut","res","resData","responseText","errcode","window","errmsg","$addGroup","$search","$current","text","indexOf","show","hide","find","this","attr","siblings","removeClass","init","$options","$optionsUpload","title","./module/ajax.js","./module/area.js","./module/canvas.js","./module/dom.js","./module/group-item.js","./module/group-list.js","./module/popup.js","./module/toast.js","./module/uploader.js","2","_keyStr","encode","input","output","chr1","chr2","chr3","enc1","enc2","enc3","enc4","string","utftext","c","charCodeAt","String","fromCharCode","isNaN","charAt","c1","c2","3","url","method","callback","xhr","XMLHttpRequest","onreadystatechange","readyState","status","setRequestHeader","send","stringify","_$$class","_classCallCheck","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","emit","_inherits","class","./dom.js","util","_$$class2","selector","container","_this2","$container","$img","self","toPersent","val","type","w","toFloat","h","toString","$target","target","button","hasClass","$currentArea","startX","getAbs","x","startY","y","$currentGroup","document","endX","endY","abs","isError","count","_createClass","key","isGroupList","imgScale","event","pageX","scrollLeft","offset","pageY","scrollTop","isArea","src","_this3","handler","onready","./area.js","./util.js","6","DOM","_this4","contexts","Array","isArray","$temp","createElement","innerHTML","nodes","firstChild","context","_nodes","push","apply","_toConsumableArray","querySelectorAll","filter","node","index","_nodes2","_nodes3","_len","_key","splice","eventName","isOnly","isOrigin","events","split","each","prototype","slice","addEventListener","removeEventListener","_this5","_len2","_key2","_typeof","setAttribute","getAttribute","join","removeAttribute","get","_len3","names","_key3","classNames","className","_len4","_key4","some","style","getComputedStyle","appendChild","parentNode","replaceChild","html","str","innerText","children","_this6","parent","offsetLeft","offsetTop","click","7","_$$class3","seletor","_this7","$nameText","$status","$nameInput","$edit","$submit","_get","_this8","set","size","$result","./popup.js","8","_$$class4","_this9","eq","_this10","isGroupItem","findByName","check","equals","./toast.js","9","$body","$popup","$title","$content","$cancel","$confirm","10","$toast","$icon","$text","11","_$$class5","_this11","file","reader","FileReader","onload","onerror","readAsDataURL","onsuccess","12","match","num","unit","isCanvas","object","isUploader","isDOM","./canvas.js","./group-item.js","./group-list.js","./uploader.js"],"mappings":"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","file":"index.js","sourcesContent":["(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()","const $ = require('./module/dom.js');\nconst base64 = require('./lib/base64.js');\nconst toast = require('./module/toast.js');\nconst popup = require('./module/popup.js');\nconst ajax = require('./module/ajax.js');\nconst Uploader = require('./module/uploader.js');\nconst Canvas = require('./module/canvas.js');\nconst GroupList = require('./module/group-list.js');\nconst GroupItem = require('./module/group-item.js');\nconst Area = require('./module/area.js');\n\n(function() {\n\n\tconst $uploader = new Uploader('#upload-file');\n\tconst $groupList = new GroupList('#group');\n\tconst $canvas = new Canvas('#canvas', '#container');\n\n\n\t/* 尺寸 */\n\tconst $size = $('#size');\n\tconst $sizeWidth = $('#sizeWidth');\n\tconst $sizeHeight = $('#sizeHeight');\n\tconst $sizeInput = $sizeWidth.concat($sizeHeight);\n\n\n\t/* 索引页 */\n\tconst $index = $('#index');\n\tconst $uploadImg = $('#upload-img');\n\tconst $uploadOption = $('#upload-option');\n\n\tfunction loadData(data) {\n\t\tfor (let name in data) {\n\t\t\tlet item = data[name];\n\t\t\tlet $group = new GroupItem();\n\n\t\t\titem.areas.forEach((area) => {\n\t\t\t\tlet $area = new Area();\n\t\t\t\t$area\n\t\t\t\t\t.data(area)\n\t\t\t\t\t.addClass('hover')\n\t\t\t\t\t.css({\n\t\t\t\t\t\ttop: area.y1,\n\t\t\t\t\t\tleft: area.x1,\n\t\t\t\t\t\twidth: parseFloat(area.x2) - parseFloat(area.x1) + '%',\n\t\t\t\t\t\theight: parseFloat(area.y2) - parseFloat(area.y1) + '%'\n\t\t\t\t\t});\n\t\t\t\t$group.append($area);\n\t\t\t\t$canvas.append($area);\n\t\t\t});\n\n\t\t\t$group.name = name;\n\t\t\t$group.isShow = item.isShow;\n\n\t\t\t$groupList.append($group);\n\t\t}\n\n\t}\n\n\tfunction loadSetting(setting) {\n\t\tif (setting.resize) {\n\t\t\t$size.data('checked', true, true);\n\t\t\tlet flag = true;\n\t\t\t$canvas.ready(() => {\n\t\t\t\tif (flag) {\n\t\t\t\t\t$sizeWidth.value(setting.width).data('value', setting.width);\n\t\t\t\t\t$sizeHeight.value(setting.height).data('value', setting.height);\n\t\t\t\t\t$sizeInput.removeAttr('disabled');\n\t\t\t\t\t$canvas.imgHeight = setting.height;\n\t\t\t\t\t$canvas.imgWidth = setting.width;\n\t\t\t\t\tflag = false;\n\t\t\t\t} else {\n\t\t\t\t\t$sizeWidth.value($canvas.imgWidth).data('value', $canvas.imgWidth);\n\t\t\t\t\t$sizeHeight.value($canvas.imgHeight).data('value', $canvas.imgHeight);\n\t\t\t\t}\n\t\t\t\t$canvas.update();\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction loadOption(isRequire = false, cb) {\n\t\t$uploader.open({\n\t\t\tname: '配置文件',\n\t\t\taccept: 'text/json'\n\t\t}).success((data) => {\n\t\t\tlet options = base64.decode(data.replace('data:;base64,', ''));\n\t\t\ttry {\n\t\t\t\toptions = JSON.parse(options);\n\t\t\t} catch (e) {\n\t\t\t\ttoast('配置文件解析出错', 'error');\n\t\t\t\tthrow new Error('配置文件解析出错');\n\t\t\t}\n\n\t\t\tif (isRequire === true && !options.image) {\n\t\t\t\tpopup({\n\t\t\t\t\tcontent: '当前配置文件缺少图片<br />是否上传图片',\n\t\t\t\t\tconfirmText: '是',\n\t\t\t\t\tcancelText: '否',\n\t\t\t\t\tconfirm() {\n\t\t\t\t\t\t$uploader.open({\n\t\t\t\t\t\t\tname: '图片',\n\t\t\t\t\t\t\taccept: 'image/*'\n\t\t\t\t\t\t}).success((data) => {\n\n\t\t\t\t\t\t\tif (typeof cb === 'function') {\n\t\t\t\t\t\t\t\tcb(data);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tloadData(options.data);\n\t\t\t\t\t\t\tloadSetting(options.setting);\n\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tcancel() {\n\t\t\t\t\t\ttoast('加载数据失败，请先上传图片', 'error');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tif (typeof cb === 'function') {\n\t\t\t\t\tcb(options.image);\n\t\t\t\t}\n\n\t\t\t\tloadData(options.data);\n\t\t\t\tloadSetting(options.setting);\n\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction getOptions($groupList) {\n\n\t\tlet params = {};\n\n\t\tif ($size.data('checked', undefined, true)) {\n\t\t\tparams.resize = true;\n\t\t\tparams.width = $canvas.imgWidth;\n\t\t\tparams.height = $canvas.imgHeight;\n\t\t}\n\n\t\tlet result = {};\n\t\t$groupList.$groups.forEach(($group) => {\n\t\t\tresult[$group.name] = {\n\t\t\t\tisShow: $group.isShow,\n\t\t\t\tareas: $group.$areas.map((area) => {\n\t\t\t\t\tlet $area = $(area);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tx1: $area.data('x1'),\n\t\t\t\t\t\tx2: $area.data('x2'),\n\t\t\t\t\t\ty1: $area.data('y1'),\n\t\t\t\t\t\ty2: $area.data('y2')\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t};\n\t\t});\n\n\t\tlet image = $canvas.getImage();\n\n\t\tif (!/^http(s)?:\\/\\//.test(image)) {\n\t\t\timage = '';\n\t\t}\n\n\t\treturn {\n\t\t\timage,\n\t\t\tdata: result,\n\t\t\tsetting: params\n\t\t};\n\t}\n\n\t$index.on('animationend', () => $index.remove());\n\n\t$uploadImg.on('click', () => {\n\t\t$uploader.open({\n\t\t\tname: '图片',\n\t\t\taccept: 'image/*'\n\t\t}).success((data) => {\n\t\t\t$canvas.setImage(data, () => {\n\t\t\t\t$index.addClass('hide');\n\t\t\t\t$groupList.append(new GroupItem());\n\t\t\t\ttoast('加载成功', 'success');\n\t\t\t});\n\t\t});\n\t});\n\n\t$uploadOption.on('click', () => loadOption(true, (img) => {\n\t\t$canvas.setImage(img, () => {\n\t\t\t$index.addClass('hide');\n\t\t\ttoast('加载成功', 'success');\n\t\t});\n\t}));\n\n\t/* 画布操作 */\n\tconst $zoomIn = $('#zoom-in');\n\tconst $zoomOut = $('#zoom-out');\n\tconst $replaceImg = $('#replace-img');\n\tconst $preview = $('#preview');\n\n\t$canvas.bind($groupList);\n\n\t$zoomIn.on('click', () => $canvas.zoomIn());\n\n\t$zoomOut.on('click', () => $canvas.zoomOut());\n\n\t$replaceImg.on('click', () => {\n\t\t$uploader.open({\n\t\t\tname: '图片',\n\t\t\taccept: 'image/*'\n\t\t}).success((data) => {\n\t\t\t$canvas.setImage(data);\n\t\t});\n\t});\n\n\t$preview.on('click', () => {\n\t\tajax('/save', 'POST', getOptions($groupList), (res) => {\n\t\t\ttry {\n\t\t\t\tlet resData = JSON.parse(res.responseText);\n\t\t\t\tif (resData.errcode === 200) {\n\t\t\t\t\twindow.open('/example');\n\t\t\t\t} else {\n\t\t\t\t\ttoast(resData.errmsg, 'error');\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\ttoast('数据格式非JSON', 'error');\n\t\t\t\tthrow new Error('数据格式非JSON');\n\t\t\t}\n\t\t});\n\t});\n\n\n\t/* 分组操作 */\n\tconst $addGroup = $('#add-group');\n\tconst $search = $('#search');\n\tconst $current = $('#current');\n\n\t$groupList.on('current', ($group) => {\n\t\t$current.text($group.name);\n\t}, true, false);\n\n\t$addGroup.on('click', () => {\n\t\t$groupList.append(new GroupItem());\n\t});\n\n\t$search.on('input', () => {\n\t\t$groupList.$groups.forEach(($group) => {\n\t\t\tif ($group.name.indexOf($search.value()) !== -1) {\n\t\t\t\t$group.show();\n\t\t\t} else {\n\t\t\t\t$group.hide();\n\t\t\t}\n\t\t});\n\t});\n\n\n\t/* 标签页切换 */\n\tconst $tabs = $('#tabs');\n\n\t$tabs.find('.tab-item').on('click', function() {\n\t\t$('#' + this.attr('data-type'))\n\t\t\t.show()\n\t\t\t.siblings()\n\t\t\t.hide();\n\n\t\tthis\n\t\t\t.addClass('active')\n\t\t\t.siblings()\n\t\t\t.removeClass('active');\n\t});\n\n\n\t/* 尺寸 */\n\t$size.on('change', () => {\n\t\tif ($size.data('checked', undefined, true)) {\n\t\t\t$sizeInput.removeAttr('disabled');\n\t\t} else {\n\t\t\t$canvas.init();\n\t\t\t$sizeInput.attr('disabled', 'disabled');\n\t\t}\n\t});\n\n\t$sizeWidth.on('blur', () => {\n\t\tlet value = $sizeWidth.value();\n\t\tif (/^\\d+$/.test(value)) {\n\t\t\t$sizeWidth.data('value', value);\n\t\t\t$canvas.imgWidth = parseFloat(value);\n\t\t\t$canvas.update();\n\t\t} else {\n\t\t\t$sizeWidth.value($sizeWidth.data('value'));\n\t\t}\n\t});\n\n\t$sizeHeight.on('blur', () => {\n\t\tlet value = $sizeHeight.value();\n\t\tif (/^\\d+$/.test(value)) {\n\t\t\t$sizeHeight.data('value', value);\n\t\t\t$canvas.imgHeight = parseFloat(value);\n\t\t\t$canvas.update();\n\t\t} else {\n\t\t\t$sizeHeight.value($sizeHeight.data('value'));\n\t\t}\n\t});\n\n\t$canvas.ready(() => {\n\t\t$sizeWidth.value($canvas.imgWidth).data('value', $canvas.imgWidth);\n\t\t$sizeHeight.value($canvas.imgHeight).data('value', $canvas.imgHeight);\n\t});\n\n\n\t\t/* 配置文件 */\n\tlet $options = $('#options');\n\tlet $optionsUpload = $options.find('.js-upload');\n\tlet $optionsDownload = $options.find('.js-download');\n\n\t$optionsDownload.on('click', () => {\n\n\t\tajax('/save', 'POST', getOptions($groupList), (res) => {\n\t\t\ttry {\n\t\t\t\tlet resData = JSON.parse(res.responseText);\n\t\t\t\tif (resData.errcode === 200) {\n\t\t\t\t\twindow.open(resData.data);\n\t\t\t\t} else {\n\t\t\t\t\ttoast(resData.errmsg, 'error');\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\ttoast('数据格式非JSON', 'error');\n\t\t\t\tthrow new Error('数据格式非JSON');\n\t\t\t}\n\t\t});\n\t});\n\n\t$optionsUpload.on('click', () => {\n\t\tpopup({\n\t\t\ttitle: '警告',\n\t\t\tcontent: '加载成功后将清空当前数据<br />是否继续',\n\t\t\tconfirmText: '是',\n\t\t\tcancelText: '否',\n\t\t\tconfirm() {\n\t\t\t\tloadOption(false, () => {\n\t\t\t\t\t$groupList.$groups.remove();\n\t\t\t\t\t$groupList.$groups = new GroupItem([]);\n\t\t\t\t});\n\t\t\t},\n\t\t\tcancel() {\n\t\t\t\ttoast('取消当前操作');\n\t\t\t}\n\t\t});\n\t});\n\n})();","// private property\nconst _keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n// public method for encoding\nmodule.exports.encode = function(input) {\n\n\tlet output = '';\n\tlet chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n\tlet i = 0;\n\n\t// private method for UTF-8 encoding\n\tinput = (function(string) {\n\t\tstring = string.replace(/\\r\\n/g, '\\n');\n\t\tlet utftext = '';\n\t\tfor (let n = 0; n < string.length; n++) {\n\t\t\tlet c = string.charCodeAt(n);\n\t\t\tif (c < 128) {\n\t\t\t\tutftext += String.fromCharCode(c);\n\t\t\t} else if ((c > 127) && (c < 2048)) {\n\t\t\t\tutftext += String.fromCharCode((c >> 6) | 192);\n\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\n\t\t\t} else {\n\t\t\t\tutftext += String.fromCharCode((c >> 12) | 224);\n\t\t\t\tutftext += String.fromCharCode(((c >> 6) & 63) | 128);\n\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\n\t\t\t}\n\n\t\t}\n\t\treturn utftext;\n\t})(input);\n\n\twhile (i < input.length) {\n\n\t\tchr1 = input.charCodeAt(i++);\n\t\tchr2 = input.charCodeAt(i++);\n\t\tchr3 = input.charCodeAt(i++);\n\n\t\tenc1 = chr1 >> 2;\n\t\tenc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n\t\tenc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n\t\tenc4 = chr3 & 63;\n\n\t\tif (isNaN(chr2)) {\n\t\t\tenc3 = enc4 = 64;\n\t\t} else if (isNaN(chr3)) {\n\t\t\tenc4 = 64;\n\t\t}\n\n\t\toutput = output +\n\t\t_keyStr.charAt(enc1) + _keyStr.charAt(enc2) +\n\t\t_keyStr.charAt(enc3) + _keyStr.charAt(enc4);\n\t}\n\n\treturn output;\n};\n\n// public method for decoding\nmodule.exports.decode = function(input) {\n\tlet output = '';\n\tlet chr1, chr2, chr3;\n\tlet enc1, enc2, enc3, enc4;\n\tlet i = 0;\n\n\tinput = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\n\n\twhile (i < input.length) {\n\n\t\tenc1 = _keyStr.indexOf(input.charAt(i++));\n\t\tenc2 = _keyStr.indexOf(input.charAt(i++));\n\t\tenc3 = _keyStr.indexOf(input.charAt(i++));\n\t\tenc4 = _keyStr.indexOf(input.charAt(i++));\n\n\t\tchr1 = (enc1 << 2) | (enc2 >> 4);\n\t\tchr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n\t\tchr3 = ((enc3 & 3) << 6) | enc4;\n\n\t\toutput = output + String.fromCharCode(chr1);\n\n\t\tif (enc3 != 64) {\n\t\t\toutput = output + String.fromCharCode(chr2);\n\t\t}\n\n\t\tif (enc4 != 64) {\n\t\t\toutput = output + String.fromCharCode(chr3);\n\t\t}\n\t}\n\n\t// private method for UTF-8 decoding\n\treturn (function(utftext) {\n\t\tlet string = '';\n\t\tlet i = 0;\n\t\tlet c, c1, c2;\n\n\t\tc = c1 = c2 = 0;\n\n\t\twhile (i < utftext.length) {\n\t\t\tc = utftext.charCodeAt(i);\n\n\t\t\tif (c < 128) {\n\t\t\t\tstring += String.fromCharCode(c);\n\t\t\t\ti++;\n\n\t\t\t} else if ((c > 191) && (c < 224)) {\n\t\t\t\tc1 = utftext.charCodeAt(i + 1);\n\t\t\t\tstring += String.fromCharCode(((c & 31) << 6) | (c1 & 63));\n\t\t\t\ti += 2;\n\n\t\t\t} else {\n\t\t\t\tc1 = utftext.charCodeAt(i + 1);\n\t\t\t\tc2 = utftext.charCodeAt(i + 2);\n\t\t\t\tstring += String.fromCharCode(((c & 15) << 12) | ((c1 & 63) << 6) | (c2 & 63));\n\t\t\t\ti += 3;\n\t\t\t}\n\t\t}\n\n\t\treturn string;\n\t})(output);\n\n};","module.exports = (url, method, data, callback) => {\n\tlet xhr = new XMLHttpRequest();\n\txhr.onreadystatechange = function() {\n\t\tif (xhr.readyState == 4) {\n\t\t\tif (xhr.status == 200) {\n\t\t\t\tcallback(xhr);\n\t\t\t}\n\t\t}\n\t};\n\txhr.open(method, url, true);\n\txhr.setRequestHeader('Content-type', 'application/json');\n\txhr.send(JSON.stringify(data));\n};","const $ = require('./dom.js');\n\nclass Area extends $.class {\n\tconstructor() {\n\t\tsuper(`<div class=\"area\">\n\t\t\t<i class=\"icon icon-error\"></i>\n\t\t</div>`);\n\n\t\tthis\n\t\t\t.find('.icon')\n\t\t\t.on('click', () => {\n\t\t\t\tthis.remove();\n\t\t\t\tthis.emit('delete');\n\t\t\t});\n\t}\n}\n\nmodule.exports = Area;","const $ = require('./dom.js');\nconst util = require('./util.js');\nconst Area = require('./area.js');\n\nclass Canvas extends $.class {\n\n\tconstructor(selector, container) {\n\n\t\tsuper(selector);\n\n\t\tthis.$container = $(container);\n\t\tthis.$img = this.find('.js-pic');\n\t\tthis.$areas = this.find('.js-areas');\n\n\t\tlet self = this;\n\n\t\tfunction toPersent(val, type) {\n\t\t\tlet w = util.toFloat(self.width()); // 地图范围的宽高\n\t\t\tlet h = util.toFloat(self.height()); // 地图范围的宽高\n\t\t\tif (type === 'width') {\n\t\t\t\treturn util.toString(val / w * 100, '%');\n\t\t\t} else if (type === 'height') {\n\t\t\t\treturn util.toString(val / h * 100, '%');\n\t\t\t}\n\t\t}\n\n\t\tfunction update($area) {\n\n\t\t\tlet startX = $area.data('startX');\n\t\t\tlet endX = $area.data('endX');\n\t\t\tlet startY = $area.data('startY');\n\t\t\tlet endY = $area.data('endY');\n\n\t\t\tif (endX >= startX) {\n\t\t\t\t$area.css({\n\t\t\t\t\tleft: toPersent(startX, 'width'),\n\t\t\t\t\twidth: toPersent(endX - startX, 'width')\n\t\t\t\t});\n\n\t\t\t\t$area.data('x1', toPersent(startX, 'width'));\n\t\t\t\t$area.data('x2', toPersent(endX, 'width'));\n\t\t\t} else {\n\t\t\t\t$area.css({\n\t\t\t\t\tleft: toPersent(endX, 'width'),\n\t\t\t\t\twidth: toPersent(startX - endX, 'width')\n\t\t\t\t});\n\n\t\t\t\t$area.data('x1', toPersent(endX, 'width'));\n\t\t\t\t$area.data('x2', toPersent(startX, 'width'));\n\t\t\t}\n\n\t\t\tif (endY >= startY) {\n\t\t\t\t$area.css({\n\t\t\t\t\ttop: toPersent(startY, 'height'),\n\t\t\t\t\theight: toPersent(endY - startY, 'height')\n\t\t\t\t});\n\n\t\t\t\t$area.data('y1', toPersent(startY, 'height'));\n\t\t\t\t$area.data('y2', toPersent(endY, 'height'));\n\t\t\t} else {\n\t\t\t\t$area.css({\n\t\t\t\t\ttop: toPersent(endY, 'height'),\n\t\t\t\t\theight: toPersent(startY - endY, 'height')\n\t\t\t\t});\n\n\t\t\t\t$area.data('y1', toPersent(endY, 'height'));\n\t\t\t\t$area.data('y2', toPersent(startY, 'height'));\n\t\t\t}\n\n\t\t}\n\n\t\tthis.on('mousedown', (e) => {\n\t\t\tlet $target = $(e.target);\n\t\t\tif (e.button === 0 && !$target.hasClass('icon')) {\n\t\t\t\tlet $area = new Area();\n\n\t\t\t\tthis.$currentArea = $area;\n\n\t\t\t\tthis.$currentArea.data({\n\t\t\t\t\tstartX: this.getAbs().x,\n\t\t\t\t\tstartY: this.getAbs().y\n\t\t\t\t});\n\n\t\t\t\tthis.$areas.append($area);\n\n\t\t\t\tthis.$groupList.$groups.$areas.removeClass('hover');\n\n\t\t\t\tthis.$groupList.$currentGroup.append($area);\n\t\t\t}\n\n\t\t});\n\n\t\t$(document).on('mousemove', () => {\n\n\t\t\tif (!this.$currentArea) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet abs = this.getAbs();\n\n\t\t\tif (abs.x < 0) {\n\t\t\t\tabs.x = 0;\n\t\t\t} else if (abs.x > util.toFloat(this.width())) {\n\t\t\t\tabs.x = util.toFloat(this.width());\n\t\t\t}\n\n\t\t\tif (abs.y < 0) {\n\t\t\t\tabs.y = 0;\n\t\t\t} else if (abs.y > util.toFloat(this.height())) {\n\t\t\t\tabs.y = util.toFloat(this.height());\n\t\t\t}\n\n\t\t\tthis.$currentArea.data({\n\t\t\t\tendX: abs.x,\n\t\t\t\tendY: abs.y\n\t\t\t});\n\n\t\t\tupdate(this.$currentArea);\n\t\t});\n\n\t\t$(document).on('mouseup', () => {\n\n\t\t\tif (!this.$currentArea) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$groupList.$groups.$areas.addClass('hover');\n\n\t\t\tlet x1 = util.toFloat(this.$currentArea.data('x1'));\n\t\t\tlet x2 = util.toFloat(this.$currentArea.data('x2'));\n\t\t\tlet y1 = util.toFloat(this.$currentArea.data('y1'));\n\t\t\tlet y2 = util.toFloat(this.$currentArea.data('y2'));\n\n\t\t\tfunction isError(count) {\n\t\t\t\treturn count === undefined || count > 100 || count < 0;\n\t\t\t}\n\n\t\t\tif (isError(x1) || isError(x2) || isError(y1) || isError(y2)) {\n\t\t\t\tthis.$currentArea.remove().emit('delete'); // 移除非法数据\n\t\t\t}\n\n\t\t\tthis.$currentArea = null;\n\t\t});\n\t}\n\n\tbind($groupList) {\n\t\tif (util.isGroupList($groupList)) {\n\t\t\tthis.$groupList = $groupList;\n\t\t}\n\t\treturn this;\n\t}\n\n\tinit() {\n\t\tthis.$img.css('width', '');\n\t\tthis.$img.css('height', '');\n\t\tthis.imgScale = 1;\n\t\tthis.imgWidth = util.toFloat(this.$img.width());\n\t\tthis.imgHeight = util.toFloat(this.$img.height());\n\t\tthis.update();\n\t\tthis.emit('ready');\n\t\treturn this;\n\t}\n\n\tgetAbs(e = window.event) {\n\t\treturn {\n\t\t\tx: e.pageX + this.$container.scrollLeft() - this.offset().left,\n\t\t\ty: e.pageY + this.$container.scrollTop() - this.offset().top\n\t\t};\n\t}\n\n\tupdate() {\n\t\tthis.$img.width(util.toString(this.imgWidth * this.imgScale, 'px'));\n\t\tthis.$img.height(util.toString(this.imgHeight * this.imgScale, 'px'));\n\t\treturn this;\n\t}\n\n\tappend($area) {\n\t\tif (!util.isArea($area)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tthis\n\t\t\t.find('.js-areas')\n\t\t\t.append($area);\n\t}\n\n\tsetImage(src, cb) {\n\t\tthis.$img.attr('src', src);\n\t\tthis.$img.on('load', () => {\n\t\t\tthis.init();\n\t\t\tif (typeof cb === 'function') {\n\t\t\t\tcb();\n\t\t\t}\n\t\t}, true);\n\t\treturn this;\n\t}\n\n\tgetImage() {\n\t\treturn this.$img.attr('src');\n\t}\n\n\tzoomIn(count = 0.1) {\n\t\tthis.imgScale += count;\n\t\tthis.update();\n\t\treturn this;\n\t}\n\n\tzoomOut(count = 0.1) {\n\t\tif (this.imgScale > count * 2) {\n\t\t\tthis.imgScale -= count;\n\t\t\tthis.update();\n\t\t}\n\t\treturn this;\n\t}\n\n\tready(handler) {\n\t\tthis.onready = handler;\n\t\treturn this;\n\t}\n\n}\n\nmodule.exports = Canvas;","(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()({1:[function(require,module,exports){\nconst $ = require('./module/dom.js');\nconst base64 = require('./lib/base64.js');\nconst toast = require('./module/toast.js');\nconst popup = require('./module/popup.js');\nconst ajax = require('./module/ajax.js');\nconst Uploader = require('./module/uploader.js');\nconst Canvas = require('./module/canvas.js');\nconst GroupList = require('./module/group-list.js');\nconst GroupItem = require('./module/group-item.js');\nconst Area = require('./module/area.js');\n\n(function() {\n\n\tconst $uploader = new Uploader('#upload-file');\n\tconst $groupList = new GroupList('#group');\n\tconst $canvas = new Canvas('#canvas', '#container');\n\n\n\t/* 尺寸 */\n\tconst $size = $('#size');\n\tconst $sizeWidth = $('#sizeWidth');\n\tconst $sizeHeight = $('#sizeHeight');\n\tconst $sizeInput = $sizeWidth.concat($sizeHeight);\n\n\n\t/* 索引页 */\n\tconst $index = $('#index');\n\tconst $uploadImg = $('#upload-img');\n\tconst $uploadOption = $('#upload-option');\n\n\tfunction loadData(data) {\n\t\tfor (let name in data) {\n\t\t\tlet item = data[name];\n\t\t\tlet $group = new GroupItem();\n\n\t\t\titem.areas.forEach((area) => {\n\t\t\t\tlet $area = new Area();\n\t\t\t\t$area\n\t\t\t\t\t.data(area)\n\t\t\t\t\t.addClass('hover')\n\t\t\t\t\t.css({\n\t\t\t\t\t\ttop: area.y1,\n\t\t\t\t\t\tleft: area.x1,\n\t\t\t\t\t\twidth: parseFloat(area.x2) - parseFloat(area.x1) + '%',\n\t\t\t\t\t\theight: parseFloat(area.y2) - parseFloat(area.y1) + '%'\n\t\t\t\t\t});\n\t\t\t\t$group.append($area);\n\t\t\t\t$canvas.append($area);\n\t\t\t});\n\n\t\t\t$group.name = name;\n\t\t\t$group.isShow = item.isShow;\n\n\t\t\t$groupList.append($group);\n\t\t}\n\n\t}\n\n\tfunction loadSetting(setting) {\n\t\tif (setting.resize) {\n\t\t\t$size.data('checked', true, true);\n\t\t\tlet flag = true;\n\t\t\t$canvas.ready(() => {\n\t\t\t\tif (flag) {\n\t\t\t\t\t$sizeWidth.value(setting.width).data('value', setting.width);\n\t\t\t\t\t$sizeHeight.value(setting.height).data('value', setting.height);\n\t\t\t\t\t$sizeInput.removeAttr('disabled');\n\t\t\t\t\t$canvas.imgHeight = setting.height;\n\t\t\t\t\t$canvas.imgWidth = setting.width;\n\t\t\t\t\tflag = false;\n\t\t\t\t} else {\n\t\t\t\t\t$sizeWidth.value($canvas.imgWidth).data('value', $canvas.imgWidth);\n\t\t\t\t\t$sizeHeight.value($canvas.imgHeight).data('value', $canvas.imgHeight);\n\t\t\t\t}\n\t\t\t\t$canvas.update();\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction loadOption(isRequire = false, cb) {\n\t\t$uploader.open({\n\t\t\tname: '配置文件',\n\t\t\taccept: 'text/json'\n\t\t}).success((data) => {\n\t\t\tlet options = base64.decode(data.replace('data:;base64,', ''));\n\t\t\ttry {\n\t\t\t\toptions = JSON.parse(options);\n\t\t\t} catch (e) {\n\t\t\t\ttoast('配置文件解析出错', 'error');\n\t\t\t\tthrow new Error('配置文件解析出错');\n\t\t\t}\n\n\t\t\tif (isRequire === true && !options.image) {\n\t\t\t\tpopup({\n\t\t\t\t\tcontent: '当前配置文件缺少图片<br />是否上传图片',\n\t\t\t\t\tconfirmText: '是',\n\t\t\t\t\tcancelText: '否',\n\t\t\t\t\tconfirm() {\n\t\t\t\t\t\t$uploader.open({\n\t\t\t\t\t\t\tname: '图片',\n\t\t\t\t\t\t\taccept: 'image/*'\n\t\t\t\t\t\t}).success((data) => {\n\n\t\t\t\t\t\t\tif (typeof cb === 'function') {\n\t\t\t\t\t\t\t\tcb(data);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tloadData(options.data);\n\t\t\t\t\t\t\tloadSetting(options.setting);\n\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tcancel() {\n\t\t\t\t\t\ttoast('加载数据失败，请先上传图片', 'error');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tif (typeof cb === 'function') {\n\t\t\t\t\tcb(options.image);\n\t\t\t\t}\n\n\t\t\t\tloadData(options.data);\n\t\t\t\tloadSetting(options.setting);\n\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction getOptions($groupList) {\n\n\t\tlet params = {};\n\n\t\tif ($size.data('checked', undefined, true)) {\n\t\t\tparams.resize = true;\n\t\t\tparams.width = $canvas.imgWidth;\n\t\t\tparams.height = $canvas.imgHeight;\n\t\t}\n\n\t\tlet result = {};\n\t\t$groupList.$groups.forEach(($group) => {\n\t\t\tresult[$group.name] = {\n\t\t\t\tisShow: $group.isShow,\n\t\t\t\tareas: $group.$areas.map((area) => {\n\t\t\t\t\tlet $area = $(area);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tx1: $area.data('x1'),\n\t\t\t\t\t\tx2: $area.data('x2'),\n\t\t\t\t\t\ty1: $area.data('y1'),\n\t\t\t\t\t\ty2: $area.data('y2')\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t};\n\t\t});\n\n\t\tlet image = $canvas.getImage();\n\n\t\tif (!/^http(s)?:\\/\\//.test(image)) {\n\t\t\timage = '';\n\t\t}\n\n\t\treturn {\n\t\t\timage,\n\t\t\tdata: result,\n\t\t\tsetting: params\n\t\t};\n\t}\n\n\t$index.on('animationend', () => $index.remove());\n\n\t$uploadImg.on('click', () => {\n\t\t$uploader.open({\n\t\t\tname: '图片',\n\t\t\taccept: 'image/*'\n\t\t}).success((data) => {\n\t\t\t$canvas.setImage(data, () => {\n\t\t\t\t$index.addClass('hide');\n\t\t\t\t$groupList.append(new GroupItem());\n\t\t\t\ttoast('加载成功', 'success');\n\t\t\t});\n\t\t});\n\t});\n\n\t$uploadOption.on('click', () => loadOption(true, (img) => {\n\t\t$canvas.setImage(img, () => {\n\t\t\t$index.addClass('hide');\n\t\t\ttoast('加载成功', 'success');\n\t\t});\n\t}));\n\n\t/* 画布操作 */\n\tconst $zoomIn = $('#zoom-in');\n\tconst $zoomOut = $('#zoom-out');\n\tconst $replaceImg = $('#replace-img');\n\tconst $preview = $('#preview');\n\n\t$canvas.bind($groupList);\n\n\t$zoomIn.on('click', () => $canvas.zoomIn());\n\n\t$zoomOut.on('click', () => $canvas.zoomOut());\n\n\t$replaceImg.on('click', () => {\n\t\t$uploader.open({\n\t\t\tname: '图片',\n\t\t\taccept: 'image/*'\n\t\t}).success((data) => {\n\t\t\t$canvas.setImage(data);\n\t\t});\n\t});\n\n\t$preview.on('click', () => {\n\t\tajax('/save', 'POST', getOptions($groupList), (res) => {\n\t\t\ttry {\n\t\t\t\tlet resData = JSON.parse(res.responseText);\n\t\t\t\tif (resData.errcode === 200) {\n\t\t\t\t\twindow.open('/example');\n\t\t\t\t} else {\n\t\t\t\t\ttoast(resData.errmsg, 'error');\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\ttoast('数据格式非JSON', 'error');\n\t\t\t\tthrow new Error('数据格式非JSON');\n\t\t\t}\n\t\t});\n\t});\n\n\n\t/* 分组操作 */\n\tconst $addGroup = $('#add-group');\n\tconst $search = $('#search');\n\tconst $current = $('#current');\n\n\t$groupList.on('current', ($group) => {\n\t\t$current.text($group.name);\n\t}, true, false);\n\n\t$addGroup.on('click', () => {\n\t\t$groupList.append(new GroupItem());\n\t});\n\n\t$search.on('input', () => {\n\t\t$groupList.$groups.forEach(($group) => {\n\t\t\tif ($group.name.indexOf($search.value()) !== -1) {\n\t\t\t\t$group.show();\n\t\t\t} else {\n\t\t\t\t$group.hide();\n\t\t\t}\n\t\t});\n\t});\n\n\n\t/* 标签页切换 */\n\tconst $tabs = $('#tabs');\n\n\t$tabs.find('.tab-item').on('click', function() {\n\t\t$('#' + this.attr('data-type'))\n\t\t\t.show()\n\t\t\t.siblings()\n\t\t\t.hide();\n\n\t\tthis\n\t\t\t.addClass('active')\n\t\t\t.siblings()\n\t\t\t.removeClass('active');\n\t});\n\n\n\t/* 尺寸 */\n\t$size.on('change', () => {\n\t\tif ($size.data('checked', undefined, true)) {\n\t\t\t$sizeInput.removeAttr('disabled');\n\t\t} else {\n\t\t\t$canvas.init();\n\t\t\t$sizeInput.attr('disabled', 'disabled');\n\t\t}\n\t});\n\n\t$sizeWidth.on('blur', () => {\n\t\tlet value = $sizeWidth.value();\n\t\tif (/^\\d+$/.test(value)) {\n\t\t\t$sizeWidth.data('value', value);\n\t\t\t$canvas.imgWidth = parseFloat(value);\n\t\t\t$canvas.update();\n\t\t} else {\n\t\t\t$sizeWidth.value($sizeWidth.data('value'));\n\t\t}\n\t});\n\n\t$sizeHeight.on('blur', () => {\n\t\tlet value = $sizeHeight.value();\n\t\tif (/^\\d+$/.test(value)) {\n\t\t\t$sizeHeight.data('value', value);\n\t\t\t$canvas.imgHeight = parseFloat(value);\n\t\t\t$canvas.update();\n\t\t} else {\n\t\t\t$sizeHeight.value($sizeHeight.data('value'));\n\t\t}\n\t});\n\n\t$canvas.ready(() => {\n\t\t$sizeWidth.value($canvas.imgWidth).data('value', $canvas.imgWidth);\n\t\t$sizeHeight.value($canvas.imgHeight).data('value', $canvas.imgHeight);\n\t});\n\n\n\t\t/* 配置文件 */\n\tlet $options = $('#options');\n\tlet $optionsUpload = $options.find('.js-upload');\n\tlet $optionsDownload = $options.find('.js-download');\n\n\t$optionsDownload.on('click', () => {\n\n\t\tajax('/save', 'POST', getOptions($groupList), (res) => {\n\t\t\ttry {\n\t\t\t\tlet resData = JSON.parse(res.responseText);\n\t\t\t\tif (resData.errcode === 200) {\n\t\t\t\t\twindow.open(resData.data);\n\t\t\t\t} else {\n\t\t\t\t\ttoast(resData.errmsg, 'error');\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\ttoast('数据格式非JSON', 'error');\n\t\t\t\tthrow new Error('数据格式非JSON');\n\t\t\t}\n\t\t});\n\t});\n\n\t$optionsUpload.on('click', () => {\n\t\tpopup({\n\t\t\ttitle: '警告',\n\t\t\tcontent: '加载成功后将清空当前数据<br />是否继续',\n\t\t\tconfirmText: '是',\n\t\t\tcancelText: '否',\n\t\t\tconfirm() {\n\t\t\t\tloadOption(false, () => {\n\t\t\t\t\t$groupList.$groups.remove();\n\t\t\t\t\t$groupList.$groups = new GroupItem([]);\n\t\t\t\t});\n\t\t\t},\n\t\t\tcancel() {\n\t\t\t\ttoast('取消当前操作');\n\t\t\t}\n\t\t});\n\t});\n\n})();\n},{\"./lib/base64.js\":2,\"./module/ajax.js\":3,\"./module/area.js\":4,\"./module/canvas.js\":5,\"./module/dom.js\":6,\"./module/group-item.js\":7,\"./module/group-list.js\":8,\"./module/popup.js\":9,\"./module/toast.js\":10,\"./module/uploader.js\":11}],2:[function(require,module,exports){\n// private property\nconst _keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n// public method for encoding\nmodule.exports.encode = function(input) {\n\n\tlet output = '';\n\tlet chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n\tlet i = 0;\n\n\t// private method for UTF-8 encoding\n\tinput = (function(string) {\n\t\tstring = string.replace(/\\r\\n/g, '\\n');\n\t\tlet utftext = '';\n\t\tfor (let n = 0; n < string.length; n++) {\n\t\t\tlet c = string.charCodeAt(n);\n\t\t\tif (c < 128) {\n\t\t\t\tutftext += String.fromCharCode(c);\n\t\t\t} else if ((c > 127) && (c < 2048)) {\n\t\t\t\tutftext += String.fromCharCode((c >> 6) | 192);\n\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\n\t\t\t} else {\n\t\t\t\tutftext += String.fromCharCode((c >> 12) | 224);\n\t\t\t\tutftext += String.fromCharCode(((c >> 6) & 63) | 128);\n\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\n\t\t\t}\n\n\t\t}\n\t\treturn utftext;\n\t})(input);\n\n\twhile (i < input.length) {\n\n\t\tchr1 = input.charCodeAt(i++);\n\t\tchr2 = input.charCodeAt(i++);\n\t\tchr3 = input.charCodeAt(i++);\n\n\t\tenc1 = chr1 >> 2;\n\t\tenc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n\t\tenc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n\t\tenc4 = chr3 & 63;\n\n\t\tif (isNaN(chr2)) {\n\t\t\tenc3 = enc4 = 64;\n\t\t} else if (isNaN(chr3)) {\n\t\t\tenc4 = 64;\n\t\t}\n\n\t\toutput = output +\n\t\t_keyStr.charAt(enc1) + _keyStr.charAt(enc2) +\n\t\t_keyStr.charAt(enc3) + _keyStr.charAt(enc4);\n\t}\n\n\treturn output;\n};\n\n// public method for decoding\nmodule.exports.decode = function(input) {\n\tlet output = '';\n\tlet chr1, chr2, chr3;\n\tlet enc1, enc2, enc3, enc4;\n\tlet i = 0;\n\n\tinput = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\n\n\twhile (i < input.length) {\n\n\t\tenc1 = _keyStr.indexOf(input.charAt(i++));\n\t\tenc2 = _keyStr.indexOf(input.charAt(i++));\n\t\tenc3 = _keyStr.indexOf(input.charAt(i++));\n\t\tenc4 = _keyStr.indexOf(input.charAt(i++));\n\n\t\tchr1 = (enc1 << 2) | (enc2 >> 4);\n\t\tchr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n\t\tchr3 = ((enc3 & 3) << 6) | enc4;\n\n\t\toutput = output + String.fromCharCode(chr1);\n\n\t\tif (enc3 != 64) {\n\t\t\toutput = output + String.fromCharCode(chr2);\n\t\t}\n\n\t\tif (enc4 != 64) {\n\t\t\toutput = output + String.fromCharCode(chr3);\n\t\t}\n\t}\n\n\t// private method for UTF-8 decoding\n\treturn (function(utftext) {\n\t\tlet string = '';\n\t\tlet i = 0;\n\t\tlet c, c1, c2;\n\n\t\tc = c1 = c2 = 0;\n\n\t\twhile (i < utftext.length) {\n\t\t\tc = utftext.charCodeAt(i);\n\n\t\t\tif (c < 128) {\n\t\t\t\tstring += String.fromCharCode(c);\n\t\t\t\ti++;\n\n\t\t\t} else if ((c > 191) && (c < 224)) {\n\t\t\t\tc1 = utftext.charCodeAt(i + 1);\n\t\t\t\tstring += String.fromCharCode(((c & 31) << 6) | (c1 & 63));\n\t\t\t\ti += 2;\n\n\t\t\t} else {\n\t\t\t\tc1 = utftext.charCodeAt(i + 1);\n\t\t\t\tc2 = utftext.charCodeAt(i + 2);\n\t\t\t\tstring += String.fromCharCode(((c & 15) << 12) | ((c1 & 63) << 6) | (c2 & 63));\n\t\t\t\ti += 3;\n\t\t\t}\n\t\t}\n\n\t\treturn string;\n\t})(output);\n\n};\n},{}],3:[function(require,module,exports){\nmodule.exports = (url, method, data, callback) => {\n\tlet xhr = new XMLHttpRequest();\n\txhr.onreadystatechange = function() {\n\t\tif (xhr.readyState == 4) {\n\t\t\tif (xhr.status == 200) {\n\t\t\t\tcallback(xhr);\n\t\t\t}\n\t\t}\n\t};\n\txhr.open(method, url, true);\n\txhr.setRequestHeader('Content-type', 'application/json');\n\txhr.send(JSON.stringify(data));\n};\n},{}],4:[function(require,module,exports){\nconst $ = require('./dom.js');\n\nclass Area extends $.class {\n\tconstructor() {\n\t\tsuper(`<div class=\"area\">\n\t\t\t<i class=\"icon icon-error\"></i>\n\t\t</div>`);\n\n\t\tthis\n\t\t\t.find('.icon')\n\t\t\t.on('click', () => {\n\t\t\t\tthis.remove();\n\t\t\t\tthis.emit('delete');\n\t\t\t});\n\t}\n}\n\nmodule.exports = Area;\n},{\"./dom.js\":6}],5:[function(require,module,exports){\nconst $ = require('./dom.js');\nconst util = require('./util.js');\nconst Area = require('./area.js');\n\nclass Canvas extends $.class {\n\n\tconstructor(selector, container) {\n\n\t\tsuper(selector);\n\n\t\tthis.$container = $(container);\n\t\tthis.$img = this.find('.js-pic');\n\t\tthis.$areas = this.find('.js-areas');\n\n\t\tlet self = this;\n\n\t\tfunction toPersent(val, type) {\n\t\t\tlet w = util.toFloat(self.width()); // 地图范围的宽高\n\t\t\tlet h = util.toFloat(self.height()); // 地图范围的宽高\n\t\t\tif (type === 'width') {\n\t\t\t\treturn util.toString(val / w * 100, '%');\n\t\t\t} else if (type === 'height') {\n\t\t\t\treturn util.toString(val / h * 100, '%');\n\t\t\t}\n\t\t}\n\n\t\tfunction update($area) {\n\n\t\t\tlet startX = $area.data('startX');\n\t\t\tlet endX = $area.data('endX');\n\t\t\tlet startY = $area.data('startY');\n\t\t\tlet endY = $area.data('endY');\n\n\t\t\tif (endX >= startX) {\n\t\t\t\t$area.css({\n\t\t\t\t\tleft: toPersent(startX, 'width'),\n\t\t\t\t\twidth: toPersent(endX - startX, 'width')\n\t\t\t\t});\n\n\t\t\t\t$area.data('x1', toPersent(startX, 'width'));\n\t\t\t\t$area.data('x2', toPersent(endX, 'width'));\n\t\t\t} else {\n\t\t\t\t$area.css({\n\t\t\t\t\tleft: toPersent(endX, 'width'),\n\t\t\t\t\twidth: toPersent(startX - endX, 'width')\n\t\t\t\t});\n\n\t\t\t\t$area.data('x1', toPersent(endX, 'width'));\n\t\t\t\t$area.data('x2', toPersent(startX, 'width'));\n\t\t\t}\n\n\t\t\tif (endY >= startY) {\n\t\t\t\t$area.css({\n\t\t\t\t\ttop: toPersent(startY, 'height'),\n\t\t\t\t\theight: toPersent(endY - startY, 'height')\n\t\t\t\t});\n\n\t\t\t\t$area.data('y1', toPersent(startY, 'height'));\n\t\t\t\t$area.data('y2', toPersent(endY, 'height'));\n\t\t\t} else {\n\t\t\t\t$area.css({\n\t\t\t\t\ttop: toPersent(endY, 'height'),\n\t\t\t\t\theight: toPersent(startY - endY, 'height')\n\t\t\t\t});\n\n\t\t\t\t$area.data('y1', toPersent(endY, 'height'));\n\t\t\t\t$area.data('y2', toPersent(startY, 'height'));\n\t\t\t}\n\n\t\t}\n\n\t\tthis.on('mousedown', (e) => {\n\t\t\tlet $target = $(e.target);\n\t\t\tif (e.button === 0 && !$target.hasClass('icon')) {\n\t\t\t\tlet $area = new Area();\n\n\t\t\t\tthis.$currentArea = $area;\n\n\t\t\t\tthis.$currentArea.data({\n\t\t\t\t\tstartX: this.getAbs().x,\n\t\t\t\t\tstartY: this.getAbs().y\n\t\t\t\t});\n\n\t\t\t\tthis.$areas.append($area);\n\n\t\t\t\tthis.$groupList.$groups.$areas.removeClass('hover');\n\n\t\t\t\tthis.$groupList.$currentGroup.append($area);\n\t\t\t}\n\n\t\t});\n\n\t\t$(document).on('mousemove', () => {\n\n\t\t\tif (!this.$currentArea) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet abs = this.getAbs();\n\n\t\t\tif (abs.x < 0) {\n\t\t\t\tabs.x = 0;\n\t\t\t} else if (abs.x > util.toFloat(this.width())) {\n\t\t\t\tabs.x = util.toFloat(this.width());\n\t\t\t}\n\n\t\t\tif (abs.y < 0) {\n\t\t\t\tabs.y = 0;\n\t\t\t} else if (abs.y > util.toFloat(this.height())) {\n\t\t\t\tabs.y = util.toFloat(this.height());\n\t\t\t}\n\n\t\t\tthis.$currentArea.data({\n\t\t\t\tendX: abs.x,\n\t\t\t\tendY: abs.y\n\t\t\t});\n\n\t\t\tupdate(this.$currentArea);\n\t\t});\n\n\t\t$(document).on('mouseup', () => {\n\n\t\t\tif (!this.$currentArea) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$groupList.$groups.$areas.addClass('hover');\n\n\t\t\tlet x1 = util.toFloat(this.$currentArea.data('x1'));\n\t\t\tlet x2 = util.toFloat(this.$currentArea.data('x2'));\n\t\t\tlet y1 = util.toFloat(this.$currentArea.data('y1'));\n\t\t\tlet y2 = util.toFloat(this.$currentArea.data('y2'));\n\n\t\t\tfunction isError(count) {\n\t\t\t\treturn count === undefined || count > 100 || count < 0;\n\t\t\t}\n\n\t\t\tif (isError(x1) || isError(x2) || isError(y1) || isError(y2)) {\n\t\t\t\tthis.$currentArea.remove().emit('delete'); // 移除非法数据\n\t\t\t}\n\n\t\t\tthis.$currentArea = null;\n\t\t});\n\t}\n\n\tbind($groupList) {\n\t\tif (util.isGroupList($groupList)) {\n\t\t\tthis.$groupList = $groupList;\n\t\t}\n\t\treturn this;\n\t}\n\n\tinit() {\n\t\tthis.$img.css('width', '');\n\t\tthis.$img.css('height', '');\n\t\tthis.imgScale = 1;\n\t\tthis.imgWidth = util.toFloat(this.$img.width());\n\t\tthis.imgHeight = util.toFloat(this.$img.height());\n\t\tthis.update();\n\t\tthis.emit('ready');\n\t\treturn this;\n\t}\n\n\tgetAbs(e = window.event) {\n\t\treturn {\n\t\t\tx: e.pageX + this.$container.scrollLeft() - this.offset().left,\n\t\t\ty: e.pageY + this.$container.scrollTop() - this.offset().top\n\t\t};\n\t}\n\n\tupdate() {\n\t\tthis.$img.width(util.toString(this.imgWidth * this.imgScale, 'px'));\n\t\tthis.$img.height(util.toString(this.imgHeight * this.imgScale, 'px'));\n\t\treturn this;\n\t}\n\n\tappend($area) {\n\t\tif (!util.isArea($area)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tthis\n\t\t\t.find('.js-areas')\n\t\t\t.append($area);\n\t}\n\n\tsetImage(src, cb) {\n\t\tthis.$img.attr('src', src);\n\t\tthis.$img.on('load', () => {\n\t\t\tthis.init();\n\t\t\tif (typeof cb === 'function') {\n\t\t\t\tcb();\n\t\t\t}\n\t\t}, true);\n\t\treturn this;\n\t}\n\n\tgetImage() {\n\t\treturn this.$img.attr('src');\n\t}\n\n\tzoomIn(count = 0.1) {\n\t\tthis.imgScale += count;\n\t\tthis.update();\n\t\treturn this;\n\t}\n\n\tzoomOut(count = 0.1) {\n\t\tif (this.imgScale > count * 2) {\n\t\t\tthis.imgScale -= count;\n\t\t\tthis.update();\n\t\t}\n\t\treturn this;\n\t}\n\n\tready(handler) {\n\t\tthis.onready = handler;\n\t\treturn this;\n\t}\n\n}\n\nmodule.exports = Canvas;\n},{\"./area.js\":4,\"./dom.js\":6,\"./util.js\":12}],6:[function(require,module,exports){\nlet $;\n\nclass DOM {\n\n\tconstructor(selector, contexts = document) {\n\n\t\tif (!Array.isArray(contexts)) {\n\t\t\tthis.contexts = [contexts];\n\t\t} else {\n\t\t\tthis.contexts = contexts;\n\t\t}\n\n\t\tif (typeof selector === 'string') {\n\t\t\tif (/^<[\\s\\S]+>$/.test(selector)) {\n\t\t\t\tlet $temp = document.createElement('div');\n\t\t\t\t$temp.innerHTML = selector;\n\t\t\t\tthis.nodes = [$temp.firstChild];\n\t\t\t} else {\n\t\t\t\tthis.nodes = [];\n\n\t\t\t\tthis.contexts.forEach((context) => {\n\t\t\t\t\tthis.nodes.push(...context.querySelectorAll(selector));\n\t\t\t\t});\n\n\t\t\t}\n\t\t} else if (selector instanceof DOM) {\n\t\t\tthis.contexts = selector.contexts;\n\t\t\tthis.nodes = selector.nodes;\n\t\t} else if (Array.isArray(selector)) {\n\t\t\tthis.nodes = selector.filter((node) => {\n\t\t\t\treturn !!node;\n\t\t\t});\n\t\t} else if (selector) {\n\t\t\tthis.nodes = [selector];\n\t\t} else {\n\t\t\tthis.nodes = [];\n\t\t}\n\n\t}\n\n\teach(callback) {\n\t\tthis.nodes.forEach(callback);\n\t\treturn this;\n\t}\n\n\tmap(callback) {\n\t\treturn this.nodes.map(callback);\n\t}\n\n\tfilter(callback) {\n\t\treturn $(this.nodes.filter(callback));\n\t}\n\n\tget(index) {\n\t\treturn this.nodes[index];\n\t}\n\n\teq(index) {\n\t\treturn $(this.nodes[index]);\n\t}\n\n\tfind(selector) {\n\t\treturn $(selector, this.nodes);\n\t}\n\n\tsize() {\n\t\treturn this.nodes.length;\n\t}\n\n\tequals(selector) {\n\t\treturn this.nodes[0] === $(selector).nodes[0];\n\t}\n\n\tconcat(selector) {\n\t\treturn $([...$(selector).nodes, ...this.nodes]);\n\t}\n\n\tpush(selector) {\n\t\treturn this.nodes.push(...$(selector).nodes);\n\t}\n\n\tsplice(index, count = 1, ...selector) {\n\t\tthis.nodes.splice(index, count, ...$(selector).nodes);\n\t\treturn this;\n\t}\n\n\tindex(selector) {\n\t\treturn this.nodes.indexOf($(selector).nodes[0]);\n\t}\n\n\ton(eventName, handler, isOnly = false, isOrigin = true) {\n\t\tlet events = eventName.split(' ');\n\t\tif (isOnly) {\n\t\t\tthis.each((node) => {\n\t\t\t\tevents.forEach((event) => {\n\t\t\t\t\tif (isOrigin) {\n\t\t\t\t\t\tnode['on' + event] = function() {\n\t\t\t\t\t\t\treturn handler.call($(node), ...arguments);\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode['_on' + event] = function() {\n\t\t\t\t\t\t\treturn handler.call($(node), ...arguments);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tthis.each((node) => {\n\t\t\t\tevents.forEach((event) => {\n\t\t\t\t\tnode.addEventListener(event, function() {\n\t\t\t\t\t\thandler.call($(node), ...arguments);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn this;\n\t}\n\n\toff(eventName, handler) {\n\t\tthis.each((node) => {\n\t\t\tnode.removeEventListener(eventName, handler);\n\t\t\tnode['on' + eventName] = null;\n\t\t\tnode['_on' + eventName] = null;\n\t\t});\n\t\treturn this;\n\t}\n\n\temit(event, ...params) {\n\t\tlet result = [];\n\t\tthis.each((node) => {\n\t\t\tif (typeof this['on' + event] === 'function') {\n\t\t\t\tresult.push(this['on' + event](...params));\n\t\t\t} else if (typeof node['on' + event] === 'function') {\n\t\t\t\tresult.push(node['on' + event](...params));\n\t\t\t} else if (typeof node['_on' + event] === 'function') {\n\t\t\t\tresult.push(node['_on' + event](...params));\n\t\t\t}\n\t\t});\n\t\treturn result.length > 1 ? result : result[0];\n\t}\n\n\tattr(key, value) {\n\t\tif (typeof key === 'object') {\n\t\t\tthis.each((node) => {\n\t\t\t\tfor (let name in key) {\n\t\t\t\t\tnode.setAttribute(name, key[name]);\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (value !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.setAttribute(key, value);\n\t\t\t});\n\t\t} else {\n\t\t\treturn this.nodes.map((node) => {\n\t\t\t\treturn node.getAttribute(key);\n\t\t\t}).join('');\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tremoveAttr(key) {\n\t\tthis.each((node) => {\n\t\t\tnode.removeAttribute(key);\n\t\t});\n\t\treturn this;\n\t}\n\n\tdata(key, value, isOrigin = false) {\n\t\tif (typeof key === 'object') {\n\t\t\tthis.each((node) => {\n\t\t\t\tfor (let name in key) {\n\t\t\t\t\tif (isOrigin) {\n\t\t\t\t\t\tnode[name] = key[name];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode['_' + name] = key[name];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (value !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tif (isOrigin) {\n\t\t\t\t\tnode[key] = value;\n\t\t\t\t} else {\n\t\t\t\t\tnode['_' + key] = value;\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tif (isOrigin) {\n\t\t\t\treturn this.get(0)[key];\n\t\t\t} else {\n\t\t\t\treturn this.get(0)['_' + key];\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\taddClass(...names) {\n\t\tthis.each((node) => {\n\t\t\tlet classNames = node.className.split(' ');\n\n\t\t\tnames.forEach((name) => {\n\t\t\t\tif (classNames.indexOf(name) === -1) {\n\t\t\t\t\tclassNames.push(name);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tnode.className = classNames.join(' ');\n\t\t});\n\t\treturn this;\n\t}\n\n\tremoveClass(...names) {\n\t\tthis.each((node) => {\n\t\t\tlet classNames = node.className.split(' ');\n\n\t\t\tnames.forEach((name) => {\n\t\t\t\tlet index = classNames.indexOf(name);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tclassNames.splice(index, 1);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tnode.className = classNames.join(' ');\n\t\t});\n\t\treturn this;\n\t}\n\n\thasClass(name) {\n\t\treturn this.nodes.some((node) => {\n\t\t\treturn node.className.indexOf(name) !== -1;\n\t\t});\n\t}\n\n\tcss(key, val) {\n\t\tif (typeof key === 'object') {\n\t\t\tthis.each((node) => {\n\t\t\t\tfor (let name in key) {\n\t\t\t\t\tnode.style[name] = key[name];\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (val !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.style[key] = val;\n\t\t\t});\n\t\t} else if ('getComputedStyle' in window) {\n\t\t\treturn window.getComputedStyle(this.get(0))[key];\n\t\t} else {\n\t\t\treturn this.get(0).style[key];\n\t\t}\n\t}\n\n\twidth(val) {\n\t\treturn this.css('width', val);\n\t}\n\n\theight(val) {\n\t\treturn this.css('height', val);\n\t}\n\n\tappend(selector) {\n\t\tthis.each((node) => {\n\t\t\t$(selector).each((n) => {\n\t\t\t\tnode.appendChild(n);\n\t\t\t});\n\t\t});\n\t\treturn this;\n\t}\n\n\tremove() {\n\t\tthis.each((node) => {\n\t\t\tnode.remove();\n\t\t});\n\t\treturn this;\n\t}\n\n\treplace(selector) {\n\t\tthis.each((node) => {\n\t\t\tnode.parentNode.replaceChild($(selector).get(0), node);\n\t\t});\n\t\treturn this;\n\t}\n\n\thtml(html) {\n\t\tif (html !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.innerHTML = html;\n\t\t\t});\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.get(0).innerHTML;\n\t\t}\n\t}\n\n\ttext(str) {\n\t\tif (str !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.innerText = str;\n\t\t\t});\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.get(0).innerText;\n\t\t}\n\t}\n\n\tvalue(val) {\n\t\tif (val !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.value = val;\n\t\t\t});\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.get(0).value;\n\t\t}\n\t}\n\n\tparent() {\n\t\treturn $(this.nodes.map((node) => {\n\t\t\treturn node.parentNode;\n\t\t}));\n\t}\n\n\tchildren() {\n\t\tlet result = [];\n\t\tthis.each((node) => {\n\t\t\tresult.push(...node.children);\n\t\t});\n\t\treturn $(result);\n\t}\n\n\tsiblings() {\n\t\treturn this.parent().children().filter((node) => {\n\t\t\treturn this.nodes.indexOf(node) === -1;\n\t\t});\n\t}\n\n\tshow() {\n\t\tthis.css('display', '');\n\t\treturn this;\n\t}\n\n\thide() {\n\t\tthis.css('display', 'none');\n\t\treturn this;\n\t}\n\n\toffset() {\n\t\treturn {\n\t\t\tleft: this.get(0).offsetLeft,\n\t\t\ttop: this.get(0).offsetTop\n\t\t};\n\t}\n\n\tscrollLeft() {\n\t\treturn this.get(0).scrollLeft;\n\t}\n\n\tscrollTop() {\n\t\treturn this.get(0).scrollTop;\n\t}\n\n\tclick() {\n\t\tthis.each((node) => {\n\t\t\tnode.click();\n\t\t});\n\t\treturn this;\n\t}\n\n}\n\n$ = (selector, contexts) => {\n\tif (selector instanceof DOM) {\n\t\treturn selector;\n\t} else {\n\t\treturn new DOM(selector, contexts);\n\t}\n};\n\n$.class = DOM;\n\nmodule.exports = $;\n},{}],7:[function(require,module,exports){\nconst $ = require('./dom.js');\nconst util = require('./util.js');\nconst popup = require('./popup.js');\n\nclass GroupItem extends $.class {\n\tconstructor(seletor) {\n\n\t\tif (seletor) {\n\t\t\tsuper(seletor);\n\t\t\treturn;\n\t\t}\n\n\t\tsuper(`<li class=\"item mark\">\n\t\t\t<span class=\"status\">\n\t\t\t\t<i class=\"js-status icon icon-show\" title=\"隐藏\"></i>\n\t\t\t</span>\n\t\t\t\n\t\t\t<p class=\"js-name single-line\" title=\"分组名\">分组名</p>\n\t\t\t<input class=\"js-input edit-text\" autocomplete=\"off\" style=\"display: none;\"/>\n\n\t\t\t<span class=\"ctrl\">\n\t\t\t\t<i class=\"js-edit icon icon-edit\" title=\"重命名\"></i>\n\t\t\t\t<i class=\"js-submit icon icon-submit\" title=\"确定\" style=\"display: none;\"></i>\n\t\t\t\t<i class=\"js-delete icon icon-delete\" title=\"删除\"></i>\n\t\t\t</span>\n\t\t</li>`);\n\n\t\tthis.$areas = $();\n\n\t\t// 选中\n\t\tlet $nameText = this.find('.js-name');\n\n\t\t$nameText.on('click', () => {\n\t\t\tthis\n\t\t\t\t.addClass('active')\n\t\t\t\t.siblings()\n\t\t\t\t.removeClass('active');\n\n\t\t\tthis.emit('choose');\n\t\t});\n\n\t\t// 显示和隐藏\n\t\tlet $status = this.find('.js-status');\n\n\t\t$status.on('click', () => {\n\n\t\t\tthis.isShow = !$status.hasClass('icon-show');\n\n\t\t});\n\n\t\t// 标题编辑和保存\n\t\tlet $nameInput = this.find('.js-input');\n\t\tlet $edit = this.find('.js-edit');\n\t\tlet $submit = this.find('.js-submit');\n\n\t\t$edit.on('click', () => {\n\n\t\t\t$edit.hide();\n\t\t\t$submit.show();\n\t\t\t$nameText.hide();\n\t\t\t$nameInput\n\t\t\t\t.show()\n\t\t\t\t.value($nameText.text());\n\t\t});\n\n\t\t$submit.on('click', () => {\n\n\t\t\tlet name = $nameInput.value();\n\n\t\t\tlet flag = this.emit('rename', name);\n\n\t\t\tif (flag === false) {\n\t\t\t\tname = $nameText.text();\n\t\t\t}\n\n\t\t\t$edit.show();\n\t\t\t$submit.hide();\n\t\t\t$nameInput.hide();\n\t\t\t$nameText.show();\n\n\t\t\tthis.name = name;\n\n\t\t});\n\n\t\t$nameInput.on('blur', () => $submit.click());\n\n\t\t// 删除\n\t\tlet $delete = this.find('.js-delete');\n\n\t\t$delete.on('click', () => {\n\t\t\tpopup({\n\t\t\t\tcontent: '是否确认删除分组，<br />删除后将不可恢复。',\n\t\t\t\tconfirm: () => {\n\t\t\t\t\tlet flag = this.emit('delete');\n\t\t\t\t\tif (flag !== false) {\n\t\t\t\t\t\tsuper.remove();\n\t\t\t\t\t\tthis.$areas.remove();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t}\n\n\tset name(val) {\n\t\tthis\n\t\t\t.data('name', val)\n\t\t\t.find('.js-name')\n\t\t\t.attr('title', val)\n\t\t\t.text(val);\n\t}\n\n\tget name() {\n\t\tif (this.size() > 1) {\n\t\t\treturn '分组集';\n\t\t}\n\t\treturn this.data('name');\n\t}\n\n\tset isShow(val) {\n\t\tlet $status = this.find('.js-status');\n\n\t\tif (val) {\n\t\t\tthis.$areas.show();\n\t\t\t$status\n\t\t\t\t\t.addClass('icon-show')\n\t\t\t\t\t.removeClass('icon-hide')\n\t\t\t\t\t.attr('title', '显示');\n\t\t} else {\n\t\t\tthis.$areas.hide();\n\t\t\t$status\n\t\t\t\t\t.addClass('icon-hide')\n\t\t\t\t\t.removeClass('icon-show')\n\t\t\t\t\t.attr('title', '显示');\n\t\t}\n\t\tthis.data('isShow', val);\n\t}\n\n\tget isShow() {\n\t\tlet result = this.data('isShow');\n\t\treturn result === undefined ? true : result;\n\t}\n\n\tset $areas(val) {\n\t\tthis.data('$areas', val);\n\t}\n\n\tget $areas() {\n\t\tif (this.size() > 1) {\n\t\t\tlet $result = $();\n\t\t\tthis.forEach(($group) => {\n\t\t\t\t$result.push($group.$areas);\n\t\t\t});\n\t\t\treturn $result;\n\t\t}\n\t\treturn this.data('$areas');\n\t}\n\n\n\tforEach(callback) {\n\t\tsuper.each((node) => {\n\t\t\tcallback(new GroupItem(node));\n\t\t});\n\t}\n\n\teq(index) {\n\t\treturn new GroupItem(super.eq(index));\n\t}\n\n\tremove() {\n\t\tthis.$areas.remove();\n\t\tsuper.remove();\n\t}\n\n\tappend($area) {\n\t\tif (!util.isArea($area)) {\n\t\t\treturn this;\n\t\t}\n\n\t\t$area.on('delete', () => {\n\t\t\tthis.$areas.splice(this.$areas.index($area));\n\t\t}, true, false);\n\n\t\tthis.$areas.push($area);\n\t\treturn this;\n\t}\n\n}\n\nmodule.exports = GroupItem;\n},{\"./dom.js\":6,\"./popup.js\":9,\"./util.js\":12}],8:[function(require,module,exports){\nconst $ = require('./dom.js');\nconst util = require('./util.js');\nconst toast = require('./toast.js');\nconst GroupItem = require('./group-item.js');\n\nclass GroupList extends $.class {\n\tconstructor(selector) {\n\t\tsuper(selector);\n\n\t\tthis.$groups = new GroupItem([]);\n\n\t}\n\n\tcheck() {\n\t\tif (!this.$groups.hasClass('active') && this.$groups.size() > 0) {\n\t\t\tlet $group = this.$groups.eq(0);\n\t\t\tthis.$currentGroup = $group;\n\t\t\tthis.emit('current', $group.addClass('active'));\n\t\t}\n\t\treturn this;\n\t}\n\n\tfindByName(name) {\n\t\tlet $result = null;\n\n\t\tthis.$groups.forEach(($group) => {\n\t\t\tif ($group.name === name) {\n\t\t\t\t$result = $group;\n\t\t\t}\n\t\t});\n\t\treturn $result;\n\t}\n\n\tappend($group) {\n\t\tif (!util.isGroupItem($group)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tfor (let i = 1; !$group.name; i++) {\n\t\t\tlet name = '分组' + i;\n\n\t\t\tif (!this.findByName(name)) {\n\t\t\t\t$group.name = name;\n\t\t\t}\n\t\t}\n\n\t\t$group.on('choose', () => {\n\t\t\tthis.$currentGroup = $group;\n\t\t\tthis.emit('current', $group);\n\t\t}, true, false);\n\n\t\t$group.on('delete', () => {\n\t\t\tif (this.$groups.size() > 1) {\n\t\t\t\tlet index = this.$groups.index($group);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tthis.$groups.splice(index);\n\t\t\t\t}\n\t\t\t\tthis.check();\n\t\t\t} else {\n\t\t\t\ttoast('删除失败，至少保留一个分组', 'error');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t}, true, false);\n\n\t\t$group.on('rename', (name) => {\n\t\t\tlet $result = this.findByName(name);\n\t\t\tif ($result && !$result.equals($group)) {\n\t\t\t\ttoast('名称已存在', 'error');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}, true, false);\n\n\t\tsuper.append($group);\n\t\tthis.$groups.push($group);\n\t\tthis.check();\n\t\treturn this;\n\t}\n\n}\n\nmodule.exports = GroupList;\n},{\"./dom.js\":6,\"./group-item.js\":7,\"./toast.js\":10,\"./util.js\":12}],9:[function(require,module,exports){\nconst $ = require('./dom.js');\n\nlet $body = $('body');\n\nlet $popup = $(`<div class=\"popup\">\n\t<div class=\"box\">\n\t\t<div class=\"js-title title\"></div>\n\t\t<div class=\"js-content content\"></div>\n\t\t<div class=\"btns\">\n\t\t\t<button class=\"js-cancel cancel\">取消</button>\n\t\t\t<button class=\"js-confirm confirm ml\">确定</button>\n\t\t</div>\n\t</div>\n</div>`);\n\nlet $title = $popup.find('.js-title');\nlet $content = $popup.find('.js-content');\nlet $cancel = $popup.find('.js-cancel');\nlet $confirm = $popup.find('.js-confirm');\n\n$popup.on('animationend', () => {\n\tif ($popup.hasClass('fade-out')) {\n\t\t$popup.removeClass('fade-out');\n\t\t$popup.remove();\n\t}\n\n\tif ($popup.hasClass('fade-in')) {\n\t\t$popup.removeClass('fade-in');\n\t}\n});\n\nmodule.exports = (options = {}) => {\n\n\tif (typeof options === 'string') {\n\t\toptions = {\n\t\t\tcontent: options\n\t\t};\n\t}\n\n\t$title.text(options.title || '提示');\n\n\t$content.html(options.content || '');\n\n\tif (options.cancelText) {\n\t\t$cancel.text(options.cancelText);\n\t}\n\n\t$cancel.on('click', () => {\n\t\tif (typeof options.cancel === 'function') {\n\t\t\tlet flag = options.cancel();\n\t\t\tif (flag === 'false') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t$popup.addClass('fade-out');\n\t}, true);\n\n\tif (options.confirmText) {\n\t\t$confirm.text(options.confirmText);\n\t}\n\n\t$confirm.on('click', () => {\n\t\tif (typeof options.confirm === 'function') {\n\t\t\tlet flag = options.confirm();\n\t\t\tif (flag === 'false') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t$popup.addClass('fade-out');\n\t}, true);\n\n\t$body.append($popup.addClass('fade-in'));\n};\n},{\"./dom.js\":6}],10:[function(require,module,exports){\nconst $ = require('./dom.js');\n\nlet $body = $('body');\n\nlet $toast = $(`<div class=\"toast\">\n\t<i class=\"js-icon icon\"></i>\n\t<span class=\"js-text\"></span>\n</div>`);\n\nlet $icon = $toast.find('.js-icon');\nlet $text = $toast.find('.js-text');\n\n$toast.on('animationend', () => {\n\t$toast.remove();\n});\n\nmodule.exports = (str, type = 'prompt') => {\n\t$toast\n\t\t.removeClass('success')\n\t\t.removeClass('error')\n\t\t.removeClass('prompt')\n\t\t.addClass(type);\n\n\t$icon\n\t\t.removeClass('icon-success')\n\t\t.removeClass('icon-error')\n\t\t.removeClass('icon-prompt')\n\t\t.addClass(`icon-${ type }`);\n\n\t$text.text(str);\n\n\t$body.append($toast);\n};\n},{\"./dom.js\":6}],11:[function(require,module,exports){\nconst $ = require('./dom.js');\nconst toast = require('./toast.js');\n\nclass Uploader extends $.class {\n\n\tconstructor(selector) {\n\n\t\tsuper(selector);\n\n\t\tthis.on('change', () => {\n\t\t\tlet file = this.data('files', undefined, true)[0];\n\n\t\t\tif (!file) {\n\t\t\t\tthis.value('');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet reader = new FileReader();\n\n\t\t\treader.onload = (e) => {\n\t\t\t\tthis.emit('success', e.target.result, e);\n\t\t\t};\n\n\t\t\treader.onerror = (e) => {\n\t\t\t\tthis.emit('error', e);\n\t\t\t};\n\n\t\t\treader.readAsDataURL(file);\n\n\t\t\tthis.value('');\n\t\t});\n\n\t\tthis.onerror = () => toast((this.options.name || '文件') + '读取错误', 'error');\n\n\t}\n\n\topen(options) {\n\n\t\tthis.options = options || {};\n\n\t\tif (this.options.accept) {\n\t\t\tthis.attr('accept', options.accept);\n\t\t} else {\n\t\t\tthis.removeAttr('accept');\n\t\t}\n\n\t\tthis.click();\n\n\t\treturn this;\n\t}\n\n\tsuccess(handler) {\n\t\tthis.onsuccess = handler;\n\t}\n\n\terror(handler) {\n\t\tthis.onerror = handler;\n\t}\n}\n\nmodule.exports = Uploader;\n},{\"./dom.js\":6,\"./toast.js\":10}],12:[function(require,module,exports){\nconst Uploader = require('./uploader.js');\nconst Canvas = require('./canvas.js');\nconst GroupList = require('./group-list.js');\nconst GroupItem = require('./group-item.js');\nconst Area = require('./area.js');\nconst DOM = require('./dom.js').class;\n\nmodule.exports.toFloat = (str) => {\n\tif (typeof str !== 'string') {\n\t\treturn;\n\t}\n\tlet result = str.match(/\\d+/g);\n\treturn parseFloat(result && (result.length > 1 ? result : result[0]));\n};\n\nmodule.exports.toString = (num, unit) => {\n\treturn num + unit;\n};\n\nmodule.exports.isCanvas = (object) => {\n\treturn object instanceof Canvas;\n};\n\nmodule.exports.isGroupList = (object) => {\n\treturn object instanceof GroupList;\n};\n\nmodule.exports.isGroupItem = (object) => {\n\treturn object instanceof GroupItem;\n};\n\nmodule.exports.isUploader = (object) => {\n\treturn object instanceof Uploader;\n};\n\nmodule.exports.isArea = (object) => {\n\treturn object instanceof Area;\n};\n\nmodule.exports.isDOM = (object) => {\n\treturn object instanceof DOM;\n};\n},{\"./area.js\":4,\"./canvas.js\":5,\"./dom.js\":6,\"./group-item.js\":7,\"./group-list.js\":8,\"./uploader.js\":11}]},{},[1])\n\n","let $;\n\nclass DOM {\n\n\tconstructor(selector, contexts = document) {\n\n\t\tif (!Array.isArray(contexts)) {\n\t\t\tthis.contexts = [contexts];\n\t\t} else {\n\t\t\tthis.contexts = contexts;\n\t\t}\n\n\t\tif (typeof selector === 'string') {\n\t\t\tif (/^<[\\s\\S]+>$/.test(selector)) {\n\t\t\t\tlet $temp = document.createElement('div');\n\t\t\t\t$temp.innerHTML = selector;\n\t\t\t\tthis.nodes = [$temp.firstChild];\n\t\t\t} else {\n\t\t\t\tthis.nodes = [];\n\n\t\t\t\tthis.contexts.forEach((context) => {\n\t\t\t\t\tthis.nodes.push(...context.querySelectorAll(selector));\n\t\t\t\t});\n\n\t\t\t}\n\t\t} else if (selector instanceof DOM) {\n\t\t\tthis.contexts = selector.contexts;\n\t\t\tthis.nodes = selector.nodes;\n\t\t} else if (Array.isArray(selector)) {\n\t\t\tthis.nodes = selector.filter((node) => {\n\t\t\t\treturn !!node;\n\t\t\t});\n\t\t} else if (selector) {\n\t\t\tthis.nodes = [selector];\n\t\t} else {\n\t\t\tthis.nodes = [];\n\t\t}\n\n\t}\n\n\teach(callback) {\n\t\tthis.nodes.forEach(callback);\n\t\treturn this;\n\t}\n\n\tmap(callback) {\n\t\treturn this.nodes.map(callback);\n\t}\n\n\tfilter(callback) {\n\t\treturn $(this.nodes.filter(callback));\n\t}\n\n\tget(index) {\n\t\treturn this.nodes[index];\n\t}\n\n\teq(index) {\n\t\treturn $(this.nodes[index]);\n\t}\n\n\tfind(selector) {\n\t\treturn $(selector, this.nodes);\n\t}\n\n\tsize() {\n\t\treturn this.nodes.length;\n\t}\n\n\tequals(selector) {\n\t\treturn this.nodes[0] === $(selector).nodes[0];\n\t}\n\n\tconcat(selector) {\n\t\treturn $([...$(selector).nodes, ...this.nodes]);\n\t}\n\n\tpush(selector) {\n\t\treturn this.nodes.push(...$(selector).nodes);\n\t}\n\n\tsplice(index, count = 1, ...selector) {\n\t\tthis.nodes.splice(index, count, ...$(selector).nodes);\n\t\treturn this;\n\t}\n\n\tindex(selector) {\n\t\treturn this.nodes.indexOf($(selector).nodes[0]);\n\t}\n\n\ton(eventName, handler, isOnly = false, isOrigin = true) {\n\t\tlet events = eventName.split(' ');\n\t\tif (isOnly) {\n\t\t\tthis.each((node) => {\n\t\t\t\tevents.forEach((event) => {\n\t\t\t\t\tif (isOrigin) {\n\t\t\t\t\t\tnode['on' + event] = function() {\n\t\t\t\t\t\t\treturn handler.call($(node), ...arguments);\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode['_on' + event] = function() {\n\t\t\t\t\t\t\treturn handler.call($(node), ...arguments);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tthis.each((node) => {\n\t\t\t\tevents.forEach((event) => {\n\t\t\t\t\tnode.addEventListener(event, function() {\n\t\t\t\t\t\thandler.call($(node), ...arguments);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn this;\n\t}\n\n\toff(eventName, handler) {\n\t\tthis.each((node) => {\n\t\t\tnode.removeEventListener(eventName, handler);\n\t\t\tnode['on' + eventName] = null;\n\t\t\tnode['_on' + eventName] = null;\n\t\t});\n\t\treturn this;\n\t}\n\n\temit(event, ...params) {\n\t\tlet result = [];\n\t\tthis.each((node) => {\n\t\t\tif (typeof this['on' + event] === 'function') {\n\t\t\t\tresult.push(this['on' + event](...params));\n\t\t\t} else if (typeof node['on' + event] === 'function') {\n\t\t\t\tresult.push(node['on' + event](...params));\n\t\t\t} else if (typeof node['_on' + event] === 'function') {\n\t\t\t\tresult.push(node['_on' + event](...params));\n\t\t\t}\n\t\t});\n\t\treturn result.length > 1 ? result : result[0];\n\t}\n\n\tattr(key, value) {\n\t\tif (typeof key === 'object') {\n\t\t\tthis.each((node) => {\n\t\t\t\tfor (let name in key) {\n\t\t\t\t\tnode.setAttribute(name, key[name]);\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (value !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.setAttribute(key, value);\n\t\t\t});\n\t\t} else {\n\t\t\treturn this.nodes.map((node) => {\n\t\t\t\treturn node.getAttribute(key);\n\t\t\t}).join('');\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tremoveAttr(key) {\n\t\tthis.each((node) => {\n\t\t\tnode.removeAttribute(key);\n\t\t});\n\t\treturn this;\n\t}\n\n\tdata(key, value, isOrigin = false) {\n\t\tif (typeof key === 'object') {\n\t\t\tthis.each((node) => {\n\t\t\t\tfor (let name in key) {\n\t\t\t\t\tif (isOrigin) {\n\t\t\t\t\t\tnode[name] = key[name];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode['_' + name] = key[name];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (value !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tif (isOrigin) {\n\t\t\t\t\tnode[key] = value;\n\t\t\t\t} else {\n\t\t\t\t\tnode['_' + key] = value;\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tif (isOrigin) {\n\t\t\t\treturn this.get(0)[key];\n\t\t\t} else {\n\t\t\t\treturn this.get(0)['_' + key];\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\taddClass(...names) {\n\t\tthis.each((node) => {\n\t\t\tlet classNames = node.className.split(' ');\n\n\t\t\tnames.forEach((name) => {\n\t\t\t\tif (classNames.indexOf(name) === -1) {\n\t\t\t\t\tclassNames.push(name);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tnode.className = classNames.join(' ');\n\t\t});\n\t\treturn this;\n\t}\n\n\tremoveClass(...names) {\n\t\tthis.each((node) => {\n\t\t\tlet classNames = node.className.split(' ');\n\n\t\t\tnames.forEach((name) => {\n\t\t\t\tlet index = classNames.indexOf(name);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tclassNames.splice(index, 1);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tnode.className = classNames.join(' ');\n\t\t});\n\t\treturn this;\n\t}\n\n\thasClass(name) {\n\t\treturn this.nodes.some((node) => {\n\t\t\treturn node.className.indexOf(name) !== -1;\n\t\t});\n\t}\n\n\tcss(key, val) {\n\t\tif (typeof key === 'object') {\n\t\t\tthis.each((node) => {\n\t\t\t\tfor (let name in key) {\n\t\t\t\t\tnode.style[name] = key[name];\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (val !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.style[key] = val;\n\t\t\t});\n\t\t} else if ('getComputedStyle' in window) {\n\t\t\treturn window.getComputedStyle(this.get(0))[key];\n\t\t} else {\n\t\t\treturn this.get(0).style[key];\n\t\t}\n\t}\n\n\twidth(val) {\n\t\treturn this.css('width', val);\n\t}\n\n\theight(val) {\n\t\treturn this.css('height', val);\n\t}\n\n\tappend(selector) {\n\t\tthis.each((node) => {\n\t\t\t$(selector).each((n) => {\n\t\t\t\tnode.appendChild(n);\n\t\t\t});\n\t\t});\n\t\treturn this;\n\t}\n\n\tremove() {\n\t\tthis.each((node) => {\n\t\t\tnode.remove();\n\t\t});\n\t\treturn this;\n\t}\n\n\treplace(selector) {\n\t\tthis.each((node) => {\n\t\t\tnode.parentNode.replaceChild($(selector).get(0), node);\n\t\t});\n\t\treturn this;\n\t}\n\n\thtml(html) {\n\t\tif (html !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.innerHTML = html;\n\t\t\t});\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.get(0).innerHTML;\n\t\t}\n\t}\n\n\ttext(str) {\n\t\tif (str !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.innerText = str;\n\t\t\t});\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.get(0).innerText;\n\t\t}\n\t}\n\n\tvalue(val) {\n\t\tif (val !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.value = val;\n\t\t\t});\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.get(0).value;\n\t\t}\n\t}\n\n\tparent() {\n\t\treturn $(this.nodes.map((node) => {\n\t\t\treturn node.parentNode;\n\t\t}));\n\t}\n\n\tchildren() {\n\t\tlet result = [];\n\t\tthis.each((node) => {\n\t\t\tresult.push(...node.children);\n\t\t});\n\t\treturn $(result);\n\t}\n\n\tsiblings() {\n\t\treturn this.parent().children().filter((node) => {\n\t\t\treturn this.nodes.indexOf(node) === -1;\n\t\t});\n\t}\n\n\tshow() {\n\t\tthis.css('display', '');\n\t\treturn this;\n\t}\n\n\thide() {\n\t\tthis.css('display', 'none');\n\t\treturn this;\n\t}\n\n\toffset() {\n\t\treturn {\n\t\t\tleft: this.get(0).offsetLeft,\n\t\t\ttop: this.get(0).offsetTop\n\t\t};\n\t}\n\n\tscrollLeft() {\n\t\treturn this.get(0).scrollLeft;\n\t}\n\n\tscrollTop() {\n\t\treturn this.get(0).scrollTop;\n\t}\n\n\tclick() {\n\t\tthis.each((node) => {\n\t\t\tnode.click();\n\t\t});\n\t\treturn this;\n\t}\n\n}\n\n$ = (selector, contexts) => {\n\tif (selector instanceof DOM) {\n\t\treturn selector;\n\t} else {\n\t\treturn new DOM(selector, contexts);\n\t}\n};\n\n$.class = DOM;\n\nmodule.exports = $;","const $ = require('./dom.js');\nconst util = require('./util.js');\nconst popup = require('./popup.js');\n\nclass GroupItem extends $.class {\n\tconstructor(seletor) {\n\n\t\tif (seletor) {\n\t\t\tsuper(seletor);\n\t\t\treturn;\n\t\t}\n\n\t\tsuper(`<li class=\"item mark\">\n\t\t\t<span class=\"status\">\n\t\t\t\t<i class=\"js-status icon icon-show\" title=\"隐藏\"></i>\n\t\t\t</span>\n\t\t\t\n\t\t\t<p class=\"js-name single-line\" title=\"分组名\">分组名</p>\n\t\t\t<input class=\"js-input edit-text\" autocomplete=\"off\" style=\"display: none;\"/>\n\n\t\t\t<span class=\"ctrl\">\n\t\t\t\t<i class=\"js-edit icon icon-edit\" title=\"重命名\"></i>\n\t\t\t\t<i class=\"js-submit icon icon-submit\" title=\"确定\" style=\"display: none;\"></i>\n\t\t\t\t<i class=\"js-delete icon icon-delete\" title=\"删除\"></i>\n\t\t\t</span>\n\t\t</li>`);\n\n\t\tthis.$areas = $();\n\n\t\t// 选中\n\t\tlet $nameText = this.find('.js-name');\n\n\t\t$nameText.on('click', () => {\n\t\t\tthis\n\t\t\t\t.addClass('active')\n\t\t\t\t.siblings()\n\t\t\t\t.removeClass('active');\n\n\t\t\tthis.emit('choose');\n\t\t});\n\n\t\t// 显示和隐藏\n\t\tlet $status = this.find('.js-status');\n\n\t\t$status.on('click', () => {\n\n\t\t\tthis.isShow = !$status.hasClass('icon-show');\n\n\t\t});\n\n\t\t// 标题编辑和保存\n\t\tlet $nameInput = this.find('.js-input');\n\t\tlet $edit = this.find('.js-edit');\n\t\tlet $submit = this.find('.js-submit');\n\n\t\t$edit.on('click', () => {\n\n\t\t\t$edit.hide();\n\t\t\t$submit.show();\n\t\t\t$nameText.hide();\n\t\t\t$nameInput\n\t\t\t\t.show()\n\t\t\t\t.value($nameText.text());\n\t\t});\n\n\t\t$submit.on('click', () => {\n\n\t\t\tlet name = $nameInput.value();\n\n\t\t\tlet flag = this.emit('rename', name);\n\n\t\t\tif (flag === false) {\n\t\t\t\tname = $nameText.text();\n\t\t\t}\n\n\t\t\t$edit.show();\n\t\t\t$submit.hide();\n\t\t\t$nameInput.hide();\n\t\t\t$nameText.show();\n\n\t\t\tthis.name = name;\n\n\t\t});\n\n\t\t$nameInput.on('blur', () => $submit.click());\n\n\t\t// 删除\n\t\tlet $delete = this.find('.js-delete');\n\n\t\t$delete.on('click', () => {\n\t\t\tpopup({\n\t\t\t\tcontent: '是否确认删除分组，<br />删除后将不可恢复。',\n\t\t\t\tconfirm: () => {\n\t\t\t\t\tlet flag = this.emit('delete');\n\t\t\t\t\tif (flag !== false) {\n\t\t\t\t\t\tsuper.remove();\n\t\t\t\t\t\tthis.$areas.remove();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t}\n\n\tset name(val) {\n\t\tthis\n\t\t\t.data('name', val)\n\t\t\t.find('.js-name')\n\t\t\t.attr('title', val)\n\t\t\t.text(val);\n\t}\n\n\tget name() {\n\t\tif (this.size() > 1) {\n\t\t\treturn '分组集';\n\t\t}\n\t\treturn this.data('name');\n\t}\n\n\tset isShow(val) {\n\t\tlet $status = this.find('.js-status');\n\n\t\tif (val) {\n\t\t\tthis.$areas.show();\n\t\t\t$status\n\t\t\t\t\t.addClass('icon-show')\n\t\t\t\t\t.removeClass('icon-hide')\n\t\t\t\t\t.attr('title', '显示');\n\t\t} else {\n\t\t\tthis.$areas.hide();\n\t\t\t$status\n\t\t\t\t\t.addClass('icon-hide')\n\t\t\t\t\t.removeClass('icon-show')\n\t\t\t\t\t.attr('title', '显示');\n\t\t}\n\t\tthis.data('isShow', val);\n\t}\n\n\tget isShow() {\n\t\tlet result = this.data('isShow');\n\t\treturn result === undefined ? true : result;\n\t}\n\n\tset $areas(val) {\n\t\tthis.data('$areas', val);\n\t}\n\n\tget $areas() {\n\t\tif (this.size() > 1) {\n\t\t\tlet $result = $();\n\t\t\tthis.forEach(($group) => {\n\t\t\t\t$result.push($group.$areas);\n\t\t\t});\n\t\t\treturn $result;\n\t\t}\n\t\treturn this.data('$areas');\n\t}\n\n\n\tforEach(callback) {\n\t\tsuper.each((node) => {\n\t\t\tcallback(new GroupItem(node));\n\t\t});\n\t}\n\n\teq(index) {\n\t\treturn new GroupItem(super.eq(index));\n\t}\n\n\tremove() {\n\t\tthis.$areas.remove();\n\t\tsuper.remove();\n\t}\n\n\tappend($area) {\n\t\tif (!util.isArea($area)) {\n\t\t\treturn this;\n\t\t}\n\n\t\t$area.on('delete', () => {\n\t\t\tthis.$areas.splice(this.$areas.index($area));\n\t\t}, true, false);\n\n\t\tthis.$areas.push($area);\n\t\treturn this;\n\t}\n\n}\n\nmodule.exports = GroupItem;","const $ = require('./dom.js');\nconst util = require('./util.js');\nconst toast = require('./toast.js');\nconst GroupItem = require('./group-item.js');\n\nclass GroupList extends $.class {\n\tconstructor(selector) {\n\t\tsuper(selector);\n\n\t\tthis.$groups = new GroupItem([]);\n\n\t}\n\n\tcheck() {\n\t\tif (!this.$groups.hasClass('active') && this.$groups.size() > 0) {\n\t\t\tlet $group = this.$groups.eq(0);\n\t\t\tthis.$currentGroup = $group;\n\t\t\tthis.emit('current', $group.addClass('active'));\n\t\t}\n\t\treturn this;\n\t}\n\n\tfindByName(name) {\n\t\tlet $result = null;\n\n\t\tthis.$groups.forEach(($group) => {\n\t\t\tif ($group.name === name) {\n\t\t\t\t$result = $group;\n\t\t\t}\n\t\t});\n\t\treturn $result;\n\t}\n\n\tappend($group) {\n\t\tif (!util.isGroupItem($group)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tfor (let i = 1; !$group.name; i++) {\n\t\t\tlet name = '分组' + i;\n\n\t\t\tif (!this.findByName(name)) {\n\t\t\t\t$group.name = name;\n\t\t\t}\n\t\t}\n\n\t\t$group.on('choose', () => {\n\t\t\tthis.$currentGroup = $group;\n\t\t\tthis.emit('current', $group);\n\t\t}, true, false);\n\n\t\t$group.on('delete', () => {\n\t\t\tif (this.$groups.size() > 1) {\n\t\t\t\tlet index = this.$groups.index($group);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tthis.$groups.splice(index);\n\t\t\t\t}\n\t\t\t\tthis.check();\n\t\t\t} else {\n\t\t\t\ttoast('删除失败，至少保留一个分组', 'error');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t}, true, false);\n\n\t\t$group.on('rename', (name) => {\n\t\t\tlet $result = this.findByName(name);\n\t\t\tif ($result && !$result.equals($group)) {\n\t\t\t\ttoast('名称已存在', 'error');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}, true, false);\n\n\t\tsuper.append($group);\n\t\tthis.$groups.push($group);\n\t\tthis.check();\n\t\treturn this;\n\t}\n\n}\n\nmodule.exports = GroupList;","const $ = require('./dom.js');\n\nlet $body = $('body');\n\nlet $popup = $(`<div class=\"popup\">\n\t<div class=\"box\">\n\t\t<div class=\"js-title title\"></div>\n\t\t<div class=\"js-content content\"></div>\n\t\t<div class=\"btns\">\n\t\t\t<button class=\"js-cancel cancel\">取消</button>\n\t\t\t<button class=\"js-confirm confirm ml\">确定</button>\n\t\t</div>\n\t</div>\n</div>`);\n\nlet $title = $popup.find('.js-title');\nlet $content = $popup.find('.js-content');\nlet $cancel = $popup.find('.js-cancel');\nlet $confirm = $popup.find('.js-confirm');\n\n$popup.on('animationend', () => {\n\tif ($popup.hasClass('fade-out')) {\n\t\t$popup.removeClass('fade-out');\n\t\t$popup.remove();\n\t}\n\n\tif ($popup.hasClass('fade-in')) {\n\t\t$popup.removeClass('fade-in');\n\t}\n});\n\nmodule.exports = (options = {}) => {\n\n\tif (typeof options === 'string') {\n\t\toptions = {\n\t\t\tcontent: options\n\t\t};\n\t}\n\n\t$title.text(options.title || '提示');\n\n\t$content.html(options.content || '');\n\n\tif (options.cancelText) {\n\t\t$cancel.text(options.cancelText);\n\t}\n\n\t$cancel.on('click', () => {\n\t\tif (typeof options.cancel === 'function') {\n\t\t\tlet flag = options.cancel();\n\t\t\tif (flag === 'false') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t$popup.addClass('fade-out');\n\t}, true);\n\n\tif (options.confirmText) {\n\t\t$confirm.text(options.confirmText);\n\t}\n\n\t$confirm.on('click', () => {\n\t\tif (typeof options.confirm === 'function') {\n\t\t\tlet flag = options.confirm();\n\t\t\tif (flag === 'false') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t$popup.addClass('fade-out');\n\t}, true);\n\n\t$body.append($popup.addClass('fade-in'));\n};","const $ = require('./dom.js');\n\nlet $body = $('body');\n\nlet $toast = $(`<div class=\"toast\">\n\t<i class=\"js-icon icon\"></i>\n\t<span class=\"js-text\"></span>\n</div>`);\n\nlet $icon = $toast.find('.js-icon');\nlet $text = $toast.find('.js-text');\n\n$toast.on('animationend', () => {\n\t$toast.remove();\n});\n\nmodule.exports = (str, type = 'prompt') => {\n\t$toast\n\t\t.removeClass('success')\n\t\t.removeClass('error')\n\t\t.removeClass('prompt')\n\t\t.addClass(type);\n\n\t$icon\n\t\t.removeClass('icon-success')\n\t\t.removeClass('icon-error')\n\t\t.removeClass('icon-prompt')\n\t\t.addClass(`icon-${ type }`);\n\n\t$text.text(str);\n\n\t$body.append($toast);\n};","const $ = require('./dom.js');\nconst toast = require('./toast.js');\n\nclass Uploader extends $.class {\n\n\tconstructor(selector) {\n\n\t\tsuper(selector);\n\n\t\tthis.on('change', () => {\n\t\t\tlet file = this.data('files', undefined, true)[0];\n\n\t\t\tif (!file) {\n\t\t\t\tthis.value('');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet reader = new FileReader();\n\n\t\t\treader.onload = (e) => {\n\t\t\t\tthis.emit('success', e.target.result, e);\n\t\t\t};\n\n\t\t\treader.onerror = (e) => {\n\t\t\t\tthis.emit('error', e);\n\t\t\t};\n\n\t\t\treader.readAsDataURL(file);\n\n\t\t\tthis.value('');\n\t\t});\n\n\t\tthis.onerror = () => toast((this.options.name || '文件') + '读取错误', 'error');\n\n\t}\n\n\topen(options) {\n\n\t\tthis.options = options || {};\n\n\t\tif (this.options.accept) {\n\t\t\tthis.attr('accept', options.accept);\n\t\t} else {\n\t\t\tthis.removeAttr('accept');\n\t\t}\n\n\t\tthis.click();\n\n\t\treturn this;\n\t}\n\n\tsuccess(handler) {\n\t\tthis.onsuccess = handler;\n\t}\n\n\terror(handler) {\n\t\tthis.onerror = handler;\n\t}\n}\n\nmodule.exports = Uploader;","const Uploader = require('./uploader.js');\nconst Canvas = require('./canvas.js');\nconst GroupList = require('./group-list.js');\nconst GroupItem = require('./group-item.js');\nconst Area = require('./area.js');\nconst DOM = require('./dom.js').class;\n\nmodule.exports.toFloat = (str) => {\n\tif (typeof str !== 'string') {\n\t\treturn;\n\t}\n\tlet result = str.match(/\\d+/g);\n\treturn parseFloat(result && (result.length > 1 ? result : result[0]));\n};\n\nmodule.exports.toString = (num, unit) => {\n\treturn num + unit;\n};\n\nmodule.exports.isCanvas = (object) => {\n\treturn object instanceof Canvas;\n};\n\nmodule.exports.isGroupList = (object) => {\n\treturn object instanceof GroupList;\n};\n\nmodule.exports.isGroupItem = (object) => {\n\treturn object instanceof GroupItem;\n};\n\nmodule.exports.isUploader = (object) => {\n\treturn object instanceof Uploader;\n};\n\nmodule.exports.isArea = (object) => {\n\treturn object instanceof Area;\n};\n\nmodule.exports.isDOM = (object) => {\n\treturn object instanceof DOM;\n};"]}