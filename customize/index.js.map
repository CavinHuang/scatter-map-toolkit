{"version":3,"sources":["../node_modules/._browser-pack@6.0.4@browser-pack/_prelude.js","../src/customize/index.js","../src/customize/lib/base64.js","../src/customize/module/ajax.js","../src/customize/module/area.js","../src/customize/module/canvas.js","index.js","../src/customize/module/dom.js","../src/customize/module/group-item.js","../src/customize/module/group-list.js","../src/customize/module/popup.js","../src/customize/module/toast.js","../src/customize/module/uploader.js","../src/customize/module/util.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","$","base64","toast","popup","ajax","Uploader","Canvas","GroupList","GroupItem","Area","$uploader","$groupList","$canvas","$size","$sizeWidth","$sizeHeight","$sizeInput","concat","$index","$uploadImg","$uploadOption","loadData","data","_loop","name","item","$group","areas","forEach","area","$area","addClass","css","top","y1","left","x1","width","parseFloat","x2","height","y2","append","isShow","loadSetting","setting","resize","flag","ready","value","removeAttr","imgHeight","imgWidth","update","loadOption","isRequire","arguments","undefined","cb","open","accept","success","options","decode","replace","JSON","parse","image","content","confirmText","cancelText","confirm","cancel","on","remove","setImage","img","$zoomIn","$zoomOut","$replaceImg","bind","zoomIn","zoomOut","$addGroup","$search","$current","text","$groups","indexOf","show","hide","find","this","attr","siblings","removeClass","init","test","$options","$optionsUpload","params","result","$areas","map","getImage","getOptions","res","resData","responseText","errcode","window","errmsg","title","./module/ajax.js","./module/area.js","./module/canvas.js","./module/dom.js","./module/group-item.js","./module/group-list.js","./module/popup.js","./module/toast.js","./module/uploader.js","2","_keyStr","encode","input","output","chr1","chr2","chr3","enc1","enc2","enc3","enc4","string","utftext","c","charCodeAt","String","fromCharCode","isNaN","charAt","c1","c2","3","url","method","callback","xhr","XMLHttpRequest","onreadystatechange","readyState","status","setRequestHeader","send","stringify","_$$class","_classCallCheck","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","emit","_inherits","class","./dom.js","util","_$$class2","selector","container","_this2","$container","$img","self","toPersent","val","type","w","toFloat","h","toString","$target","target","button","hasClass","$currentArea","startX","getAbs","x","startY","y","$currentGroup","document","endX","endY","abs","isError","count","_createClass","key","isGroupList","imgScale","event","pageX","scrollLeft","offset","pageY","scrollTop","isArea","src","_this3","handler","onready","./area.js","./util.js","6","DOM","_this4","contexts","Array","isArray","$temp","createElement","innerHTML","nodes","firstChild","context","_nodes","push","apply","_toConsumableArray","querySelectorAll","filter","node","index","_nodes2","_nodes3","_len","_key","splice","eventName","isOnly","isOrigin","events","split","each","prototype","slice","addEventListener","removeEventListener","_this5","_len2","_key2","_typeof","setAttribute","getAttribute","join","removeAttribute","get","_len3","names","_key3","classNames","className","_len4","_key4","some","style","getComputedStyle","appendChild","parentNode","replaceChild","html","str","innerText","children","_this6","parent","offsetLeft","offsetTop","click","7","_$$class3","seletor","_this7","$nameText","$status","$nameInput","$edit","$submit","_get","_this8","set","size","$result","./popup.js","8","_$$class4","_this9","eq","_this10","isGroupItem","findByName","check","equals","./toast.js","9","$body","$popup","$title","$content","$cancel","$confirm","10","$toast","$icon","$text","11","_$$class5","_this11","file","reader","FileReader","onload","onerror","readAsDataURL","onsuccess","12","match","num","unit","isCanvas","object","isUploader","isDOM","./canvas.js","./group-item.js","./group-list.js","./uploader.js"],"mappings":"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","file":"index.js","sourcesContent":["(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()","const $ = require('./module/dom.js');\nconst base64 = require('./lib/base64.js');\nconst toast = require('./module/toast.js');\nconst popup = require('./module/popup.js');\nconst ajax = require('./module/ajax.js');\nconst Uploader = require('./module/uploader.js');\nconst Canvas = require('./module/canvas.js');\nconst GroupList = require('./module/group-list.js');\nconst GroupItem = require('./module/group-item.js');\nconst Area = require('./module/area.js');\n\n(function() {\n\n\tconst $uploader = new Uploader('#upload-file');\n\tconst $groupList = new GroupList('#group');\n\tconst $canvas = new Canvas('#canvas', '#container');\n\n\n\t/* 尺寸 */\n\tconst $size = $('#size');\n\tconst $sizeWidth = $('#sizeWidth');\n\tconst $sizeHeight = $('#sizeHeight');\n\tconst $sizeInput = $sizeWidth.concat($sizeHeight);\n\n\n\t/* 索引页 */\n\tconst $index = $('#index');\n\tconst $uploadImg = $('#upload-img');\n\tconst $uploadOption = $('#upload-option');\n\n\tfunction loadData(data) {\n\t\tfor (let name in data) {\n\t\t\tlet item = data[name];\n\t\t\tlet $group = new GroupItem();\n\n\t\t\titem.areas.forEach((area) => {\n\t\t\t\tlet $area = new Area();\n\t\t\t\t$area\n\t\t\t\t\t.data(area)\n\t\t\t\t\t.addClass('hover')\n\t\t\t\t\t.css({\n\t\t\t\t\t\ttop: area.y1,\n\t\t\t\t\t\tleft: area.x1,\n\t\t\t\t\t\twidth: parseFloat(area.x2) - parseFloat(area.x1) + '%',\n\t\t\t\t\t\theight: parseFloat(area.y2) - parseFloat(area.y1) + '%'\n\t\t\t\t\t});\n\t\t\t\t$group.append($area);\n\t\t\t\t$canvas.append($area);\n\t\t\t});\n\n\t\t\t$group.name = name;\n\t\t\t$group.isShow = item.isShow;\n\n\t\t\t$groupList.append($group);\n\t\t}\n\n\t}\n\n\tfunction loadSetting(setting) {\n\t\tif (setting.resize) {\n\t\t\t$size.data('checked', true, true);\n\t\t\tlet flag = true;\n\t\t\t$canvas.ready(() => {\n\t\t\t\tif (flag) {\n\t\t\t\t\t$sizeWidth.value(setting.width).data('value', setting.width);\n\t\t\t\t\t$sizeHeight.value(setting.height).data('value', setting.height);\n\t\t\t\t\t$sizeInput.removeAttr('disabled');\n\t\t\t\t\t$canvas.imgHeight = setting.height;\n\t\t\t\t\t$canvas.imgWidth = setting.width;\n\t\t\t\t\tflag = false;\n\t\t\t\t} else {\n\t\t\t\t\t$sizeWidth.value($canvas.imgWidth).data('value', $canvas.imgWidth);\n\t\t\t\t\t$sizeHeight.value($canvas.imgHeight).data('value', $canvas.imgHeight);\n\t\t\t\t}\n\t\t\t\t$canvas.update();\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction loadOption(isRequire = false, cb) {\n\t\t$uploader.open({\n\t\t\tname: '配置文件',\n\t\t\taccept: 'text/json'\n\t\t}).success((data) => {\n\t\t\tlet options = base64.decode(data.replace('data:;base64,', ''));\n\t\t\ttry {\n\t\t\t\toptions = JSON.parse(options);\n\t\t\t} catch (e) {\n\t\t\t\ttoast('配置文件解析出错', 'error');\n\t\t\t\tthrow new Error('配置文件解析出错');\n\t\t\t}\n\n\t\t\tif (isRequire === true && !options.image) {\n\t\t\t\tpopup({\n\t\t\t\t\tcontent: '当前配置文件缺少图片<br />是否上传图片',\n\t\t\t\t\tconfirmText: '是',\n\t\t\t\t\tcancelText: '否',\n\t\t\t\t\tconfirm() {\n\t\t\t\t\t\t$uploader.open({\n\t\t\t\t\t\t\tname: '图片',\n\t\t\t\t\t\t\taccept: 'image/*'\n\t\t\t\t\t\t}).success((data) => {\n\n\t\t\t\t\t\t\tif (typeof cb === 'function') {\n\t\t\t\t\t\t\t\tcb(data);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tloadData(options.data);\n\t\t\t\t\t\t\tloadSetting(options.setting);\n\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tcancel() {\n\t\t\t\t\t\ttoast('加载数据失败，请先上传图片', 'error');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tif (typeof cb === 'function') {\n\t\t\t\t\tcb(options.image);\n\t\t\t\t}\n\n\t\t\t\tloadData(options.data);\n\t\t\t\tloadSetting(options.setting);\n\n\t\t\t}\n\t\t});\n\t}\n\n\t$index.on('animationend', () => $index.remove());\n\n\t$uploadImg.on('click', () => {\n\t\t$uploader.open({\n\t\t\tname: '图片',\n\t\t\taccept: 'image/*'\n\t\t}).success((data) => {\n\t\t\t$canvas.setImage(data, () => {\n\t\t\t\t$index.addClass('hide');\n\t\t\t\t$groupList.append(new GroupItem());\n\t\t\t\ttoast('加载成功', 'success');\n\t\t\t});\n\t\t});\n\t});\n\n\t$uploadOption.on('click', () => loadOption(true, (img) => {\n\t\t$canvas.setImage(img, () => {\n\t\t\t$index.addClass('hide');\n\t\t\ttoast('加载成功', 'success');\n\t\t});\n\t}));\n\n\t/* 画布操作 */\n\tconst $zoomIn = $('#zoom-in');\n\tconst $zoomOut = $('#zoom-out');\n\tconst $replaceImg = $('#replace-img');\n\n\t$canvas.bind($groupList);\n\n\t$zoomIn.on('click', () => $canvas.zoomIn());\n\n\t$zoomOut.on('click', () => $canvas.zoomOut());\n\n\t$replaceImg.on('click', () => {\n\t\t$uploader.open({\n\t\t\tname: '图片',\n\t\t\taccept: 'image/*'\n\t\t}).success((data) => {\n\t\t\t$canvas.setImage(data);\n\t\t});\n\t});\n\n\n\t/* 分组操作 */\n\tconst $addGroup = $('#add-group');\n\tconst $search = $('#search');\n\tconst $current = $('#current');\n\n\t$groupList.on('current', ($group) => {\n\t\t$current.text($group.name);\n\t}, true, false);\n\n\t$addGroup.on('click', () => {\n\t\t$groupList.append(new GroupItem());\n\t});\n\n\t$search.on('input', () => {\n\t\t$groupList.$groups.forEach(($group) => {\n\t\t\tif ($group.name.indexOf($search.value()) !== -1) {\n\t\t\t\t$group.show();\n\t\t\t} else {\n\t\t\t\t$group.hide();\n\t\t\t}\n\t\t});\n\t});\n\n\n\t/* 标签页切换 */\n\tconst $tabs = $('#tabs');\n\n\t$tabs.find('.tab-item').on('click', function() {\n\t\t$('#' + this.attr('data-type'))\n\t\t\t.show()\n\t\t\t.siblings()\n\t\t\t.hide();\n\n\t\tthis\n\t\t\t.addClass('active')\n\t\t\t.siblings()\n\t\t\t.removeClass('active');\n\t});\n\n\n\t/* 尺寸 */\n\t$size.on('change', () => {\n\t\tif ($size.data('checked', undefined, true)) {\n\t\t\t$sizeInput.removeAttr('disabled');\n\t\t} else {\n\t\t\t$canvas.init();\n\t\t\t$sizeInput.attr('disabled', 'disabled');\n\t\t}\n\t});\n\n\t$sizeWidth.on('blur', () => {\n\t\tlet value = $sizeWidth.value();\n\t\tif (/^\\d+$/.test(value)) {\n\t\t\t$sizeWidth.data('value', value);\n\t\t\t$canvas.imgWidth = parseFloat(value);\n\t\t\t$canvas.update();\n\t\t} else {\n\t\t\t$sizeWidth.value($sizeWidth.data('value'));\n\t\t}\n\t});\n\n\t$sizeHeight.on('blur', () => {\n\t\tlet value = $sizeHeight.value();\n\t\tif (/^\\d+$/.test(value)) {\n\t\t\t$sizeHeight.data('value', value);\n\t\t\t$canvas.imgHeight = parseFloat(value);\n\t\t\t$canvas.update();\n\t\t} else {\n\t\t\t$sizeHeight.value($sizeHeight.data('value'));\n\t\t}\n\t});\n\n\t$canvas.ready(() => {\n\t\t$sizeWidth.value($canvas.imgWidth).data('value', $canvas.imgWidth);\n\t\t$sizeHeight.value($canvas.imgHeight).data('value', $canvas.imgHeight);\n\t});\n\n\n\t\t/* 配置文件 */\n\tlet $options = $('#options');\n\tlet $optionsUpload = $options.find('.js-upload');\n\tlet $optionsDownload = $options.find('.js-download');\n\n\tfunction getOptions($groupList, params) {\n\t\tlet result = {};\n\t\t$groupList.$groups.forEach(($group) => {\n\t\t\tresult[$group.name] = {\n\t\t\t\tisShow: $group.isShow,\n\t\t\t\tareas: $group.$areas.map((area) => {\n\t\t\t\t\tlet $area = $(area);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tx1: $area.data('x1'),\n\t\t\t\t\t\tx2: $area.data('x2'),\n\t\t\t\t\t\ty1: $area.data('y1'),\n\t\t\t\t\t\ty2: $area.data('y2')\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t};\n\t\t});\n\n\t\tlet image = $canvas.getImage();\n\n\t\tif (!/^http(s)?:\\/\\//.test(image)) {\n\t\t\timage = '';\n\t\t}\n\n\t\treturn {\n\t\t\timage,\n\t\t\tdata: result,\n\t\t\tsetting: params\n\t\t};\n\t}\n\n\t$optionsDownload.on('click', () => {\n\n\t\tlet params = {};\n\n\t\tif ($size.data('checked', undefined, true)) {\n\t\t\tparams.resize = true;\n\t\t\tparams.width = $canvas.imgWidth;\n\t\t\tparams.height = $canvas.imgHeight;\n\t\t}\n\n\t\tajax('/save', 'POST', getOptions($groupList, params), (res) => {\n\t\t\ttry {\n\t\t\t\tlet resData = JSON.parse(res.responseText);\n\t\t\t\tif (resData.errcode === 200) {\n\t\t\t\t\twindow.open(resData.data);\n\t\t\t\t} else {\n\t\t\t\t\ttoast(resData.errmsg, 'error');\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\ttoast('数据格式非JSON', 'error');\n\t\t\t\tthrow new Error('数据格式非JSON');\n\t\t\t}\n\t\t});\n\t});\n\n\t$optionsUpload.on('click', () => {\n\t\tpopup({\n\t\t\ttitle: '警告',\n\t\t\tcontent: '加载成功后将清空当前数据<br />是否继续',\n\t\t\tconfirmText: '是',\n\t\t\tcancelText: '否',\n\t\t\tconfirm() {\n\t\t\t\tloadOption(false, () => {\n\t\t\t\t\t$groupList.$groups.remove();\n\t\t\t\t\t$groupList.$groups = new GroupItem([]);\n\t\t\t\t});\n\t\t\t},\n\t\t\tcancel() {\n\t\t\t\ttoast('取消当前操作');\n\t\t\t}\n\t\t});\n\t});\n\n})();","// private property\nconst _keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n// public method for encoding\nmodule.exports.encode = function(input) {\n\n\tlet output = '';\n\tlet chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n\tlet i = 0;\n\n\t// private method for UTF-8 encoding\n\tinput = (function(string) {\n\t\tstring = string.replace(/\\r\\n/g, '\\n');\n\t\tlet utftext = '';\n\t\tfor (let n = 0; n < string.length; n++) {\n\t\t\tlet c = string.charCodeAt(n);\n\t\t\tif (c < 128) {\n\t\t\t\tutftext += String.fromCharCode(c);\n\t\t\t} else if ((c > 127) && (c < 2048)) {\n\t\t\t\tutftext += String.fromCharCode((c >> 6) | 192);\n\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\n\t\t\t} else {\n\t\t\t\tutftext += String.fromCharCode((c >> 12) | 224);\n\t\t\t\tutftext += String.fromCharCode(((c >> 6) & 63) | 128);\n\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\n\t\t\t}\n\n\t\t}\n\t\treturn utftext;\n\t})(input);\n\n\twhile (i < input.length) {\n\n\t\tchr1 = input.charCodeAt(i++);\n\t\tchr2 = input.charCodeAt(i++);\n\t\tchr3 = input.charCodeAt(i++);\n\n\t\tenc1 = chr1 >> 2;\n\t\tenc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n\t\tenc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n\t\tenc4 = chr3 & 63;\n\n\t\tif (isNaN(chr2)) {\n\t\t\tenc3 = enc4 = 64;\n\t\t} else if (isNaN(chr3)) {\n\t\t\tenc4 = 64;\n\t\t}\n\n\t\toutput = output +\n\t\t_keyStr.charAt(enc1) + _keyStr.charAt(enc2) +\n\t\t_keyStr.charAt(enc3) + _keyStr.charAt(enc4);\n\t}\n\n\treturn output;\n};\n\n// public method for decoding\nmodule.exports.decode = function(input) {\n\tlet output = '';\n\tlet chr1, chr2, chr3;\n\tlet enc1, enc2, enc3, enc4;\n\tlet i = 0;\n\n\tinput = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\n\n\twhile (i < input.length) {\n\n\t\tenc1 = _keyStr.indexOf(input.charAt(i++));\n\t\tenc2 = _keyStr.indexOf(input.charAt(i++));\n\t\tenc3 = _keyStr.indexOf(input.charAt(i++));\n\t\tenc4 = _keyStr.indexOf(input.charAt(i++));\n\n\t\tchr1 = (enc1 << 2) | (enc2 >> 4);\n\t\tchr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n\t\tchr3 = ((enc3 & 3) << 6) | enc4;\n\n\t\toutput = output + String.fromCharCode(chr1);\n\n\t\tif (enc3 != 64) {\n\t\t\toutput = output + String.fromCharCode(chr2);\n\t\t}\n\n\t\tif (enc4 != 64) {\n\t\t\toutput = output + String.fromCharCode(chr3);\n\t\t}\n\t}\n\n\t// private method for UTF-8 decoding\n\treturn (function(utftext) {\n\t\tlet string = '';\n\t\tlet i = 0;\n\t\tlet c, c1, c2;\n\n\t\tc = c1 = c2 = 0;\n\n\t\twhile (i < utftext.length) {\n\t\t\tc = utftext.charCodeAt(i);\n\n\t\t\tif (c < 128) {\n\t\t\t\tstring += String.fromCharCode(c);\n\t\t\t\ti++;\n\n\t\t\t} else if ((c > 191) && (c < 224)) {\n\t\t\t\tc1 = utftext.charCodeAt(i + 1);\n\t\t\t\tstring += String.fromCharCode(((c & 31) << 6) | (c1 & 63));\n\t\t\t\ti += 2;\n\n\t\t\t} else {\n\t\t\t\tc1 = utftext.charCodeAt(i + 1);\n\t\t\t\tc2 = utftext.charCodeAt(i + 2);\n\t\t\t\tstring += String.fromCharCode(((c & 15) << 12) | ((c1 & 63) << 6) | (c2 & 63));\n\t\t\t\ti += 3;\n\t\t\t}\n\t\t}\n\n\t\treturn string;\n\t})(output);\n\n};","module.exports = (url, method, data, callback) => {\n\tlet xhr = new XMLHttpRequest();\n\txhr.onreadystatechange = function() {\n\t\tif (xhr.readyState == 4) {\n\t\t\tif (xhr.status == 200) {\n\t\t\t\tcallback(xhr);\n\t\t\t}\n\t\t}\n\t};\n\txhr.open(method, url, true);\n\txhr.setRequestHeader('Content-type', 'application/json');\n\txhr.send(JSON.stringify(data));\n};","const $ = require('./dom.js');\n\nclass Area extends $.class {\n\tconstructor() {\n\t\tsuper(`<div class=\"area\">\n\t\t\t<i class=\"icon icon-error\"></i>\n\t\t</div>`);\n\n\t\tthis\n\t\t\t.find('.icon')\n\t\t\t.on('click', () => {\n\t\t\t\tthis.remove();\n\t\t\t\tthis.emit('delete');\n\t\t\t});\n\t}\n}\n\nmodule.exports = Area;","const $ = require('./dom.js');\nconst util = require('./util.js');\nconst Area = require('./area.js');\n\nclass Canvas extends $.class {\n\n\tconstructor(selector, container) {\n\n\t\tsuper(selector);\n\n\t\tthis.$container = $(container);\n\t\tthis.$img = this.find('.js-pic');\n\t\tthis.$areas = this.find('.js-areas');\n\n\t\tlet self = this;\n\n\t\tfunction toPersent(val, type) {\n\t\t\tlet w = util.toFloat(self.width()); // 地图范围的宽高\n\t\t\tlet h = util.toFloat(self.height()); // 地图范围的宽高\n\t\t\tif (type === 'width') {\n\t\t\t\treturn util.toString(val / w * 100, '%');\n\t\t\t} else if (type === 'height') {\n\t\t\t\treturn util.toString(val / h * 100, '%');\n\t\t\t}\n\t\t}\n\n\t\tfunction update($area) {\n\n\t\t\tlet startX = $area.data('startX');\n\t\t\tlet endX = $area.data('endX');\n\t\t\tlet startY = $area.data('startY');\n\t\t\tlet endY = $area.data('endY');\n\n\t\t\tif (endX >= startX) {\n\t\t\t\t$area.css({\n\t\t\t\t\tleft: toPersent(startX, 'width'),\n\t\t\t\t\twidth: toPersent(endX - startX, 'width')\n\t\t\t\t});\n\n\t\t\t\t$area.data('x1', toPersent(startX, 'width'));\n\t\t\t\t$area.data('x2', toPersent(endX, 'width'));\n\t\t\t} else {\n\t\t\t\t$area.css({\n\t\t\t\t\tleft: toPersent(endX, 'width'),\n\t\t\t\t\twidth: toPersent(startX - endX, 'width')\n\t\t\t\t});\n\n\t\t\t\t$area.data('x1', toPersent(endX, 'width'));\n\t\t\t\t$area.data('x2', toPersent(startX, 'width'));\n\t\t\t}\n\n\t\t\tif (endY >= startY) {\n\t\t\t\t$area.css({\n\t\t\t\t\ttop: toPersent(startY, 'height'),\n\t\t\t\t\theight: toPersent(endY - startY, 'height')\n\t\t\t\t});\n\n\t\t\t\t$area.data('y1', toPersent(startY, 'height'));\n\t\t\t\t$area.data('y2', toPersent(endY, 'height'));\n\t\t\t} else {\n\t\t\t\t$area.css({\n\t\t\t\t\ttop: toPersent(endY, 'height'),\n\t\t\t\t\theight: toPersent(startY - endY, 'height')\n\t\t\t\t});\n\n\t\t\t\t$area.data('y1', toPersent(endY, 'height'));\n\t\t\t\t$area.data('y2', toPersent(startY, 'height'));\n\t\t\t}\n\n\t\t}\n\n\t\tthis.on('mousedown', (e) => {\n\t\t\tlet $target = $(e.target);\n\t\t\tif (e.button === 0 && !$target.hasClass('icon')) {\n\t\t\t\tlet $area = new Area();\n\n\t\t\t\tthis.$currentArea = $area;\n\n\t\t\t\tthis.$currentArea.data({\n\t\t\t\t\tstartX: this.getAbs().x,\n\t\t\t\t\tstartY: this.getAbs().y\n\t\t\t\t});\n\n\t\t\t\tthis.$areas.append($area);\n\n\t\t\t\tthis.$groupList.$groups.$areas.removeClass('hover');\n\n\t\t\t\tthis.$groupList.$currentGroup.append($area);\n\t\t\t}\n\n\t\t});\n\n\t\t$(document).on('mousemove', () => {\n\n\t\t\tif (!this.$currentArea) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet abs = this.getAbs();\n\n\t\t\tif (abs.x < 0) {\n\t\t\t\tabs.x = 0;\n\t\t\t} else if (abs.x > util.toFloat(this.width())) {\n\t\t\t\tabs.x = util.toFloat(this.width());\n\t\t\t}\n\n\t\t\tif (abs.y < 0) {\n\t\t\t\tabs.y = 0;\n\t\t\t} else if (abs.y > util.toFloat(this.height())) {\n\t\t\t\tabs.y = util.toFloat(this.height());\n\t\t\t}\n\n\t\t\tthis.$currentArea.data({\n\t\t\t\tendX: abs.x,\n\t\t\t\tendY: abs.y\n\t\t\t});\n\n\t\t\tupdate(this.$currentArea);\n\t\t});\n\n\t\t$(document).on('mouseup', () => {\n\n\t\t\tif (!this.$currentArea) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$groupList.$groups.$areas.addClass('hover');\n\n\t\t\tlet x1 = util.toFloat(this.$currentArea.data('x1'));\n\t\t\tlet x2 = util.toFloat(this.$currentArea.data('x2'));\n\t\t\tlet y1 = util.toFloat(this.$currentArea.data('y1'));\n\t\t\tlet y2 = util.toFloat(this.$currentArea.data('y2'));\n\n\t\t\tfunction isError(count) {\n\t\t\t\treturn count === undefined || count > 100 || count < 0;\n\t\t\t}\n\n\t\t\tif (isError(x1) || isError(x2) || isError(y1) || isError(y2)) {\n\t\t\t\tthis.$currentArea.remove().emit('delete'); // 移除非法数据\n\t\t\t}\n\n\t\t\tthis.$currentArea = null;\n\t\t});\n\t}\n\n\tbind($groupList) {\n\t\tif (util.isGroupList($groupList)) {\n\t\t\tthis.$groupList = $groupList;\n\t\t}\n\t\treturn this;\n\t}\n\n\tinit() {\n\t\tthis.$img.css('width', '');\n\t\tthis.$img.css('height', '');\n\t\tthis.imgScale = 1;\n\t\tthis.imgWidth = util.toFloat(this.$img.width());\n\t\tthis.imgHeight = util.toFloat(this.$img.height());\n\t\tthis.update();\n\t\tthis.emit('ready');\n\t\treturn this;\n\t}\n\n\tgetAbs(e = window.event) {\n\t\treturn {\n\t\t\tx: e.pageX + this.$container.scrollLeft() - this.offset().left,\n\t\t\ty: e.pageY + this.$container.scrollTop() - this.offset().top\n\t\t};\n\t}\n\n\tupdate() {\n\t\tthis.$img.width(util.toString(this.imgWidth * this.imgScale, 'px'));\n\t\tthis.$img.height(util.toString(this.imgHeight * this.imgScale, 'px'));\n\t\treturn this;\n\t}\n\n\tappend($area) {\n\t\tif (!util.isArea($area)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tthis\n\t\t\t.find('.js-areas')\n\t\t\t.append($area);\n\t}\n\n\tsetImage(src, cb) {\n\t\tthis.$img.attr('src', src);\n\t\tthis.$img.on('load', () => {\n\t\t\tthis.init();\n\t\t\tif (typeof cb === 'function') {\n\t\t\t\tcb();\n\t\t\t}\n\t\t}, true);\n\t\treturn this;\n\t}\n\n\tgetImage() {\n\t\treturn this.$img.attr('src');\n\t}\n\n\tzoomIn(count = 0.1) {\n\t\tthis.imgScale += count;\n\t\tthis.update();\n\t\treturn this;\n\t}\n\n\tzoomOut(count = 0.1) {\n\t\tif (this.imgScale > count * 2) {\n\t\t\tthis.imgScale -= count;\n\t\t\tthis.update();\n\t\t}\n\t\treturn this;\n\t}\n\n\tready(handler) {\n\t\tthis.onready = handler;\n\t\treturn this;\n\t}\n\n}\n\nmodule.exports = Canvas;","(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()({1:[function(require,module,exports){\nconst $ = require('./module/dom.js');\nconst base64 = require('./lib/base64.js');\nconst toast = require('./module/toast.js');\nconst popup = require('./module/popup.js');\nconst ajax = require('./module/ajax.js');\nconst Uploader = require('./module/uploader.js');\nconst Canvas = require('./module/canvas.js');\nconst GroupList = require('./module/group-list.js');\nconst GroupItem = require('./module/group-item.js');\nconst Area = require('./module/area.js');\n\n(function() {\n\n\tconst $uploader = new Uploader('#upload-file');\n\tconst $groupList = new GroupList('#group');\n\tconst $canvas = new Canvas('#canvas', '#container');\n\n\n\t/* 尺寸 */\n\tconst $size = $('#size');\n\tconst $sizeWidth = $('#sizeWidth');\n\tconst $sizeHeight = $('#sizeHeight');\n\tconst $sizeInput = $sizeWidth.concat($sizeHeight);\n\n\n\t/* 索引页 */\n\tconst $index = $('#index');\n\tconst $uploadImg = $('#upload-img');\n\tconst $uploadOption = $('#upload-option');\n\n\tfunction loadData(data) {\n\t\tfor (let name in data) {\n\t\t\tlet item = data[name];\n\t\t\tlet $group = new GroupItem();\n\n\t\t\titem.areas.forEach((area) => {\n\t\t\t\tlet $area = new Area();\n\t\t\t\t$area\n\t\t\t\t\t.data(area)\n\t\t\t\t\t.addClass('hover')\n\t\t\t\t\t.css({\n\t\t\t\t\t\ttop: area.y1,\n\t\t\t\t\t\tleft: area.x1,\n\t\t\t\t\t\twidth: parseFloat(area.x2) - parseFloat(area.x1) + '%',\n\t\t\t\t\t\theight: parseFloat(area.y2) - parseFloat(area.y1) + '%'\n\t\t\t\t\t});\n\t\t\t\t$group.append($area);\n\t\t\t\t$canvas.append($area);\n\t\t\t});\n\n\t\t\t$group.name = name;\n\t\t\t$group.isShow = item.isShow;\n\n\t\t\t$groupList.append($group);\n\t\t}\n\n\t}\n\n\tfunction loadSetting(setting) {\n\t\tif (setting.resize) {\n\t\t\t$size.data('checked', true, true);\n\t\t\tlet flag = true;\n\t\t\t$canvas.ready(() => {\n\t\t\t\tif (flag) {\n\t\t\t\t\t$sizeWidth.value(setting.width).data('value', setting.width);\n\t\t\t\t\t$sizeHeight.value(setting.height).data('value', setting.height);\n\t\t\t\t\t$sizeInput.removeAttr('disabled');\n\t\t\t\t\t$canvas.imgHeight = setting.height;\n\t\t\t\t\t$canvas.imgWidth = setting.width;\n\t\t\t\t\tflag = false;\n\t\t\t\t} else {\n\t\t\t\t\t$sizeWidth.value($canvas.imgWidth).data('value', $canvas.imgWidth);\n\t\t\t\t\t$sizeHeight.value($canvas.imgHeight).data('value', $canvas.imgHeight);\n\t\t\t\t}\n\t\t\t\t$canvas.update();\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction loadOption(isRequire = false, cb) {\n\t\t$uploader.open({\n\t\t\tname: '配置文件',\n\t\t\taccept: 'text/json'\n\t\t}).success((data) => {\n\t\t\tlet options = base64.decode(data.replace('data:;base64,', ''));\n\t\t\ttry {\n\t\t\t\toptions = JSON.parse(options);\n\t\t\t} catch (e) {\n\t\t\t\ttoast('配置文件解析出错', 'error');\n\t\t\t\tthrow new Error('配置文件解析出错');\n\t\t\t}\n\n\t\t\tif (isRequire === true && !options.image) {\n\t\t\t\tpopup({\n\t\t\t\t\tcontent: '当前配置文件缺少图片<br />是否上传图片',\n\t\t\t\t\tconfirmText: '是',\n\t\t\t\t\tcancelText: '否',\n\t\t\t\t\tconfirm() {\n\t\t\t\t\t\t$uploader.open({\n\t\t\t\t\t\t\tname: '图片',\n\t\t\t\t\t\t\taccept: 'image/*'\n\t\t\t\t\t\t}).success((data) => {\n\n\t\t\t\t\t\t\tif (typeof cb === 'function') {\n\t\t\t\t\t\t\t\tcb(data);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tloadData(options.data);\n\t\t\t\t\t\t\tloadSetting(options.setting);\n\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tcancel() {\n\t\t\t\t\t\ttoast('加载数据失败，请先上传图片', 'error');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tif (typeof cb === 'function') {\n\t\t\t\t\tcb(options.image);\n\t\t\t\t}\n\n\t\t\t\tloadData(options.data);\n\t\t\t\tloadSetting(options.setting);\n\n\t\t\t}\n\t\t});\n\t}\n\n\t$index.on('animationend', () => $index.remove());\n\n\t$uploadImg.on('click', () => {\n\t\t$uploader.open({\n\t\t\tname: '图片',\n\t\t\taccept: 'image/*'\n\t\t}).success((data) => {\n\t\t\t$canvas.setImage(data, () => {\n\t\t\t\t$index.addClass('hide');\n\t\t\t\t$groupList.append(new GroupItem());\n\t\t\t\ttoast('加载成功', 'success');\n\t\t\t});\n\t\t});\n\t});\n\n\t$uploadOption.on('click', () => loadOption(true, (img) => {\n\t\t$canvas.setImage(img, () => {\n\t\t\t$index.addClass('hide');\n\t\t\ttoast('加载成功', 'success');\n\t\t});\n\t}));\n\n\t/* 画布操作 */\n\tconst $zoomIn = $('#zoom-in');\n\tconst $zoomOut = $('#zoom-out');\n\tconst $replaceImg = $('#replace-img');\n\n\t$canvas.bind($groupList);\n\n\t$zoomIn.on('click', () => $canvas.zoomIn());\n\n\t$zoomOut.on('click', () => $canvas.zoomOut());\n\n\t$replaceImg.on('click', () => {\n\t\t$uploader.open({\n\t\t\tname: '图片',\n\t\t\taccept: 'image/*'\n\t\t}).success((data) => {\n\t\t\t$canvas.setImage(data);\n\t\t});\n\t});\n\n\n\t/* 分组操作 */\n\tconst $addGroup = $('#add-group');\n\tconst $search = $('#search');\n\tconst $current = $('#current');\n\n\t$groupList.on('current', ($group) => {\n\t\t$current.text($group.name);\n\t}, true, false);\n\n\t$addGroup.on('click', () => {\n\t\t$groupList.append(new GroupItem());\n\t});\n\n\t$search.on('input', () => {\n\t\t$groupList.$groups.forEach(($group) => {\n\t\t\tif ($group.name.indexOf($search.value()) !== -1) {\n\t\t\t\t$group.show();\n\t\t\t} else {\n\t\t\t\t$group.hide();\n\t\t\t}\n\t\t});\n\t});\n\n\n\t/* 标签页切换 */\n\tconst $tabs = $('#tabs');\n\n\t$tabs.find('.tab-item').on('click', function() {\n\t\t$('#' + this.attr('data-type'))\n\t\t\t.show()\n\t\t\t.siblings()\n\t\t\t.hide();\n\n\t\tthis\n\t\t\t.addClass('active')\n\t\t\t.siblings()\n\t\t\t.removeClass('active');\n\t});\n\n\n\t/* 尺寸 */\n\t$size.on('change', () => {\n\t\tif ($size.data('checked', undefined, true)) {\n\t\t\t$sizeInput.removeAttr('disabled');\n\t\t} else {\n\t\t\t$canvas.init();\n\t\t\t$sizeInput.attr('disabled', 'disabled');\n\t\t}\n\t});\n\n\t$sizeWidth.on('blur', () => {\n\t\tlet value = $sizeWidth.value();\n\t\tif (/^\\d+$/.test(value)) {\n\t\t\t$sizeWidth.data('value', value);\n\t\t\t$canvas.imgWidth = parseFloat(value);\n\t\t\t$canvas.update();\n\t\t} else {\n\t\t\t$sizeWidth.value($sizeWidth.data('value'));\n\t\t}\n\t});\n\n\t$sizeHeight.on('blur', () => {\n\t\tlet value = $sizeHeight.value();\n\t\tif (/^\\d+$/.test(value)) {\n\t\t\t$sizeHeight.data('value', value);\n\t\t\t$canvas.imgHeight = parseFloat(value);\n\t\t\t$canvas.update();\n\t\t} else {\n\t\t\t$sizeHeight.value($sizeHeight.data('value'));\n\t\t}\n\t});\n\n\t$canvas.ready(() => {\n\t\t$sizeWidth.value($canvas.imgWidth).data('value', $canvas.imgWidth);\n\t\t$sizeHeight.value($canvas.imgHeight).data('value', $canvas.imgHeight);\n\t});\n\n\n\t\t/* 配置文件 */\n\tlet $options = $('#options');\n\tlet $optionsUpload = $options.find('.js-upload');\n\tlet $optionsDownload = $options.find('.js-download');\n\n\tfunction getOptions($groupList, params) {\n\t\tlet result = {};\n\t\t$groupList.$groups.forEach(($group) => {\n\t\t\tresult[$group.name] = {\n\t\t\t\tisShow: $group.isShow,\n\t\t\t\tareas: $group.$areas.map((area) => {\n\t\t\t\t\tlet $area = $(area);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tx1: $area.data('x1'),\n\t\t\t\t\t\tx2: $area.data('x2'),\n\t\t\t\t\t\ty1: $area.data('y1'),\n\t\t\t\t\t\ty2: $area.data('y2')\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t};\n\t\t});\n\n\t\tlet image = $canvas.getImage();\n\n\t\tif (!/^http(s)?:\\/\\//.test(image)) {\n\t\t\timage = '';\n\t\t}\n\n\t\treturn {\n\t\t\timage,\n\t\t\tdata: result,\n\t\t\tsetting: params\n\t\t};\n\t}\n\n\t$optionsDownload.on('click', () => {\n\n\t\tlet params = {};\n\n\t\tif ($size.data('checked', undefined, true)) {\n\t\t\tparams.resize = true;\n\t\t\tparams.width = $canvas.imgWidth;\n\t\t\tparams.height = $canvas.imgHeight;\n\t\t}\n\n\t\tajax('/save', 'POST', getOptions($groupList, params), (res) => {\n\t\t\ttry {\n\t\t\t\tlet resData = JSON.parse(res.responseText);\n\t\t\t\tif (resData.errcode === 200) {\n\t\t\t\t\twindow.open(resData.data);\n\t\t\t\t} else {\n\t\t\t\t\ttoast(resData.errmsg, 'error');\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\ttoast('数据格式非JSON', 'error');\n\t\t\t\tthrow new Error('数据格式非JSON');\n\t\t\t}\n\t\t});\n\t});\n\n\t$optionsUpload.on('click', () => {\n\t\tpopup({\n\t\t\ttitle: '警告',\n\t\t\tcontent: '加载成功后将清空当前数据<br />是否继续',\n\t\t\tconfirmText: '是',\n\t\t\tcancelText: '否',\n\t\t\tconfirm() {\n\t\t\t\tloadOption(false, () => {\n\t\t\t\t\t$groupList.$groups.remove();\n\t\t\t\t\t$groupList.$groups = new GroupItem([]);\n\t\t\t\t});\n\t\t\t},\n\t\t\tcancel() {\n\t\t\t\ttoast('取消当前操作');\n\t\t\t}\n\t\t});\n\t});\n\n})();\n},{\"./lib/base64.js\":2,\"./module/ajax.js\":3,\"./module/area.js\":4,\"./module/canvas.js\":5,\"./module/dom.js\":6,\"./module/group-item.js\":7,\"./module/group-list.js\":8,\"./module/popup.js\":9,\"./module/toast.js\":10,\"./module/uploader.js\":11}],2:[function(require,module,exports){\n// private property\nconst _keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n// public method for encoding\nmodule.exports.encode = function(input) {\n\n\tlet output = '';\n\tlet chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n\tlet i = 0;\n\n\t// private method for UTF-8 encoding\n\tinput = (function(string) {\n\t\tstring = string.replace(/\\r\\n/g, '\\n');\n\t\tlet utftext = '';\n\t\tfor (let n = 0; n < string.length; n++) {\n\t\t\tlet c = string.charCodeAt(n);\n\t\t\tif (c < 128) {\n\t\t\t\tutftext += String.fromCharCode(c);\n\t\t\t} else if ((c > 127) && (c < 2048)) {\n\t\t\t\tutftext += String.fromCharCode((c >> 6) | 192);\n\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\n\t\t\t} else {\n\t\t\t\tutftext += String.fromCharCode((c >> 12) | 224);\n\t\t\t\tutftext += String.fromCharCode(((c >> 6) & 63) | 128);\n\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\n\t\t\t}\n\n\t\t}\n\t\treturn utftext;\n\t})(input);\n\n\twhile (i < input.length) {\n\n\t\tchr1 = input.charCodeAt(i++);\n\t\tchr2 = input.charCodeAt(i++);\n\t\tchr3 = input.charCodeAt(i++);\n\n\t\tenc1 = chr1 >> 2;\n\t\tenc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n\t\tenc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n\t\tenc4 = chr3 & 63;\n\n\t\tif (isNaN(chr2)) {\n\t\t\tenc3 = enc4 = 64;\n\t\t} else if (isNaN(chr3)) {\n\t\t\tenc4 = 64;\n\t\t}\n\n\t\toutput = output +\n\t\t_keyStr.charAt(enc1) + _keyStr.charAt(enc2) +\n\t\t_keyStr.charAt(enc3) + _keyStr.charAt(enc4);\n\t}\n\n\treturn output;\n};\n\n// public method for decoding\nmodule.exports.decode = function(input) {\n\tlet output = '';\n\tlet chr1, chr2, chr3;\n\tlet enc1, enc2, enc3, enc4;\n\tlet i = 0;\n\n\tinput = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\n\n\twhile (i < input.length) {\n\n\t\tenc1 = _keyStr.indexOf(input.charAt(i++));\n\t\tenc2 = _keyStr.indexOf(input.charAt(i++));\n\t\tenc3 = _keyStr.indexOf(input.charAt(i++));\n\t\tenc4 = _keyStr.indexOf(input.charAt(i++));\n\n\t\tchr1 = (enc1 << 2) | (enc2 >> 4);\n\t\tchr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n\t\tchr3 = ((enc3 & 3) << 6) | enc4;\n\n\t\toutput = output + String.fromCharCode(chr1);\n\n\t\tif (enc3 != 64) {\n\t\t\toutput = output + String.fromCharCode(chr2);\n\t\t}\n\n\t\tif (enc4 != 64) {\n\t\t\toutput = output + String.fromCharCode(chr3);\n\t\t}\n\t}\n\n\t// private method for UTF-8 decoding\n\treturn (function(utftext) {\n\t\tlet string = '';\n\t\tlet i = 0;\n\t\tlet c, c1, c2;\n\n\t\tc = c1 = c2 = 0;\n\n\t\twhile (i < utftext.length) {\n\t\t\tc = utftext.charCodeAt(i);\n\n\t\t\tif (c < 128) {\n\t\t\t\tstring += String.fromCharCode(c);\n\t\t\t\ti++;\n\n\t\t\t} else if ((c > 191) && (c < 224)) {\n\t\t\t\tc1 = utftext.charCodeAt(i + 1);\n\t\t\t\tstring += String.fromCharCode(((c & 31) << 6) | (c1 & 63));\n\t\t\t\ti += 2;\n\n\t\t\t} else {\n\t\t\t\tc1 = utftext.charCodeAt(i + 1);\n\t\t\t\tc2 = utftext.charCodeAt(i + 2);\n\t\t\t\tstring += String.fromCharCode(((c & 15) << 12) | ((c1 & 63) << 6) | (c2 & 63));\n\t\t\t\ti += 3;\n\t\t\t}\n\t\t}\n\n\t\treturn string;\n\t})(output);\n\n};\n},{}],3:[function(require,module,exports){\nmodule.exports = (url, method, data, callback) => {\n\tlet xhr = new XMLHttpRequest();\n\txhr.onreadystatechange = function() {\n\t\tif (xhr.readyState == 4) {\n\t\t\tif (xhr.status == 200) {\n\t\t\t\tcallback(xhr);\n\t\t\t}\n\t\t}\n\t};\n\txhr.open(method, url, true);\n\txhr.setRequestHeader('Content-type', 'application/json');\n\txhr.send(JSON.stringify(data));\n};\n},{}],4:[function(require,module,exports){\nconst $ = require('./dom.js');\n\nclass Area extends $.class {\n\tconstructor() {\n\t\tsuper(`<div class=\"area\">\n\t\t\t<i class=\"icon icon-error\"></i>\n\t\t</div>`);\n\n\t\tthis\n\t\t\t.find('.icon')\n\t\t\t.on('click', () => {\n\t\t\t\tthis.remove();\n\t\t\t\tthis.emit('delete');\n\t\t\t});\n\t}\n}\n\nmodule.exports = Area;\n},{\"./dom.js\":6}],5:[function(require,module,exports){\nconst $ = require('./dom.js');\nconst util = require('./util.js');\nconst Area = require('./area.js');\n\nclass Canvas extends $.class {\n\n\tconstructor(selector, container) {\n\n\t\tsuper(selector);\n\n\t\tthis.$container = $(container);\n\t\tthis.$img = this.find('.js-pic');\n\t\tthis.$areas = this.find('.js-areas');\n\n\t\tlet self = this;\n\n\t\tfunction toPersent(val, type) {\n\t\t\tlet w = util.toFloat(self.width()); // 地图范围的宽高\n\t\t\tlet h = util.toFloat(self.height()); // 地图范围的宽高\n\t\t\tif (type === 'width') {\n\t\t\t\treturn util.toString(val / w * 100, '%');\n\t\t\t} else if (type === 'height') {\n\t\t\t\treturn util.toString(val / h * 100, '%');\n\t\t\t}\n\t\t}\n\n\t\tfunction update($area) {\n\n\t\t\tlet startX = $area.data('startX');\n\t\t\tlet endX = $area.data('endX');\n\t\t\tlet startY = $area.data('startY');\n\t\t\tlet endY = $area.data('endY');\n\n\t\t\tif (endX >= startX) {\n\t\t\t\t$area.css({\n\t\t\t\t\tleft: toPersent(startX, 'width'),\n\t\t\t\t\twidth: toPersent(endX - startX, 'width')\n\t\t\t\t});\n\n\t\t\t\t$area.data('x1', toPersent(startX, 'width'));\n\t\t\t\t$area.data('x2', toPersent(endX, 'width'));\n\t\t\t} else {\n\t\t\t\t$area.css({\n\t\t\t\t\tleft: toPersent(endX, 'width'),\n\t\t\t\t\twidth: toPersent(startX - endX, 'width')\n\t\t\t\t});\n\n\t\t\t\t$area.data('x1', toPersent(endX, 'width'));\n\t\t\t\t$area.data('x2', toPersent(startX, 'width'));\n\t\t\t}\n\n\t\t\tif (endY >= startY) {\n\t\t\t\t$area.css({\n\t\t\t\t\ttop: toPersent(startY, 'height'),\n\t\t\t\t\theight: toPersent(endY - startY, 'height')\n\t\t\t\t});\n\n\t\t\t\t$area.data('y1', toPersent(startY, 'height'));\n\t\t\t\t$area.data('y2', toPersent(endY, 'height'));\n\t\t\t} else {\n\t\t\t\t$area.css({\n\t\t\t\t\ttop: toPersent(endY, 'height'),\n\t\t\t\t\theight: toPersent(startY - endY, 'height')\n\t\t\t\t});\n\n\t\t\t\t$area.data('y1', toPersent(endY, 'height'));\n\t\t\t\t$area.data('y2', toPersent(startY, 'height'));\n\t\t\t}\n\n\t\t}\n\n\t\tthis.on('mousedown', (e) => {\n\t\t\tlet $target = $(e.target);\n\t\t\tif (e.button === 0 && !$target.hasClass('icon')) {\n\t\t\t\tlet $area = new Area();\n\n\t\t\t\tthis.$currentArea = $area;\n\n\t\t\t\tthis.$currentArea.data({\n\t\t\t\t\tstartX: this.getAbs().x,\n\t\t\t\t\tstartY: this.getAbs().y\n\t\t\t\t});\n\n\t\t\t\tthis.$areas.append($area);\n\n\t\t\t\tthis.$groupList.$groups.$areas.removeClass('hover');\n\n\t\t\t\tthis.$groupList.$currentGroup.append($area);\n\t\t\t}\n\n\t\t});\n\n\t\t$(document).on('mousemove', () => {\n\n\t\t\tif (!this.$currentArea) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet abs = this.getAbs();\n\n\t\t\tif (abs.x < 0) {\n\t\t\t\tabs.x = 0;\n\t\t\t} else if (abs.x > util.toFloat(this.width())) {\n\t\t\t\tabs.x = util.toFloat(this.width());\n\t\t\t}\n\n\t\t\tif (abs.y < 0) {\n\t\t\t\tabs.y = 0;\n\t\t\t} else if (abs.y > util.toFloat(this.height())) {\n\t\t\t\tabs.y = util.toFloat(this.height());\n\t\t\t}\n\n\t\t\tthis.$currentArea.data({\n\t\t\t\tendX: abs.x,\n\t\t\t\tendY: abs.y\n\t\t\t});\n\n\t\t\tupdate(this.$currentArea);\n\t\t});\n\n\t\t$(document).on('mouseup', () => {\n\n\t\t\tif (!this.$currentArea) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$groupList.$groups.$areas.addClass('hover');\n\n\t\t\tlet x1 = util.toFloat(this.$currentArea.data('x1'));\n\t\t\tlet x2 = util.toFloat(this.$currentArea.data('x2'));\n\t\t\tlet y1 = util.toFloat(this.$currentArea.data('y1'));\n\t\t\tlet y2 = util.toFloat(this.$currentArea.data('y2'));\n\n\t\t\tfunction isError(count) {\n\t\t\t\treturn count === undefined || count > 100 || count < 0;\n\t\t\t}\n\n\t\t\tif (isError(x1) || isError(x2) || isError(y1) || isError(y2)) {\n\t\t\t\tthis.$currentArea.remove().emit('delete'); // 移除非法数据\n\t\t\t}\n\n\t\t\tthis.$currentArea = null;\n\t\t});\n\t}\n\n\tbind($groupList) {\n\t\tif (util.isGroupList($groupList)) {\n\t\t\tthis.$groupList = $groupList;\n\t\t}\n\t\treturn this;\n\t}\n\n\tinit() {\n\t\tthis.$img.css('width', '');\n\t\tthis.$img.css('height', '');\n\t\tthis.imgScale = 1;\n\t\tthis.imgWidth = util.toFloat(this.$img.width());\n\t\tthis.imgHeight = util.toFloat(this.$img.height());\n\t\tthis.update();\n\t\tthis.emit('ready');\n\t\treturn this;\n\t}\n\n\tgetAbs(e = window.event) {\n\t\treturn {\n\t\t\tx: e.pageX + this.$container.scrollLeft() - this.offset().left,\n\t\t\ty: e.pageY + this.$container.scrollTop() - this.offset().top\n\t\t};\n\t}\n\n\tupdate() {\n\t\tthis.$img.width(util.toString(this.imgWidth * this.imgScale, 'px'));\n\t\tthis.$img.height(util.toString(this.imgHeight * this.imgScale, 'px'));\n\t\treturn this;\n\t}\n\n\tappend($area) {\n\t\tif (!util.isArea($area)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tthis\n\t\t\t.find('.js-areas')\n\t\t\t.append($area);\n\t}\n\n\tsetImage(src, cb) {\n\t\tthis.$img.attr('src', src);\n\t\tthis.$img.on('load', () => {\n\t\t\tthis.init();\n\t\t\tif (typeof cb === 'function') {\n\t\t\t\tcb();\n\t\t\t}\n\t\t}, true);\n\t\treturn this;\n\t}\n\n\tgetImage() {\n\t\treturn this.$img.attr('src');\n\t}\n\n\tzoomIn(count = 0.1) {\n\t\tthis.imgScale += count;\n\t\tthis.update();\n\t\treturn this;\n\t}\n\n\tzoomOut(count = 0.1) {\n\t\tif (this.imgScale > count * 2) {\n\t\t\tthis.imgScale -= count;\n\t\t\tthis.update();\n\t\t}\n\t\treturn this;\n\t}\n\n\tready(handler) {\n\t\tthis.onready = handler;\n\t\treturn this;\n\t}\n\n}\n\nmodule.exports = Canvas;\n},{\"./area.js\":4,\"./dom.js\":6,\"./util.js\":12}],6:[function(require,module,exports){\nlet $;\n\nclass DOM {\n\n\tconstructor(selector, contexts = document) {\n\n\t\tif (!Array.isArray(contexts)) {\n\t\t\tthis.contexts = [contexts];\n\t\t} else {\n\t\t\tthis.contexts = contexts;\n\t\t}\n\n\t\tif (typeof selector === 'string') {\n\t\t\tif (/^<[\\s\\S]+>$/.test(selector)) {\n\t\t\t\tlet $temp = document.createElement('div');\n\t\t\t\t$temp.innerHTML = selector;\n\t\t\t\tthis.nodes = [$temp.firstChild];\n\t\t\t} else {\n\t\t\t\tthis.nodes = [];\n\n\t\t\t\tthis.contexts.forEach((context) => {\n\t\t\t\t\tthis.nodes.push(...context.querySelectorAll(selector));\n\t\t\t\t});\n\n\t\t\t}\n\t\t} else if (selector instanceof DOM) {\n\t\t\tthis.contexts = selector.contexts;\n\t\t\tthis.nodes = selector.nodes;\n\t\t} else if (Array.isArray(selector)) {\n\t\t\tthis.nodes = selector.filter((node) => {\n\t\t\t\treturn !!node;\n\t\t\t});\n\t\t} else if (selector) {\n\t\t\tthis.nodes = [selector];\n\t\t} else {\n\t\t\tthis.nodes = [];\n\t\t}\n\n\t}\n\n\teach(callback) {\n\t\tthis.nodes.forEach(callback);\n\t\treturn this;\n\t}\n\n\tmap(callback) {\n\t\treturn this.nodes.map(callback);\n\t}\n\n\tfilter(callback) {\n\t\treturn $(this.nodes.filter(callback));\n\t}\n\n\tget(index) {\n\t\treturn this.nodes[index];\n\t}\n\n\teq(index) {\n\t\treturn $(this.nodes[index]);\n\t}\n\n\tfind(selector) {\n\t\treturn $(selector, this.nodes);\n\t}\n\n\tsize() {\n\t\treturn this.nodes.length;\n\t}\n\n\tequals(selector) {\n\t\treturn this.nodes[0] === $(selector).nodes[0];\n\t}\n\n\tconcat(selector) {\n\t\treturn $([...$(selector).nodes, ...this.nodes]);\n\t}\n\n\tpush(selector) {\n\t\treturn this.nodes.push(...$(selector).nodes);\n\t}\n\n\tsplice(index, count = 1, ...selector) {\n\t\tthis.nodes.splice(index, count, ...$(selector).nodes);\n\t\treturn this;\n\t}\n\n\tindex(selector) {\n\t\treturn this.nodes.indexOf($(selector).nodes[0]);\n\t}\n\n\ton(eventName, handler, isOnly = false, isOrigin = true) {\n\t\tlet events = eventName.split(' ');\n\t\tif (isOnly) {\n\t\t\tthis.each((node) => {\n\t\t\t\tevents.forEach((event) => {\n\t\t\t\t\tif (isOrigin) {\n\t\t\t\t\t\tnode['on' + event] = function() {\n\t\t\t\t\t\t\treturn handler.call($(node), ...arguments);\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode['_on' + event] = function() {\n\t\t\t\t\t\t\treturn handler.call($(node), ...arguments);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tthis.each((node) => {\n\t\t\t\tevents.forEach((event) => {\n\t\t\t\t\tnode.addEventListener(event, function() {\n\t\t\t\t\t\thandler.call($(node), ...arguments);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn this;\n\t}\n\n\toff(eventName, handler) {\n\t\tthis.each((node) => {\n\t\t\tnode.removeEventListener(eventName, handler);\n\t\t\tnode['on' + eventName] = null;\n\t\t\tnode['_on' + eventName] = null;\n\t\t});\n\t\treturn this;\n\t}\n\n\temit(event, ...params) {\n\t\tlet result = [];\n\t\tthis.each((node) => {\n\t\t\tif (typeof this['on' + event] === 'function') {\n\t\t\t\tresult.push(this['on' + event](...params));\n\t\t\t} else if (typeof node['on' + event] === 'function') {\n\t\t\t\tresult.push(node['on' + event](...params));\n\t\t\t} else if (typeof node['_on' + event] === 'function') {\n\t\t\t\tresult.push(node['_on' + event](...params));\n\t\t\t}\n\t\t});\n\t\treturn result.length > 1 ? result : result[0];\n\t}\n\n\tattr(key, value) {\n\t\tif (typeof key === 'object') {\n\t\t\tthis.each((node) => {\n\t\t\t\tfor (let name in key) {\n\t\t\t\t\tnode.setAttribute(name, key[name]);\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (value !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.setAttribute(key, value);\n\t\t\t});\n\t\t} else {\n\t\t\treturn this.nodes.map((node) => {\n\t\t\t\treturn node.getAttribute(key);\n\t\t\t}).join('');\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tremoveAttr(key) {\n\t\tthis.each((node) => {\n\t\t\tnode.removeAttribute(key);\n\t\t});\n\t\treturn this;\n\t}\n\n\tdata(key, value, isOrigin = false) {\n\t\tif (typeof key === 'object') {\n\t\t\tthis.each((node) => {\n\t\t\t\tfor (let name in key) {\n\t\t\t\t\tif (isOrigin) {\n\t\t\t\t\t\tnode[name] = key[name];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode['_' + name] = key[name];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (value !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tif (isOrigin) {\n\t\t\t\t\tnode[key] = value;\n\t\t\t\t} else {\n\t\t\t\t\tnode['_' + key] = value;\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tif (isOrigin) {\n\t\t\t\treturn this.get(0)[key];\n\t\t\t} else {\n\t\t\t\treturn this.get(0)['_' + key];\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\taddClass(...names) {\n\t\tthis.each((node) => {\n\t\t\tlet classNames = node.className.split(' ');\n\n\t\t\tnames.forEach((name) => {\n\t\t\t\tif (classNames.indexOf(name) === -1) {\n\t\t\t\t\tclassNames.push(name);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tnode.className = classNames.join(' ');\n\t\t});\n\t\treturn this;\n\t}\n\n\tremoveClass(...names) {\n\t\tthis.each((node) => {\n\t\t\tlet classNames = node.className.split(' ');\n\n\t\t\tnames.forEach((name) => {\n\t\t\t\tlet index = classNames.indexOf(name);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tclassNames.splice(index, 1);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tnode.className = classNames.join(' ');\n\t\t});\n\t\treturn this;\n\t}\n\n\thasClass(name) {\n\t\treturn this.nodes.some((node) => {\n\t\t\treturn node.className.indexOf(name) !== -1;\n\t\t});\n\t}\n\n\tcss(key, val) {\n\t\tif (typeof key === 'object') {\n\t\t\tthis.each((node) => {\n\t\t\t\tfor (let name in key) {\n\t\t\t\t\tnode.style[name] = key[name];\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (val !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.style[key] = val;\n\t\t\t});\n\t\t} else if ('getComputedStyle' in window) {\n\t\t\treturn window.getComputedStyle(this.get(0))[key];\n\t\t} else {\n\t\t\treturn this.get(0).style[key];\n\t\t}\n\t}\n\n\twidth(val) {\n\t\treturn this.css('width', val);\n\t}\n\n\theight(val) {\n\t\treturn this.css('height', val);\n\t}\n\n\tappend(selector) {\n\t\tthis.each((node) => {\n\t\t\t$(selector).each((n) => {\n\t\t\t\tnode.appendChild(n);\n\t\t\t});\n\t\t});\n\t\treturn this;\n\t}\n\n\tremove() {\n\t\tthis.each((node) => {\n\t\t\tnode.remove();\n\t\t});\n\t\treturn this;\n\t}\n\n\treplace(selector) {\n\t\tthis.each((node) => {\n\t\t\tnode.parentNode.replaceChild($(selector).get(0), node);\n\t\t});\n\t\treturn this;\n\t}\n\n\thtml(html) {\n\t\tif (html !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.innerHTML = html;\n\t\t\t});\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.get(0).innerHTML;\n\t\t}\n\t}\n\n\ttext(str) {\n\t\tif (str !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.innerText = str;\n\t\t\t});\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.get(0).innerText;\n\t\t}\n\t}\n\n\tvalue(val) {\n\t\tif (val !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.value = val;\n\t\t\t});\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.get(0).value;\n\t\t}\n\t}\n\n\tparent() {\n\t\treturn $(this.nodes.map((node) => {\n\t\t\treturn node.parentNode;\n\t\t}));\n\t}\n\n\tchildren() {\n\t\tlet result = [];\n\t\tthis.each((node) => {\n\t\t\tresult.push(...node.children);\n\t\t});\n\t\treturn $(result);\n\t}\n\n\tsiblings() {\n\t\treturn this.parent().children().filter((node) => {\n\t\t\treturn this.nodes.indexOf(node) === -1;\n\t\t});\n\t}\n\n\tshow() {\n\t\tthis.css('display', '');\n\t\treturn this;\n\t}\n\n\thide() {\n\t\tthis.css('display', 'none');\n\t\treturn this;\n\t}\n\n\toffset() {\n\t\treturn {\n\t\t\tleft: this.get(0).offsetLeft,\n\t\t\ttop: this.get(0).offsetTop\n\t\t};\n\t}\n\n\tscrollLeft() {\n\t\treturn this.get(0).scrollLeft;\n\t}\n\n\tscrollTop() {\n\t\treturn this.get(0).scrollTop;\n\t}\n\n\tclick() {\n\t\tthis.each((node) => {\n\t\t\tnode.click();\n\t\t});\n\t\treturn this;\n\t}\n\n}\n\n$ = (selector, contexts) => {\n\tif (selector instanceof DOM) {\n\t\treturn selector;\n\t} else {\n\t\treturn new DOM(selector, contexts);\n\t}\n};\n\n$.class = DOM;\n\nmodule.exports = $;\n},{}],7:[function(require,module,exports){\nconst $ = require('./dom.js');\nconst util = require('./util.js');\nconst popup = require('./popup.js');\n\nclass GroupItem extends $.class {\n\tconstructor(seletor) {\n\n\t\tif (seletor) {\n\t\t\tsuper(seletor);\n\t\t\treturn;\n\t\t}\n\n\t\tsuper(`<li class=\"item mark\">\n\t\t\t<span class=\"status\">\n\t\t\t\t<i class=\"js-status icon icon-show\" title=\"隐藏\"></i>\n\t\t\t</span>\n\t\t\t\n\t\t\t<p class=\"js-name single-line\" title=\"分组名\">分组名</p>\n\t\t\t<input class=\"js-input edit-text\" autocomplete=\"off\" style=\"display: none;\"/>\n\n\t\t\t<span class=\"ctrl\">\n\t\t\t\t<i class=\"js-edit icon icon-edit\" title=\"重命名\"></i>\n\t\t\t\t<i class=\"js-submit icon icon-submit\" title=\"确定\" style=\"display: none;\"></i>\n\t\t\t\t<i class=\"js-delete icon icon-delete\" title=\"删除\"></i>\n\t\t\t</span>\n\t\t</li>`);\n\n\t\tthis.$areas = $();\n\n\t\t// 选中\n\t\tlet $nameText = this.find('.js-name');\n\n\t\t$nameText.on('click', () => {\n\t\t\tthis\n\t\t\t\t.addClass('active')\n\t\t\t\t.siblings()\n\t\t\t\t.removeClass('active');\n\n\t\t\tthis.emit('choose');\n\t\t});\n\n\t\t// 显示和隐藏\n\t\tlet $status = this.find('.js-status');\n\n\t\t$status.on('click', () => {\n\n\t\t\tthis.isShow = !$status.hasClass('icon-show');\n\n\t\t});\n\n\t\t// 标题编辑和保存\n\t\tlet $nameInput = this.find('.js-input');\n\t\tlet $edit = this.find('.js-edit');\n\t\tlet $submit = this.find('.js-submit');\n\n\t\t$edit.on('click', () => {\n\n\t\t\t$edit.hide();\n\t\t\t$submit.show();\n\t\t\t$nameText.hide();\n\t\t\t$nameInput\n\t\t\t\t.show()\n\t\t\t\t.value($nameText.text());\n\t\t});\n\n\t\t$submit.on('click', () => {\n\n\t\t\tlet name = $nameInput.value();\n\n\t\t\tlet flag = this.emit('rename', name);\n\n\t\t\tif (flag === false) {\n\t\t\t\tname = $nameText.text();\n\t\t\t}\n\n\t\t\t$edit.show();\n\t\t\t$submit.hide();\n\t\t\t$nameInput.hide();\n\t\t\t$nameText.show();\n\n\t\t\tthis.name = name;\n\n\t\t});\n\n\t\t$nameInput.on('blur', () => $submit.click());\n\n\t\t// 删除\n\t\tlet $delete = this.find('.js-delete');\n\n\t\t$delete.on('click', () => {\n\t\t\tpopup({\n\t\t\t\tcontent: '是否确认删除分组，<br />删除后将不可恢复。',\n\t\t\t\tconfirm: () => {\n\t\t\t\t\tlet flag = this.emit('delete');\n\t\t\t\t\tif (flag !== false) {\n\t\t\t\t\t\tsuper.remove();\n\t\t\t\t\t\tthis.$areas.remove();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t}\n\n\tset name(val) {\n\t\tthis\n\t\t\t.data('name', val)\n\t\t\t.find('.js-name')\n\t\t\t.attr('title', val)\n\t\t\t.text(val);\n\t}\n\n\tget name() {\n\t\tif (this.size() > 1) {\n\t\t\treturn '分组集';\n\t\t}\n\t\treturn this.data('name');\n\t}\n\n\tset isShow(val) {\n\t\tlet $status = this.find('.js-status');\n\n\t\tif (val) {\n\t\t\tthis.$areas.show();\n\t\t\t$status\n\t\t\t\t\t.addClass('icon-show')\n\t\t\t\t\t.removeClass('icon-hide')\n\t\t\t\t\t.attr('title', '显示');\n\t\t} else {\n\t\t\tthis.$areas.hide();\n\t\t\t$status\n\t\t\t\t\t.addClass('icon-hide')\n\t\t\t\t\t.removeClass('icon-show')\n\t\t\t\t\t.attr('title', '显示');\n\t\t}\n\t\tthis.data('isShow', val);\n\t}\n\n\tget isShow() {\n\t\tlet result = this.data('isShow');\n\t\treturn result === undefined ? true : result;\n\t}\n\n\tset $areas(val) {\n\t\tthis.data('$areas', val);\n\t}\n\n\tget $areas() {\n\t\tif (this.size() > 1) {\n\t\t\tlet $result = $();\n\t\t\tthis.forEach(($group) => {\n\t\t\t\t$result.push($group.$areas);\n\t\t\t});\n\t\t\treturn $result;\n\t\t}\n\t\treturn this.data('$areas');\n\t}\n\n\n\tforEach(callback) {\n\t\tsuper.each((node) => {\n\t\t\tcallback(new GroupItem(node));\n\t\t});\n\t}\n\n\teq(index) {\n\t\treturn new GroupItem(super.eq(index));\n\t}\n\n\tremove() {\n\t\tthis.$areas.remove();\n\t\tsuper.remove();\n\t}\n\n\tappend($area) {\n\t\tif (!util.isArea($area)) {\n\t\t\treturn this;\n\t\t}\n\n\t\t$area.on('delete', () => {\n\t\t\tthis.$areas.splice(this.$areas.index($area));\n\t\t}, true, false);\n\n\t\tthis.$areas.push($area);\n\t\treturn this;\n\t}\n\n}\n\nmodule.exports = GroupItem;\n},{\"./dom.js\":6,\"./popup.js\":9,\"./util.js\":12}],8:[function(require,module,exports){\nconst $ = require('./dom.js');\nconst util = require('./util.js');\nconst toast = require('./toast.js');\nconst GroupItem = require('./group-item.js');\n\nclass GroupList extends $.class {\n\tconstructor(selector) {\n\t\tsuper(selector);\n\n\t\tthis.$groups = new GroupItem([]);\n\n\t}\n\n\tcheck() {\n\t\tif (!this.$groups.hasClass('active') && this.$groups.size() > 0) {\n\t\t\tlet $group = this.$groups.eq(0);\n\t\t\tthis.$currentGroup = $group;\n\t\t\tthis.emit('current', $group.addClass('active'));\n\t\t}\n\t\treturn this;\n\t}\n\n\tfindByName(name) {\n\t\tlet $result = null;\n\n\t\tthis.$groups.forEach(($group) => {\n\t\t\tif ($group.name === name) {\n\t\t\t\t$result = $group;\n\t\t\t}\n\t\t});\n\t\treturn $result;\n\t}\n\n\tappend($group) {\n\t\tif (!util.isGroupItem($group)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tfor (let i = 1; !$group.name; i++) {\n\t\t\tlet name = '分组' + i;\n\n\t\t\tif (!this.findByName(name)) {\n\t\t\t\t$group.name = name;\n\t\t\t}\n\t\t}\n\n\t\t$group.on('choose', () => {\n\t\t\tthis.$currentGroup = $group;\n\t\t\tthis.emit('current', $group);\n\t\t}, true, false);\n\n\t\t$group.on('delete', () => {\n\t\t\tif (this.$groups.size() > 1) {\n\t\t\t\tlet index = this.$groups.index($group);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tthis.$groups.splice(index);\n\t\t\t\t}\n\t\t\t\tthis.check();\n\t\t\t} else {\n\t\t\t\ttoast('删除失败，至少保留一个分组', 'error');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t}, true, false);\n\n\t\t$group.on('rename', (name) => {\n\t\t\tlet $result = this.findByName(name);\n\t\t\tif ($result && !$result.equals($group)) {\n\t\t\t\ttoast('名称已存在', 'error');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}, true, false);\n\n\t\tsuper.append($group);\n\t\tthis.$groups.push($group);\n\t\tthis.check();\n\t\treturn this;\n\t}\n\n}\n\nmodule.exports = GroupList;\n},{\"./dom.js\":6,\"./group-item.js\":7,\"./toast.js\":10,\"./util.js\":12}],9:[function(require,module,exports){\nconst $ = require('./dom.js');\n\nlet $body = $('body');\n\nlet $popup = $(`<div class=\"popup\">\n\t<div class=\"box\">\n\t\t<div class=\"js-title title\"></div>\n\t\t<div class=\"js-content content\"></div>\n\t\t<div class=\"btns\">\n\t\t\t<button class=\"js-cancel cancel\">取消</button>\n\t\t\t<button class=\"js-confirm confirm ml\">确定</button>\n\t\t</div>\n\t</div>\n</div>`);\n\nlet $title = $popup.find('.js-title');\nlet $content = $popup.find('.js-content');\nlet $cancel = $popup.find('.js-cancel');\nlet $confirm = $popup.find('.js-confirm');\n\n$popup.on('animationend', () => {\n\tif ($popup.hasClass('fade-out')) {\n\t\t$popup.removeClass('fade-out');\n\t\t$popup.remove();\n\t}\n\n\tif ($popup.hasClass('fade-in')) {\n\t\t$popup.removeClass('fade-in');\n\t}\n});\n\nmodule.exports = (options = {}) => {\n\n\tif (typeof options === 'string') {\n\t\toptions = {\n\t\t\tcontent: options\n\t\t};\n\t}\n\n\t$title.text(options.title || '提示');\n\n\t$content.html(options.content || '');\n\n\tif (options.cancelText) {\n\t\t$cancel.text(options.cancelText);\n\t}\n\n\t$cancel.on('click', () => {\n\t\tif (typeof options.cancel === 'function') {\n\t\t\tlet flag = options.cancel();\n\t\t\tif (flag === 'false') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t$popup.addClass('fade-out');\n\t}, true);\n\n\tif (options.confirmText) {\n\t\t$confirm.text(options.confirmText);\n\t}\n\n\t$confirm.on('click', () => {\n\t\tif (typeof options.confirm === 'function') {\n\t\t\tlet flag = options.confirm();\n\t\t\tif (flag === 'false') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t$popup.addClass('fade-out');\n\t}, true);\n\n\t$body.append($popup.addClass('fade-in'));\n};\n},{\"./dom.js\":6}],10:[function(require,module,exports){\nconst $ = require('./dom.js');\n\nlet $body = $('body');\n\nlet $toast = $(`<div class=\"toast\">\n\t<i class=\"js-icon icon\"></i>\n\t<span class=\"js-text\"></span>\n</div>`);\n\nlet $icon = $toast.find('.js-icon');\nlet $text = $toast.find('.js-text');\n\n$toast.on('animationend', () => {\n\t$toast.remove();\n});\n\nmodule.exports = (str, type = 'prompt') => {\n\t$toast\n\t\t.removeClass('success')\n\t\t.removeClass('error')\n\t\t.removeClass('prompt')\n\t\t.addClass(type);\n\n\t$icon\n\t\t.removeClass('icon-success')\n\t\t.removeClass('icon-error')\n\t\t.removeClass('icon-prompt')\n\t\t.addClass(`icon-${ type }`);\n\n\t$text.text(str);\n\n\t$body.append($toast);\n};\n},{\"./dom.js\":6}],11:[function(require,module,exports){\nconst $ = require('./dom.js');\nconst toast = require('./toast.js');\n\nclass Uploader extends $.class {\n\n\tconstructor(selector) {\n\n\t\tsuper(selector);\n\n\t\tthis.on('change', () => {\n\t\t\tlet file = this.data('files', undefined, true)[0];\n\n\t\t\tif (!file) {\n\t\t\t\tthis.value('');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet reader = new FileReader();\n\n\t\t\treader.onload = (e) => {\n\t\t\t\tthis.emit('success', e.target.result, e);\n\t\t\t};\n\n\t\t\treader.onerror = (e) => {\n\t\t\t\tthis.emit('error', e);\n\t\t\t};\n\n\t\t\treader.readAsDataURL(file);\n\n\t\t\tthis.value('');\n\t\t});\n\n\t\tthis.onerror = () => toast((this.options.name || '文件') + '读取错误', 'error');\n\n\t}\n\n\topen(options) {\n\n\t\tthis.options = options || {};\n\n\t\tif (this.options.accept) {\n\t\t\tthis.attr('accept', options.accept);\n\t\t} else {\n\t\t\tthis.removeAttr('accept');\n\t\t}\n\n\t\tthis.click();\n\n\t\treturn this;\n\t}\n\n\tsuccess(handler) {\n\t\tthis.onsuccess = handler;\n\t}\n\n\terror(handler) {\n\t\tthis.onerror = handler;\n\t}\n}\n\nmodule.exports = Uploader;\n},{\"./dom.js\":6,\"./toast.js\":10}],12:[function(require,module,exports){\nconst Uploader = require('./uploader.js');\nconst Canvas = require('./canvas.js');\nconst GroupList = require('./group-list.js');\nconst GroupItem = require('./group-item.js');\nconst Area = require('./area.js');\nconst DOM = require('./dom.js').class;\n\nmodule.exports.toFloat = (str) => {\n\tif (typeof str !== 'string') {\n\t\treturn;\n\t}\n\tlet result = str.match(/\\d+/g);\n\treturn parseFloat(result && (result.length > 1 ? result : result[0]));\n};\n\nmodule.exports.toString = (num, unit) => {\n\treturn num + unit;\n};\n\nmodule.exports.isCanvas = (object) => {\n\treturn object instanceof Canvas;\n};\n\nmodule.exports.isGroupList = (object) => {\n\treturn object instanceof GroupList;\n};\n\nmodule.exports.isGroupItem = (object) => {\n\treturn object instanceof GroupItem;\n};\n\nmodule.exports.isUploader = (object) => {\n\treturn object instanceof Uploader;\n};\n\nmodule.exports.isArea = (object) => {\n\treturn object instanceof Area;\n};\n\nmodule.exports.isDOM = (object) => {\n\treturn object instanceof DOM;\n};\n},{\"./area.js\":4,\"./canvas.js\":5,\"./dom.js\":6,\"./group-item.js\":7,\"./group-list.js\":8,\"./uploader.js\":11}]},{},[1])\n\n","let $;\n\nclass DOM {\n\n\tconstructor(selector, contexts = document) {\n\n\t\tif (!Array.isArray(contexts)) {\n\t\t\tthis.contexts = [contexts];\n\t\t} else {\n\t\t\tthis.contexts = contexts;\n\t\t}\n\n\t\tif (typeof selector === 'string') {\n\t\t\tif (/^<[\\s\\S]+>$/.test(selector)) {\n\t\t\t\tlet $temp = document.createElement('div');\n\t\t\t\t$temp.innerHTML = selector;\n\t\t\t\tthis.nodes = [$temp.firstChild];\n\t\t\t} else {\n\t\t\t\tthis.nodes = [];\n\n\t\t\t\tthis.contexts.forEach((context) => {\n\t\t\t\t\tthis.nodes.push(...context.querySelectorAll(selector));\n\t\t\t\t});\n\n\t\t\t}\n\t\t} else if (selector instanceof DOM) {\n\t\t\tthis.contexts = selector.contexts;\n\t\t\tthis.nodes = selector.nodes;\n\t\t} else if (Array.isArray(selector)) {\n\t\t\tthis.nodes = selector.filter((node) => {\n\t\t\t\treturn !!node;\n\t\t\t});\n\t\t} else if (selector) {\n\t\t\tthis.nodes = [selector];\n\t\t} else {\n\t\t\tthis.nodes = [];\n\t\t}\n\n\t}\n\n\teach(callback) {\n\t\tthis.nodes.forEach(callback);\n\t\treturn this;\n\t}\n\n\tmap(callback) {\n\t\treturn this.nodes.map(callback);\n\t}\n\n\tfilter(callback) {\n\t\treturn $(this.nodes.filter(callback));\n\t}\n\n\tget(index) {\n\t\treturn this.nodes[index];\n\t}\n\n\teq(index) {\n\t\treturn $(this.nodes[index]);\n\t}\n\n\tfind(selector) {\n\t\treturn $(selector, this.nodes);\n\t}\n\n\tsize() {\n\t\treturn this.nodes.length;\n\t}\n\n\tequals(selector) {\n\t\treturn this.nodes[0] === $(selector).nodes[0];\n\t}\n\n\tconcat(selector) {\n\t\treturn $([...$(selector).nodes, ...this.nodes]);\n\t}\n\n\tpush(selector) {\n\t\treturn this.nodes.push(...$(selector).nodes);\n\t}\n\n\tsplice(index, count = 1, ...selector) {\n\t\tthis.nodes.splice(index, count, ...$(selector).nodes);\n\t\treturn this;\n\t}\n\n\tindex(selector) {\n\t\treturn this.nodes.indexOf($(selector).nodes[0]);\n\t}\n\n\ton(eventName, handler, isOnly = false, isOrigin = true) {\n\t\tlet events = eventName.split(' ');\n\t\tif (isOnly) {\n\t\t\tthis.each((node) => {\n\t\t\t\tevents.forEach((event) => {\n\t\t\t\t\tif (isOrigin) {\n\t\t\t\t\t\tnode['on' + event] = function() {\n\t\t\t\t\t\t\treturn handler.call($(node), ...arguments);\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode['_on' + event] = function() {\n\t\t\t\t\t\t\treturn handler.call($(node), ...arguments);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tthis.each((node) => {\n\t\t\t\tevents.forEach((event) => {\n\t\t\t\t\tnode.addEventListener(event, function() {\n\t\t\t\t\t\thandler.call($(node), ...arguments);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn this;\n\t}\n\n\toff(eventName, handler) {\n\t\tthis.each((node) => {\n\t\t\tnode.removeEventListener(eventName, handler);\n\t\t\tnode['on' + eventName] = null;\n\t\t\tnode['_on' + eventName] = null;\n\t\t});\n\t\treturn this;\n\t}\n\n\temit(event, ...params) {\n\t\tlet result = [];\n\t\tthis.each((node) => {\n\t\t\tif (typeof this['on' + event] === 'function') {\n\t\t\t\tresult.push(this['on' + event](...params));\n\t\t\t} else if (typeof node['on' + event] === 'function') {\n\t\t\t\tresult.push(node['on' + event](...params));\n\t\t\t} else if (typeof node['_on' + event] === 'function') {\n\t\t\t\tresult.push(node['_on' + event](...params));\n\t\t\t}\n\t\t});\n\t\treturn result.length > 1 ? result : result[0];\n\t}\n\n\tattr(key, value) {\n\t\tif (typeof key === 'object') {\n\t\t\tthis.each((node) => {\n\t\t\t\tfor (let name in key) {\n\t\t\t\t\tnode.setAttribute(name, key[name]);\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (value !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.setAttribute(key, value);\n\t\t\t});\n\t\t} else {\n\t\t\treturn this.nodes.map((node) => {\n\t\t\t\treturn node.getAttribute(key);\n\t\t\t}).join('');\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tremoveAttr(key) {\n\t\tthis.each((node) => {\n\t\t\tnode.removeAttribute(key);\n\t\t});\n\t\treturn this;\n\t}\n\n\tdata(key, value, isOrigin = false) {\n\t\tif (typeof key === 'object') {\n\t\t\tthis.each((node) => {\n\t\t\t\tfor (let name in key) {\n\t\t\t\t\tif (isOrigin) {\n\t\t\t\t\t\tnode[name] = key[name];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode['_' + name] = key[name];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (value !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tif (isOrigin) {\n\t\t\t\t\tnode[key] = value;\n\t\t\t\t} else {\n\t\t\t\t\tnode['_' + key] = value;\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tif (isOrigin) {\n\t\t\t\treturn this.get(0)[key];\n\t\t\t} else {\n\t\t\t\treturn this.get(0)['_' + key];\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\taddClass(...names) {\n\t\tthis.each((node) => {\n\t\t\tlet classNames = node.className.split(' ');\n\n\t\t\tnames.forEach((name) => {\n\t\t\t\tif (classNames.indexOf(name) === -1) {\n\t\t\t\t\tclassNames.push(name);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tnode.className = classNames.join(' ');\n\t\t});\n\t\treturn this;\n\t}\n\n\tremoveClass(...names) {\n\t\tthis.each((node) => {\n\t\t\tlet classNames = node.className.split(' ');\n\n\t\t\tnames.forEach((name) => {\n\t\t\t\tlet index = classNames.indexOf(name);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tclassNames.splice(index, 1);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tnode.className = classNames.join(' ');\n\t\t});\n\t\treturn this;\n\t}\n\n\thasClass(name) {\n\t\treturn this.nodes.some((node) => {\n\t\t\treturn node.className.indexOf(name) !== -1;\n\t\t});\n\t}\n\n\tcss(key, val) {\n\t\tif (typeof key === 'object') {\n\t\t\tthis.each((node) => {\n\t\t\t\tfor (let name in key) {\n\t\t\t\t\tnode.style[name] = key[name];\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (val !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.style[key] = val;\n\t\t\t});\n\t\t} else if ('getComputedStyle' in window) {\n\t\t\treturn window.getComputedStyle(this.get(0))[key];\n\t\t} else {\n\t\t\treturn this.get(0).style[key];\n\t\t}\n\t}\n\n\twidth(val) {\n\t\treturn this.css('width', val);\n\t}\n\n\theight(val) {\n\t\treturn this.css('height', val);\n\t}\n\n\tappend(selector) {\n\t\tthis.each((node) => {\n\t\t\t$(selector).each((n) => {\n\t\t\t\tnode.appendChild(n);\n\t\t\t});\n\t\t});\n\t\treturn this;\n\t}\n\n\tremove() {\n\t\tthis.each((node) => {\n\t\t\tnode.remove();\n\t\t});\n\t\treturn this;\n\t}\n\n\treplace(selector) {\n\t\tthis.each((node) => {\n\t\t\tnode.parentNode.replaceChild($(selector).get(0), node);\n\t\t});\n\t\treturn this;\n\t}\n\n\thtml(html) {\n\t\tif (html !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.innerHTML = html;\n\t\t\t});\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.get(0).innerHTML;\n\t\t}\n\t}\n\n\ttext(str) {\n\t\tif (str !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.innerText = str;\n\t\t\t});\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.get(0).innerText;\n\t\t}\n\t}\n\n\tvalue(val) {\n\t\tif (val !== undefined) {\n\t\t\tthis.each((node) => {\n\t\t\t\tnode.value = val;\n\t\t\t});\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.get(0).value;\n\t\t}\n\t}\n\n\tparent() {\n\t\treturn $(this.nodes.map((node) => {\n\t\t\treturn node.parentNode;\n\t\t}));\n\t}\n\n\tchildren() {\n\t\tlet result = [];\n\t\tthis.each((node) => {\n\t\t\tresult.push(...node.children);\n\t\t});\n\t\treturn $(result);\n\t}\n\n\tsiblings() {\n\t\treturn this.parent().children().filter((node) => {\n\t\t\treturn this.nodes.indexOf(node) === -1;\n\t\t});\n\t}\n\n\tshow() {\n\t\tthis.css('display', '');\n\t\treturn this;\n\t}\n\n\thide() {\n\t\tthis.css('display', 'none');\n\t\treturn this;\n\t}\n\n\toffset() {\n\t\treturn {\n\t\t\tleft: this.get(0).offsetLeft,\n\t\t\ttop: this.get(0).offsetTop\n\t\t};\n\t}\n\n\tscrollLeft() {\n\t\treturn this.get(0).scrollLeft;\n\t}\n\n\tscrollTop() {\n\t\treturn this.get(0).scrollTop;\n\t}\n\n\tclick() {\n\t\tthis.each((node) => {\n\t\t\tnode.click();\n\t\t});\n\t\treturn this;\n\t}\n\n}\n\n$ = (selector, contexts) => {\n\tif (selector instanceof DOM) {\n\t\treturn selector;\n\t} else {\n\t\treturn new DOM(selector, contexts);\n\t}\n};\n\n$.class = DOM;\n\nmodule.exports = $;","const $ = require('./dom.js');\nconst util = require('./util.js');\nconst popup = require('./popup.js');\n\nclass GroupItem extends $.class {\n\tconstructor(seletor) {\n\n\t\tif (seletor) {\n\t\t\tsuper(seletor);\n\t\t\treturn;\n\t\t}\n\n\t\tsuper(`<li class=\"item mark\">\n\t\t\t<span class=\"status\">\n\t\t\t\t<i class=\"js-status icon icon-show\" title=\"隐藏\"></i>\n\t\t\t</span>\n\t\t\t\n\t\t\t<p class=\"js-name single-line\" title=\"分组名\">分组名</p>\n\t\t\t<input class=\"js-input edit-text\" autocomplete=\"off\" style=\"display: none;\"/>\n\n\t\t\t<span class=\"ctrl\">\n\t\t\t\t<i class=\"js-edit icon icon-edit\" title=\"重命名\"></i>\n\t\t\t\t<i class=\"js-submit icon icon-submit\" title=\"确定\" style=\"display: none;\"></i>\n\t\t\t\t<i class=\"js-delete icon icon-delete\" title=\"删除\"></i>\n\t\t\t</span>\n\t\t</li>`);\n\n\t\tthis.$areas = $();\n\n\t\t// 选中\n\t\tlet $nameText = this.find('.js-name');\n\n\t\t$nameText.on('click', () => {\n\t\t\tthis\n\t\t\t\t.addClass('active')\n\t\t\t\t.siblings()\n\t\t\t\t.removeClass('active');\n\n\t\t\tthis.emit('choose');\n\t\t});\n\n\t\t// 显示和隐藏\n\t\tlet $status = this.find('.js-status');\n\n\t\t$status.on('click', () => {\n\n\t\t\tthis.isShow = !$status.hasClass('icon-show');\n\n\t\t});\n\n\t\t// 标题编辑和保存\n\t\tlet $nameInput = this.find('.js-input');\n\t\tlet $edit = this.find('.js-edit');\n\t\tlet $submit = this.find('.js-submit');\n\n\t\t$edit.on('click', () => {\n\n\t\t\t$edit.hide();\n\t\t\t$submit.show();\n\t\t\t$nameText.hide();\n\t\t\t$nameInput\n\t\t\t\t.show()\n\t\t\t\t.value($nameText.text());\n\t\t});\n\n\t\t$submit.on('click', () => {\n\n\t\t\tlet name = $nameInput.value();\n\n\t\t\tlet flag = this.emit('rename', name);\n\n\t\t\tif (flag === false) {\n\t\t\t\tname = $nameText.text();\n\t\t\t}\n\n\t\t\t$edit.show();\n\t\t\t$submit.hide();\n\t\t\t$nameInput.hide();\n\t\t\t$nameText.show();\n\n\t\t\tthis.name = name;\n\n\t\t});\n\n\t\t$nameInput.on('blur', () => $submit.click());\n\n\t\t// 删除\n\t\tlet $delete = this.find('.js-delete');\n\n\t\t$delete.on('click', () => {\n\t\t\tpopup({\n\t\t\t\tcontent: '是否确认删除分组，<br />删除后将不可恢复。',\n\t\t\t\tconfirm: () => {\n\t\t\t\t\tlet flag = this.emit('delete');\n\t\t\t\t\tif (flag !== false) {\n\t\t\t\t\t\tsuper.remove();\n\t\t\t\t\t\tthis.$areas.remove();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t}\n\n\tset name(val) {\n\t\tthis\n\t\t\t.data('name', val)\n\t\t\t.find('.js-name')\n\t\t\t.attr('title', val)\n\t\t\t.text(val);\n\t}\n\n\tget name() {\n\t\tif (this.size() > 1) {\n\t\t\treturn '分组集';\n\t\t}\n\t\treturn this.data('name');\n\t}\n\n\tset isShow(val) {\n\t\tlet $status = this.find('.js-status');\n\n\t\tif (val) {\n\t\t\tthis.$areas.show();\n\t\t\t$status\n\t\t\t\t\t.addClass('icon-show')\n\t\t\t\t\t.removeClass('icon-hide')\n\t\t\t\t\t.attr('title', '显示');\n\t\t} else {\n\t\t\tthis.$areas.hide();\n\t\t\t$status\n\t\t\t\t\t.addClass('icon-hide')\n\t\t\t\t\t.removeClass('icon-show')\n\t\t\t\t\t.attr('title', '显示');\n\t\t}\n\t\tthis.data('isShow', val);\n\t}\n\n\tget isShow() {\n\t\tlet result = this.data('isShow');\n\t\treturn result === undefined ? true : result;\n\t}\n\n\tset $areas(val) {\n\t\tthis.data('$areas', val);\n\t}\n\n\tget $areas() {\n\t\tif (this.size() > 1) {\n\t\t\tlet $result = $();\n\t\t\tthis.forEach(($group) => {\n\t\t\t\t$result.push($group.$areas);\n\t\t\t});\n\t\t\treturn $result;\n\t\t}\n\t\treturn this.data('$areas');\n\t}\n\n\n\tforEach(callback) {\n\t\tsuper.each((node) => {\n\t\t\tcallback(new GroupItem(node));\n\t\t});\n\t}\n\n\teq(index) {\n\t\treturn new GroupItem(super.eq(index));\n\t}\n\n\tremove() {\n\t\tthis.$areas.remove();\n\t\tsuper.remove();\n\t}\n\n\tappend($area) {\n\t\tif (!util.isArea($area)) {\n\t\t\treturn this;\n\t\t}\n\n\t\t$area.on('delete', () => {\n\t\t\tthis.$areas.splice(this.$areas.index($area));\n\t\t}, true, false);\n\n\t\tthis.$areas.push($area);\n\t\treturn this;\n\t}\n\n}\n\nmodule.exports = GroupItem;","const $ = require('./dom.js');\nconst util = require('./util.js');\nconst toast = require('./toast.js');\nconst GroupItem = require('./group-item.js');\n\nclass GroupList extends $.class {\n\tconstructor(selector) {\n\t\tsuper(selector);\n\n\t\tthis.$groups = new GroupItem([]);\n\n\t}\n\n\tcheck() {\n\t\tif (!this.$groups.hasClass('active') && this.$groups.size() > 0) {\n\t\t\tlet $group = this.$groups.eq(0);\n\t\t\tthis.$currentGroup = $group;\n\t\t\tthis.emit('current', $group.addClass('active'));\n\t\t}\n\t\treturn this;\n\t}\n\n\tfindByName(name) {\n\t\tlet $result = null;\n\n\t\tthis.$groups.forEach(($group) => {\n\t\t\tif ($group.name === name) {\n\t\t\t\t$result = $group;\n\t\t\t}\n\t\t});\n\t\treturn $result;\n\t}\n\n\tappend($group) {\n\t\tif (!util.isGroupItem($group)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tfor (let i = 1; !$group.name; i++) {\n\t\t\tlet name = '分组' + i;\n\n\t\t\tif (!this.findByName(name)) {\n\t\t\t\t$group.name = name;\n\t\t\t}\n\t\t}\n\n\t\t$group.on('choose', () => {\n\t\t\tthis.$currentGroup = $group;\n\t\t\tthis.emit('current', $group);\n\t\t}, true, false);\n\n\t\t$group.on('delete', () => {\n\t\t\tif (this.$groups.size() > 1) {\n\t\t\t\tlet index = this.$groups.index($group);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tthis.$groups.splice(index);\n\t\t\t\t}\n\t\t\t\tthis.check();\n\t\t\t} else {\n\t\t\t\ttoast('删除失败，至少保留一个分组', 'error');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t}, true, false);\n\n\t\t$group.on('rename', (name) => {\n\t\t\tlet $result = this.findByName(name);\n\t\t\tif ($result && !$result.equals($group)) {\n\t\t\t\ttoast('名称已存在', 'error');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}, true, false);\n\n\t\tsuper.append($group);\n\t\tthis.$groups.push($group);\n\t\tthis.check();\n\t\treturn this;\n\t}\n\n}\n\nmodule.exports = GroupList;","const $ = require('./dom.js');\n\nlet $body = $('body');\n\nlet $popup = $(`<div class=\"popup\">\n\t<div class=\"box\">\n\t\t<div class=\"js-title title\"></div>\n\t\t<div class=\"js-content content\"></div>\n\t\t<div class=\"btns\">\n\t\t\t<button class=\"js-cancel cancel\">取消</button>\n\t\t\t<button class=\"js-confirm confirm ml\">确定</button>\n\t\t</div>\n\t</div>\n</div>`);\n\nlet $title = $popup.find('.js-title');\nlet $content = $popup.find('.js-content');\nlet $cancel = $popup.find('.js-cancel');\nlet $confirm = $popup.find('.js-confirm');\n\n$popup.on('animationend', () => {\n\tif ($popup.hasClass('fade-out')) {\n\t\t$popup.removeClass('fade-out');\n\t\t$popup.remove();\n\t}\n\n\tif ($popup.hasClass('fade-in')) {\n\t\t$popup.removeClass('fade-in');\n\t}\n});\n\nmodule.exports = (options = {}) => {\n\n\tif (typeof options === 'string') {\n\t\toptions = {\n\t\t\tcontent: options\n\t\t};\n\t}\n\n\t$title.text(options.title || '提示');\n\n\t$content.html(options.content || '');\n\n\tif (options.cancelText) {\n\t\t$cancel.text(options.cancelText);\n\t}\n\n\t$cancel.on('click', () => {\n\t\tif (typeof options.cancel === 'function') {\n\t\t\tlet flag = options.cancel();\n\t\t\tif (flag === 'false') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t$popup.addClass('fade-out');\n\t}, true);\n\n\tif (options.confirmText) {\n\t\t$confirm.text(options.confirmText);\n\t}\n\n\t$confirm.on('click', () => {\n\t\tif (typeof options.confirm === 'function') {\n\t\t\tlet flag = options.confirm();\n\t\t\tif (flag === 'false') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t$popup.addClass('fade-out');\n\t}, true);\n\n\t$body.append($popup.addClass('fade-in'));\n};","const $ = require('./dom.js');\n\nlet $body = $('body');\n\nlet $toast = $(`<div class=\"toast\">\n\t<i class=\"js-icon icon\"></i>\n\t<span class=\"js-text\"></span>\n</div>`);\n\nlet $icon = $toast.find('.js-icon');\nlet $text = $toast.find('.js-text');\n\n$toast.on('animationend', () => {\n\t$toast.remove();\n});\n\nmodule.exports = (str, type = 'prompt') => {\n\t$toast\n\t\t.removeClass('success')\n\t\t.removeClass('error')\n\t\t.removeClass('prompt')\n\t\t.addClass(type);\n\n\t$icon\n\t\t.removeClass('icon-success')\n\t\t.removeClass('icon-error')\n\t\t.removeClass('icon-prompt')\n\t\t.addClass(`icon-${ type }`);\n\n\t$text.text(str);\n\n\t$body.append($toast);\n};","const $ = require('./dom.js');\nconst toast = require('./toast.js');\n\nclass Uploader extends $.class {\n\n\tconstructor(selector) {\n\n\t\tsuper(selector);\n\n\t\tthis.on('change', () => {\n\t\t\tlet file = this.data('files', undefined, true)[0];\n\n\t\t\tif (!file) {\n\t\t\t\tthis.value('');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet reader = new FileReader();\n\n\t\t\treader.onload = (e) => {\n\t\t\t\tthis.emit('success', e.target.result, e);\n\t\t\t};\n\n\t\t\treader.onerror = (e) => {\n\t\t\t\tthis.emit('error', e);\n\t\t\t};\n\n\t\t\treader.readAsDataURL(file);\n\n\t\t\tthis.value('');\n\t\t});\n\n\t\tthis.onerror = () => toast((this.options.name || '文件') + '读取错误', 'error');\n\n\t}\n\n\topen(options) {\n\n\t\tthis.options = options || {};\n\n\t\tif (this.options.accept) {\n\t\t\tthis.attr('accept', options.accept);\n\t\t} else {\n\t\t\tthis.removeAttr('accept');\n\t\t}\n\n\t\tthis.click();\n\n\t\treturn this;\n\t}\n\n\tsuccess(handler) {\n\t\tthis.onsuccess = handler;\n\t}\n\n\terror(handler) {\n\t\tthis.onerror = handler;\n\t}\n}\n\nmodule.exports = Uploader;","const Uploader = require('./uploader.js');\nconst Canvas = require('./canvas.js');\nconst GroupList = require('./group-list.js');\nconst GroupItem = require('./group-item.js');\nconst Area = require('./area.js');\nconst DOM = require('./dom.js').class;\n\nmodule.exports.toFloat = (str) => {\n\tif (typeof str !== 'string') {\n\t\treturn;\n\t}\n\tlet result = str.match(/\\d+/g);\n\treturn parseFloat(result && (result.length > 1 ? result : result[0]));\n};\n\nmodule.exports.toString = (num, unit) => {\n\treturn num + unit;\n};\n\nmodule.exports.isCanvas = (object) => {\n\treturn object instanceof Canvas;\n};\n\nmodule.exports.isGroupList = (object) => {\n\treturn object instanceof GroupList;\n};\n\nmodule.exports.isGroupItem = (object) => {\n\treturn object instanceof GroupItem;\n};\n\nmodule.exports.isUploader = (object) => {\n\treturn object instanceof Uploader;\n};\n\nmodule.exports.isArea = (object) => {\n\treturn object instanceof Area;\n};\n\nmodule.exports.isDOM = (object) => {\n\treturn object instanceof DOM;\n};"]}